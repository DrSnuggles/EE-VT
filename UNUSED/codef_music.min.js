function music(e){if(window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.oAudioContext||window.msAudioContext,"undefined"!=typeof AudioContext)switch(e){case"YM":CODEF_AUDIO_CONTEXT=new AudioContext,CODEF_AUDIO_NODE=CODEF_AUDIO_CONTEXT.createScriptProcessor(8192),this.loader=new Object,this.loader.player=new YmProcessor,this.stereo_value=!1;break;default:this.stereo_value=!1}return this.LoadAndRun="YM"==e?function(e){var t=this;if("undefined"!=typeof AudioContext){var i=new XMLHttpRequest;i.open("GET",e),i.overrideMimeType("text/plain; charset=x-user-defined"),i.onreadystatechange=function(){if(4==this.readyState&&200==this.status){for(var e=this.responseText||"",i=[],a=e.length,r=String.fromCharCode,s=0;s<a;s++)i[s]=r(255&e.charCodeAt(s));var o=new dataType;o.data=i.join(""),YmConst_PLAYER_FREQ=CODEF_AUDIO_CONTEXT.sampleRate,t.loader.player.stereo=t.stereo_value,t.loader.player.load(o)}},i.send()}}:function(e){var t=this;if(this.loader=window.neoart.FileLoader,"undefined"!=typeof AudioContext){var i=new XMLHttpRequest;i.open("GET",e),i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer",i.onreadystatechange=function(){4==this.readyState&&200==this.status&&(t.loader.player=null,t.loader.load(this.response),t.loader.player.reset(),t.loader.player.stereo=t.stereo_value,t.loader.player.play())},i.send()}},this.stereo=function(e){this.stereo_value=e},this}function YmSong(e){this.title,this.author,this.comment,this.attribs,this.clock,this.digidrums,this.drums,this.frames=new Array,this.frameSize,this.length,this.rate,this.restart,this.supported=!0,this.data=new dataType,this.data.data=e,this.init=function(){for(this.decode(),this.attribs&YmConst_INTERLEAVED&&this.deinterleave(),i=0;i<this.length;++i)this.frames[i]=this.data.readBytes(0,this.frameSize)},this.decode=function(){var e,t=this.data.readMultiByte(4,"txt");switch(t){case"YM2!":case"YM3!":case"YM3b":this.frameSize=14,this.length=(this.data.data.length-4)/this.frameSize,this.clock=YmConst_ATARI_FREQ,this.rate=50,this.restart="YM3b"!=t?0:this.data.readByte(),this.attribs=YmConst_INTERLEAVED|YmConst_TIME_CONTROL;break;case"YM4!":this.supported=!1;break;case"YM5!":case"YM6!":if("LeOnArD!"!=(t=this.data.readMultiByte(8,"txt")))return void(this.supported=!1);if(this.length=this.data.readInt(),this.attribs=this.data.readInt(),this.drums=this.data.readShort(),this.clock=this.data.readInt(),this.rate=this.data.readShort(),this.restart=this.data.readInt(),this.data.readShort(),this.drums){for(this.digidrums=new Array,e=0;e<this.drums;++e)this.digidrum=new Digidrum(this.data.readInt()),0!=this.digidrum.size&&(this.digidrum.wave.data=this.data.readBytes(0,this.digidrum.size),this.digidrum.convert(this.attribs),this.digidrums[e]=this.digidrum);this.attribs&=~YmConst_DRUM_4BITS}this.title=this.data.readString(),this.author=this.data.readString(),this.comment=this.data.readString(),this.frameSize=16,this.attribs=YmConst_INTERLEAVED|YmConst_TIME_CONTROL;break;case"MIX1":supported=!1;break;case"YMT1":case"YMT2":default:supported=!1}},this.deinterleave=function(){var e,t,i=0,a=new Array,r=new Array;for(e=0;e<this.frameSize;++e)a[e]=this.data.pos+this.length*e;for(e=0;e<this.length;++e){for(t=0;t<this.frameSize;++t)r[t+i]=this.data.data[e+a[t]];i+=this.frameSize}this.data.data="",this.data.data=r,this.data.pos=0,this.attribs&=~YmConst_INTERLEAVED},this.init()}function YmProcessor(){this.counter,this.sound,this.soundChannel,this.soundChannelPos,this.song,this.loop=1,this.stereo=0,this.audioFreq,this.clock,this.registers=new Array,this.volumeEnv,this.buffer,this.bufferSize,this.voiceA=new YmChannel(this),this.voiceB=new YmChannel(this),this.voiceC=new YmChannel(this),this.samplesTick,this.samplesLeft,this.frame,this.envData,this.envPhase,this.envPos,this.envShape,this.envStep,this.noiseOutput,this.noisePos,this.noiseStep,this.rng,this.syncBuzzer,this.syncBuzzerPhase,this.syncBuzzerStep,__self=this,this.init=function(){var e;for(this.bufferSize=YmConst_BUFFER_SIZE,this.buffer=new Array,e=0;e<this.bufferSize;++e)this.buffer[e]=new Sample;this.envData=YmConst_ENVELOPES},this.load=function(e){var t=new LHa;return this.song=new YmSong(t.unpack(e)),this.audioFreq=YmConst_PLAYER_FREQ,this.clock=this.song.clock,this.samplesTick=this.audioFreq/this.song.rate,CODEF_AUDIO_NODE.onaudioprocess=function(e){__self.mixer(e)},this.song.supported},this.mixer=function(e){for(var t,i=0,a=0,r=0,s=0,o=0,l=0,n=0;r<this.bufferSize;){if(0==this.samplesLeft){if(this.frame>=this.song.length){if(!this.loop)return void this.stop();this.frame=this.song.restart}for(this.syncBuzzerStop(),a=0;a<this.song.frameSize;a++)this.registers[a]=this.song.frames[this.frame][a].charCodeAt(0);this.frame++,this.updateEffects(1,6,14),this.updateEffects(3,8,15),this.writeRegisters(),this.samplesLeft=this.samplesTick}for(l=this.samplesLeft,r+l>this.bufferSize&&(l=this.bufferSize-r),o=s+l,a=s;a<o;++a){t=this.buffer[a],65536&this.noisePos&&(i=1&this.rng^this.rng>>2&1,this.rng=this.rng>>1|i<<16,this.noiseOutput^=i?0:65535,this.noisePos&=65535),this.volumeEnv=this.envData[Math.floor((this.envShape<<6)+(this.envPhase<<5)+(this.envPos>>26))],this.voiceA.computeVolume(),this.voiceB.computeVolume(),this.voiceC.computeVolume(),i=this.voiceA.enabled()&(this.noiseOutput|this.voiceA.mixNoise);this.voiceA.getvolume();t.voiceA=i?this.voiceA.getvolume():-1,i=this.voiceB.enabled()&(this.noiseOutput|this.voiceB.mixNoise),t.voiceB=i?this.voiceB.getvolume():-1,i=this.voiceC.enabled()&(this.noiseOutput|this.voiceC.mixNoise),t.voiceC=i?this.voiceC.getvolume():-1,this.voiceA.next(),this.voiceB.next(),this.voiceC.next(),this.noisePos+=this.noiseStep,this.envPos+=this.envStep,this.envPos>2147483647&&(this.envPos-=2147483647),0==this.envPhase&&this.envPos<this.envStep&&(envPhase=1),this.syncBuzzer&&(this.syncBuzzerPhase+=this.syncBuzzerStep,1073741824&this.syncBuzzerPhase&&(this.envPos=0,this.envPhase=0,this.syncBuzzerPhase&=1073741823))}r+=l,s=o,this.samplesLeft-=l}var h=e.outputBuffer.getChannelData(0),p=e.outputBuffer.getChannelData(1);if(this.stereo)for(a=0;a<this.bufferSize;++a)t=this.buffer[a],h[a]=t.left(),p[a]=t.right();else for(a=0;a<this.bufferSize;++a)n=this.buffer[a].mono(),h[a]=n,p[a]=n},this.writeRegisters=function(){var e;this.registers[0]&=255,this.registers[1]&=15,this.voiceA.computeTone(this.registers[1],this.registers[0]),this.registers[2]&=255,this.registers[3]&=15,this.voiceB.computeTone(this.registers[3],this.registers[2]),this.registers[4]&=255,this.registers[5]&=15,this.voiceC.computeTone(this.registers[5],this.registers[4]),this.registers[6]&=31,this.registers[6]<3?(this.noisePos=0,this.noiseOutput=65535,this.noiseStep=0):(e=this.clock/((this.registers[6]<<3)*this.audioFreq),this.noiseStep=Math.floor(32768*e)),this.registers[7]&=255,this.voiceA.mixTone=1&this.registers[7]?65535:0,this.voiceB.mixTone=2&this.registers[7]?65535:0,this.voiceC.mixTone=4&this.registers[7]?65535:0,this.voiceA.mixNoise=8&this.registers[7]?65535:0,this.voiceB.mixNoise=16&this.registers[7]?65535:0,this.voiceC.mixNoise=32&this.registers[7]?65535:0,this.registers[8]&=31,this.voiceA.setvolume(this.registers[8]),this.registers[9]&=31,this.voiceB.setvolume(this.registers[9]),this.registers[10]&=31,this.voiceC.setvolume(this.registers[10]),this.registers[11]&=255,this.registers[12]&=255,e=this.registers[12]<<8|this.registers[11],e<3?this.envStep=0:(e=this.clock/((e<<8)*this.audioFreq),this.envStep=Math.floor(1073741824*e)),255==this.registers[13]?this.registers[13]=0:(this.registers[13]&=15,this.envPhase=0,this.envPos=0,this.envShape=this.registers[13])},this.updateEffects=function(e,t,i){var a=0,r=0,s=0;if(e=240&this.registers[e],t=this.registers[t]>>5&7,i=this.registers[i],48&e)switch(s=((48&e)>>4)-1,192&e){case 0:case 128:break;case 64:a=31&this.registers[s+8],a>=0&&a<this.song.drums&&(t=YmConst_MFP_PREDIV[t]*i)>0&&(r=2457600/t,0==s?(this.voiceA.drum=this.song.digidrums[a],this.voiceA.drumStart(r)):1==s?(this.voiceB.drum=this.song.digidrums[a],this.voiceB.drumStart(r)):2==s&&(this.voiceC.drum=this.song.digidrums[a],this.voiceC.drumStart(r)))}},this.syncBuzzerStart=function(e,t){this.envShape=15&this.shapeEnv,this.syncBuzzerStep=1073741824*this.timerFreq/this.audioFreq,this.syncBuzzerPhase=0,this.syncBuzzer=!0},this.syncBuzzerStop=function(){this.syncBuzzer=!1,this.syncBuzzerPhase=0,this.syncBuzzerStep=0},this.stop=function(){return this.reset(),!0},this.reset=function(){var e;for(this.voiceA=new YmChannel(this),this.voiceB=new YmChannel(this),this.voiceC=new YmChannel(this),this.samplesLeft=0,this.frame=0,this.registers=new Array,e=0;e<16;++e)this.registers[e]=0;this.registers[7]=255,this.writeRegisters(),this.volumeEnv=0,this.noiseOutput=65535,this.noisePos=0,this.noiseStep=0,this.rng=1,this.envPhase=0,this.envPos=0,this.envShape=0,this.envStep=0,this.syncBuzzerStop()},this.init(),this.reset(),CODEF_AUDIO_NODE.connect(CODEF_AUDIO_CONTEXT.destination)}function Sample(){this.voiceA=-1,this.voiceB=-1,this.voiceC=-1,this.mono=function(){var e=YmConst_MONO,t=0;return this.voiceA>-1&&(t+=e[this.voiceA]),this.voiceB>-1&&(t+=e[this.voiceB]),this.voiceC>-1&&(t+=e[this.voiceC]),t},this.left=function(){var e=YmConst_STEREO,t=0;return this.voiceA>-1&&(t+=e[this.voiceA]),this.voiceB>-1&&(t+=e[this.voiceB]),t},this.right=function(){var e=YmConst_STEREO,t=0;return this.voiceB>-1&&(t+=e[this.voiceB]),this.voiceC>-1&&(t+=e[this.voiceC]),t}}function YmChannel(e){this.mixNoise=0,this.mixTone=0,this.mode=0,this.position=0,this.step=0,this.digidrum=0,this.drum=0,this.drumPos=0,this.drumStep=0,this.processor=e,this.vol=0,this.enabled=function(){return this.position>>30|this.mixTone},this.getvolume=function(){return this.mode?this.processor.volumeEnv:this.vol},this.setvolume=function(e){this.mode=!!(16&e),this.vol=e},this.next=function(){this.position+=this.step,this.position>2147483647&&(this.position-=2147483647)},this.computeTone=function(e,t){var i=e<<8|t;i<5?(this.position=1073741824,this.step=0):(i=this.processor.clock/((i<<3)*this.processor.audioFreq),this.step=Math.floor(1073741824*i))},this.computeVolume=function(){var e;this.digidrum&&(e=this.drumPos>>YmConst_DRUM_PREC,this.vol=this.drum.data[e]/16,this.mixNoise=65535,this.mixTone=65535,this.drumPos+=this.drumStep,(e=this.drumPos>>YmConst_DRUM_PREC)>=this.drum.size&&(this.digidrum=!1))},this.drumStart=function(e){this.digidrum=!0,this.drumPos=0,this.drumStep=(this.drumFreq<<15)/this.processor.audioFreq},this.drumStop=function(){this.digidrum=!1}}function Digidrum(e){this.data,this.repeatLen,this.size,this.wave=null,this.size=e,this.wave=new dataType,this.convert=function(e){var t,i;if(this.data=new Array,e&YmConst_DRUM_4BITS)for(i=0;i<this.size;++i)t=(15&this.wave.readByte())>>7,this.data[i]=YmConst_MONO[t];else for(i=0;i<this.size;++i)this.data[i]=this.wave.readByte();this.wave=null}}function dataType(){this.data,this.pos=0,this.endian="BIG",this.readBytes=function(e,t){for(var i="",a=0;a<t;a++)i+=this.data[e+this.pos++];return i},this.readMultiByte=function(e,t){if("txt"==t){for(var i="",a=0;a<e;a++)i+=this.data[this.pos++];return i}},this.readInt=function(){var e=parseInt(this.data[this.pos+0].charCodeAt(0).toString(16),16),t=parseInt(this.data[this.pos+1].charCodeAt(0).toString(16),16),i=parseInt(this.data[this.pos+2].charCodeAt(0).toString(16),16),a=parseInt(this.data[this.pos+3].charCodeAt(0).toString(16),16);if("BIG"==this.endian)var r=e<<24|t<<16|i<<8|a;else var r=a<<24|i<<16|t<<8|e;return this.pos+=4,r},this.readShort=function(){var e=parseInt(this.data[this.pos+0].charCodeAt(0).toString(16),16),t=parseInt(this.data[this.pos+1].charCodeAt(0).toString(16),16),i=e<<8|t;return this.pos+=2,i},this.readByte=function(){var e=parseInt(this.data[this.pos].charCodeAt(0).toString(16),16);return this.pos+=1,e},this.readString=function(){for(var e="";;){if(0==this.data[this.pos++].charCodeAt(0))return e;e+=this.data[this.pos-1]}},this.substr=function(e,t){return this.data.substr(e,t)},this.bytesAvailable=function(){return this.length-this.pos}}function LHa(){this.data,this.source,this.buffer,this.output,this.srcSize,this.dstSize,this.srcPos,this.dstPos,this.c_Table,this.p_Table,this.c_Len,this.p_Len,this.l_Tree,this.r_Tree,this.bitBuffer,this.bitCount,this.subBuffer,this.blockSize,this.fillBufferSize,this.fillIndex,this.decodei,this.decodej,this.data="",this.buffer=new Array,this.output=new Array,this.c_Table=new Array,this.p_Table=new Array,this.c_Len=new Array,this.p_Len=new Array,this.l_Tree=new Array,this.r_Tree=new Array,this.unpack=function(e){if(this.header=new LHaHeader(e),0==this.header.size||"-lh5-"!=this.header.method||0!=this.header.level)return e.data;this.source=e,this.srcSize=this.header.packed,this.srcPos=this.source.pos,this.dstSize=this.header.original,this.fillBufferSize=0,this.bitBuffer=0,this.bitCount=0,this.subBuffer=0,this.fillBuffer(16),this.blockSize=0,this.decodej=0;for(var t,i,a=this.dstSize;0!=a;){if(t=a>8192?8192:a,this.decode(t),(i=t>this.dstSize?this.dstSize:t)>0){this.output.pos=0;for(var r=0;r<i;r++)this.data+=String.fromCharCode(this.output[r]);this.dstPos+=i,this.dstSize-=i}a-=t}return this.buffer="",this.output=new Array,this.data},this.decode=function(e){for(var t,i=0;--this.decodej>=0;)if(this.output[i]=this.output[this.decodei],this.decodei=8191&++this.decodei,++i==e)return;for(;;)if((t=this.decode_c())<=255){if(this.output[i]=t,++i==e)return}else for(this.decodej=t-253,this.decodei=i-this.decode_p()-1&8191;--this.decodej>=0;)if(this.output[i]=this.output[this.decodei],this.decodei=8191&++this.decodei,++i==e)return},this.decode_c=function(){var e,t=0;if(0==this.blockSize&&(this.blockSize=this.getBits(16),this.read_p(19,5,3),this.read_c(),this.read_p(14,4,-1)),this.blockSize--,(e=this.c_Table[this.bitBuffer>>4])>=510){t=8;do{e=this.bitBuffer&t?this.r_Tree[e]:this.l_Tree[e],t>>=1}while(e>=510)}return this.fillBuffer(this.c_Len[e]),65535&e},this.decode_p=function(){var e=this.p_Table[this.bitBuffer>>8],t=0;if(e>=14){t=128;do{e=this.bitBuffer&t?this.r_Tree[e]:this.l_Tree[e],t>>=1}while(e>=14)}return this.fillBuffer(this.p_Len[e]),0!=e&&(e=(1<<e-1)+this.getBits(e-1)),65535&e},this.read_c=function(){var e,t=0,i=0,a=this.getBits(9);if(0==a){for(e=this.getBits(9),t=0;t<510;++t)this.c_Len[t]=0;for(t=0;t<4096;++t)this.c_Table[t]=e}else{for(;t<a;){if((e=this.p_Table[this.bitBuffer>>8])>=19){i=128;do{e=this.bitBuffer&i?this.r_Tree[e]:this.l_Tree[e],i>>=1}while(e>=19)}if(this.fillBuffer(this.p_Len[e]),e<=2)for(e=0==e?1:1==e?this.getBits(4)+3:this.getBits(9)+20;--e>=0;)this.c_Len[t++]=0;else this.c_Len[t++]=e-2}for(;t<510;)this.c_Len[t++]=0;this.makeTable(510,this.c_Len,12,this.c_Table)}},this.read_p=function(e,t,i){var a,r=0,s=0,o=this.getBits(t);if(0==o){for(a=this.getBits(t),r=0;r<e;++r)this.p_Len[r]=0;for(r=0;r<256;++r)this.p_Table[r]=a}else{for(;r<o;){if(7==(a=this.bitBuffer>>13))for(s=4096;s&this.bitBuffer;)s>>=1,a++;if(this.fillBuffer(a<7?3:a-3),this.p_Len[r++]=a,r==i)for(a=this.getBits(2);--a>=0;)this.p_Len[r++]=0}for(;r<e;)this.p_Len[r++]=0;this.makeTable(e,this.p_Len,8,this.p_Table)}},this.getBits=function(e){var t=this.bitBuffer>>16-e;return this.fillBuffer(e),65535&t},this.fillBuffer=function(e){var t;for(this.bitBuffer=this.bitBuffer<<e&65535;e>this.bitCount;)this.bitBuffer|=this.subBuffer<<(e-=this.bitCount),this.bitBuffer&=65535,0==this.fillBufferSize&&(this.fillIndex=0,t=this.srcSize>4064?4064:this.srcSize,t>0&&(this.source.pos=this.srcPos,this.buffer=this.source.readBytes(0,t),this.srcPos+=t,this.srcSize-=t),this.fillBufferSize=t),this.fillBufferSize>0?(this.fillBufferSize--,this.subBuffer=this.buffer[this.fillIndex++].charCodeAt(0)):this.subBuffer=0,this.bitCount=8;this.bitBuffer|=this.subBuffer>>(this.bitCount-=e),this.bitBuffer&=65535},this.makeTable=function(e,t,i,a){var r,s,o,l,n,h,p,u,d,v=e,b=new Array,c=new Array,m=new Array,f=1<<15-i;for(s=0;s<e;++s)b[s]=0;for(s=0;s<e;++s)b[t[s]]++;for(m[1]=0,s=1;s<17;++s)m[s+1]=m[s]+(b[s]<<16-s)&65535;if(0!=m[17])return!1;for(o=16-i,s=1;s<=i;++s)m[s]>>=o,c[s]=1<<i-s;for(;s<17;)c[s]=1<<16-s++;if(0!=(s=m[i+1]>>o))for(l=1<<i;s!=l;)a[s++]=0;for(r=0;r<e;++r)if(0!=(n=t[r])){if(h=m[n]+c[n],n<=i)for(s=m[n];s<h;++s)a[s]=r;else{for(s=n-i,l=m[n],p=l>>o,u=a;0!=s;)0==u[p]&&(this.l_Tree[v]=0,this.r_Tree[v]=0,u[p]=v++),d=l&f?this.r_Tree:this.l_Tree,l<<=1,s--;d[u[p]]=r}m[n]=h}return!0}}function LHaHeader(e){this.size,this.checksum,this.method,this.packed,this.original,this.timeStamp,this.attribute,this.level,this.nameLength,this.name,e.endian="LITTLE",e.pos=0,this.size=e.readByte(),this.checksum=e.readByte(),this.method=e.readMultiByte(5,"txt"),this.packed=e.readInt(),this.original=e.readInt(),this.timeStamp=e.readInt(),this.attribute=e.readByte(),this.level=e.readByte(),this.nameLength=e.readByte(),this.name=e.readMultiByte(this.nameLength,"txt"),e.readShort()}var CODEF_AUDIO_CONTEXT=null,CODEF_AUDIO_NODE=null,YmConst_BUFFER_SIZE=8192,YmConst_PLAYER_FREQ=48e3,YmConst_DRUM_PREC=15,YmConst_AMSTRAD_FREQ=1e6,YmConst_ATARI_FREQ=2e6,YmConst_SPECTRUM_FREQ=1773400,YmConst_INTERLEAVED=1,YmConst_DRUM_SIGNED=2,YmConst_DRUM_4BITS=4,YmConst_TIME_CONTROL=8,YmConst_LOOP_MODE=16,YmConst_MFP_PREDIV=[0,4,10,16,50,64,100,200],YmConst_MONO=[.00063071586250394,.00163782667521185,.00269580167037975,.00383515935748365,.00590024516535946,.00787377544480728,.01174962614825892,.01602221747489853,.02299061047191789,.03141371908729311,.04648986276843572,.06340728985463016,.09491256447035126,.13414919481999166,.21586759036022013,.3333333333333333],YmConst_STEREO=[.00094607379375591,.00245674001281777,.00404370250556963,.00575273903622547,.00885036774803918,.01181066316721091,.01762443922238838,.02403332621234779,.03448591570787683,.04712057863093966,.06973479415265357,.09511093478194525,.1423688467055269,.20122379222998749,.3238013855403302,.5],YmConst_ENVELOPES=[15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];!function(){"use strict";function e(e,t){var i=Object.create(null,{endian:{value:1,writable:!0},length:{value:0,writable:!0},index:{value:0,writable:!0},buffer:{value:null,writable:!0},view:{value:null,writable:!0},bytesAvailable:{get:function(){return this.length-this.index}},position:{get:function(){return this.index},set:function(e){e<0?e=0:e>this.length&&(e=this.length),this.index=e}},clear:{value:function(){this.buffer=new ArrayBuffer,this.view=null,this.index=this.length=0}},readAt:{value:function(e){return this.view.getUint8(e)}},readByte:{value:function(){return this.view.getInt8(this.index++)}},readShort:{value:function(){var e=this.view.getInt16(this.index,this.endian);return this.index+=2,e}},readInt:{value:function(){var e=this.view.getInt32(this.index,this.endian);return this.index+=4,e}},readUbyte:{value:function(){return this.view.getUint8(this.index++)}},readUshort:{value:function(){var e=this.view.getUint16(this.index,this.endian);return this.index+=2,e}},readUint:{value:function(){var e=this.view.getUint32(this.index,this.endian);return this.index+=4,e}},readBytes:{value:function(e,t,i){var a=e.view,r=this.index,s=this.view;for((i+=r)>this.length&&(i=this.length);r<i;++r)a.setUint8(t++,s.getUint8(r));this.index=r}},readString:{value:function(e){var t=this.index,i=this.view,a="";for((e+=t)>this.length&&(e=this.length);t<e;++t)a+=String.fromCharCode(i.getUint8(t));return this.index=e,a}},writeAt:{value:function(e,t){this.view.setUint8(e,t)}},writeByte:{value:function(e){this.view.setInt8(this.index++,e)}},writeShort:{value:function(e){this.view.setInt16(this.index,e),this.index+=2}},writeInt:{value:function(e){this.view.setInt32(this.index,e),this.index+=4}}});return i.buffer=e,i.view=new DataView(e),i.length=e.byteLength,Object.seal(i)}function t(){return Object.create(null,{l:{value:0,writable:!0},r:{value:0,writable:!0},next:{value:null,writable:!0}})}function i(){return Object.create(null,{player:{value:null,writable:!0},channels:{value:[],writable:!0},buffer:{value:[],writable:!0},samplesTick:{value:0,writable:!0},samplesLeft:{value:0,writable:!0},remains:{value:0,writable:!0},completed:{value:0,writable:!0},bufferSize:{get:function(){return this.buffer.length},set:function(e){var i,a=this.buffer.length||0;if(!(e==a||e<512)&&(this.buffer.length=e,e>a))for(this.buffer[a]=t(),i=++a;i<e;++i)this.buffer[i]=this.buffer[i-1].next=t()}},complete:{get:function(){return this.completed},set:function(e){this.completed=e^this.player.loopSong}},reset:{value:function(){var e=this.channels[0],t=this.buffer[0];for(this.samplesLeft=0,this.remains=0,this.completed=0;e;)e.initialize(),e=e.next;for(;t;)t.l=t.r=0,t=t.next}},restore:{configurable:!0,value:function(){}}})}function a(){var t=Object.create(null,{context:{value:null,writable:!0},node:{value:null,writable:!0},analyse:{value:0,writable:!0},endian:{value:0,writable:!0},sampleRate:{value:0,writable:!0},playSong:{value:0,writable:!0},lastSong:{value:0,writable:!0},version:{value:0,writable:!0},title:{value:"",writable:!0},channels:{value:0,writable:!0},loopSong:{value:1,writable:!0},speed:{value:0,writable:!0},tempo:{value:0,writable:!0},mixer:{value:null,writable:!0},tick:{value:0,writable:!0},paused:{value:0,writable:!0},callback:{value:null,writable:!0},quality:{configurable:!0,set:function(e){this.callback=e?this.mixer.accurate.bind(this.mixer):this.mixer.fast.bind(this.mixer)}},toggle:{value:function(e){this.mixer.channels[e].mute^=1}},setup:{configurable:!0,value:function(){}},load:{value:function(t){if(this.version=0,this.playSong=0,this.lastSong=0,this.mixer.restore(),t.view||(t=e(t)),t.position=0,67324752==t.readUint()){if(!window.neoart.Unzip)throw"Unzip support is not available.";var i=r(t);t=i.uncompress(i.entries[0])}return t.endian=this.endian,t.position=0,this.loader(t),this.version&&this.setup(),this.version}},play:{value:function(){var e,t;this.version&&(this.paused?this.paused=0:(this.initialize(),this.node=this.context.createScriptProcessor(this.mixer.bufferSize),this.node.onaudioprocess=this.callback),this.analyse&&window.neoart.Flectrum?(t=window.neoart.analyserNode=this.context.createAnalyser(),this.node.connect(t),t.connect(this.context.destination)):this.node.connect(this.context.destination),e=document.createEvent("Event"),e.initEvent("flodPlay",!0,!1),document.dispatchEvent(e))}},pause:{value:function(){if(this.node){this.node.disconnect(),this.paused=1;var e=document.createEvent("Event");e.initEvent("flodPause",!0,!1),document.dispatchEvent(e)}}},stop:{value:function(){if(this.node){this.node.disconnect(),this.node.onaudioprocess=this.node=null,this.paused=0,this.restore&&this.restore();var e=document.createEvent("Event");e.initEvent("flodStop",!0,!1),document.dispatchEvent(e)}}},reset:{value:function(){this.tick=0,this.mixer.initialize(),this.mixer.samplesTick=2.5*this.sampleRate/this.tempo>>0}}});return window.neoart.audioContext||(window.neoart.audioContext=new AudioContext),t.context=window.neoart.audioContext,t.sampleRate=t.context.sampleRate,t}function r(t){function i(e){var t=Object.create(null,{count:{value:null,writable:!0},symbol:{value:null,writable:!0}});return t.count=new Uint16Array(e),t.symbol=new Uint16Array(e),Object.seal(t)}function a(){var t=Object.create(null,{output:{value:null,writable:!0},inpbuf:{value:null,writable:!0},inpcnt:{value:0,writable:!0},outcnt:{value:0,writable:!0},bitbuf:{value:0,writable:!0},bitcnt:{value:0,writable:!0},flencode:{value:null,writable:!0},fdiscode:{value:null,writable:!0},dlencode:{value:null,writable:!0},ddiscode:{value:null,writable:!0},input:{set:function(t){this.inpbuf=t[0],this.inpbuf.endian=t[2],this.inpbuf.position=0,this.inpcnt=0,this.output=e(new ArrayBuffer(t[1])),this.output.endian=t[2],this.output.position=0,this.outcnt=0}},inflate:{value:function(){var e,t;do{if(e=this.bits(1),t=this.bits(2),0==t?this.stored():1==t?this.codes(this.flencode,this.fdiscode):2==t?this.dynamic():1)throw o}while(!e)}},initialize:{value:function(){var e=new Uint8Array(288),t=0;for(this.flencode=i(288),this.fdiscode=i(30);t<144;++t)e[t]=8;for(;t<256;++t)e[t]=9;for(;t<280;++t)e[t]=7;for(;t<288;++t)e[t]=8;for(this.construct(this.fdiscode,e,288),t=0;t<30;++t)e[t]=5;this.construct(this.fdiscode,e,30),this.dlencode=i(286),this.ddiscode=i(30)}},construct:{value:function(e,t,i){for(var a=0,r=1,s=new Uint16Array(16),o=0;a<16;++a)e.count[a]=0;for(;o<i;++o)e.count[t[o]]++;if(e.count[0]==i)return 0;for(a=1;a<16;++a)if(r<<=1,(r-=e.count[a])<0)return r;for(a=1;a<15;++a)s[a+1]=s[a]+e.count[a];for(o=0;o<i;++o)0!=t[o]&&(e.symbol[s[t[o]]++]=o);return r}},bits:{value:function(e){for(var t=this.bitbuf,i=this.inpbuf.length;this.bitcnt<e;){if(this.inpcnt==i)throw l;t|=this.inpbuf.readAt(this.inpcnt++)<<this.bitcnt,this.bitcnt+=8}return this.bitbuf=t>>e,this.bitcnt-=e,t&(1<<e)-1}},codes:{value:function(e,t){var i,a,r,s;do{if((s=this.decode(e))<0)return s;if(s<256)this.output.writeAt(this.outcnt++,s);else if(s>256){if((s-=257)>=29)throw ERRRO7;if(a=m[s]+this.bits(f[s]),(s=this.decode(t))<0)return s;if((i=w[s]+this.bits(g[s]))>this.outcnt)throw n;for(r=this.outcnt-i;a--;)this.output.writeAt(this.outcnt++,this.output.readAt(r++))}}while(256!=s);return 0}},decode:{value:function(e){for(var t,i=this.bitbuf,a=0,r=0,s=0,o=this.inpbuf.length,n=this.bitcnt,h=1;;){for(;n--;){if(a|=1&i,i>>=1,t=e.count[h],a<r+t)return this.bitbuf=i,this.bitcnt=this.bitcnt-h&7,e.symbol[s+(a-r)];s+=t,r+=t,r<<=1,a<<=1,++h}if(!(n=16-h))break;if(this.inpcnt==o)throw l;i=this.inpbuf.readAt(this.inpcnt++),n>8&&(n=8)}return-9}},stored:{value:function(){var e,t=this.inpbuf.length;if(this.bitbuf=this.bitcnt=0,this.inpcnt+4>t)throw l;if(e=this.inpbuf.readAt(this.inpcnt++),e|=this.inpbuf.readAt(this.inpcnt++)<<8,this.inpbuf.readAt(this.inpcnt++)!=(255&~e)||this.inpbuf.readAt(this.inpcnt++)!=(~e>>8&255))throw h;if(this.inpcnt+e>t)throw l;for(;e--;)this.output.writeAt(this.outcnt++,this.inpbuf.readAt(this.inpcnt++));return 0}},dynamic:{value:function(){var e,t,i,a=new Uint8Array(316),r=0,s=this.bits(5)+257,o=this.bits(5)+1,l=this.bits(4)+4,n=s+o;if(s>286||o>30)throw p;for(;r<l;++r)a[P[r]]=this.bits(3);for(;r<19;++r)a[P[r]]=0;if(e=this.construct(this.dlencode,a,19))throw u;for(r=0;r<n;)if((i=this.decode(this.dlencode))<16)a[r++]=i;else{if(t=0,16==i){if(0==r)throw d;t=a[r-1],i=3+this.bits(2)}else i=17==i?3+this.bits(3):11+this.bits(7);if(r+i>n)throw v;for(;i--;)a[r++]=t}if((e=this.construct(this.dlencode,a,s))<0||e>0&&s-this.dlencode.count[0]!=1)throw b;if((e=this.construct(this.ddiscode,a.subarray(s),o))<0||e>0&&o-this.ddiscode.count[0]!=1)throw c;return this.codes(this.dlencode,this.ddiscode)}}});return t.initialize(),Object.seal(t)}function r(){return Object.create(null,{name:{value:"",writable:!0},extra:{value:null,writable:!0},version:{value:0,writable:!0},flag:{value:0,writable:!0},method:{value:0,writable:!0},time:{value:0,writable:!0},crc:{value:0,writable:!0},compressed:{value:0,writable:!0},size:{value:0,writable:!0},offset:{value:0,writable:!0},date:{get:function(){return new Date(1980+(this.time>>25&127),(this.time>>21&15)-1,this.time>>16&31,this.time>>11&31,this.time>>5&63,(31&this.time)<<1)}},isDirectory:{get:function(){return"/"==this.name.charAt(this.name.length-1)}}})}if(!t)return null;var s="Unexpected end of archive.",o="Invalid block type.",l="Available inflate data did not terminate.",n="Distance is too far back.",h="Stored block length did not match one's complement.",p="Too many length or distance codes.",u="Code lengths codes incomplete.",d="Repeat lengths with no first length.",v="Repeat more than specified lengths.",b="Invalid literal/length code lengths.",c="Invalid distance code lengths.",m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],f=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],g=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],y=Object.create(null,{endian:{value:1,writable:!0},entries:{value:null,writable:!0},stream:{value:null,writable:!0},uncompress:{value:function(t){var i,r,s,o,l,n,h=this.stream,p=!1;if(!t)return null;if("string"==typeof t){for(l=this.entries.length,r=0;r<l;++r)if(o=this.entries[r],o.name==t){t=o,p=!0;break}if(!p)return null}if(h.position=t.offset+28,n=h.readUshort(),h.position+=t.name.length+n,t.compressed)switch(i=e(new ArrayBuffer(t.compressed),this.endian),h.readBytes(i,0,t.compressed),t.method){case 0:return i;case 8:return s=a(),s.input=[i,t.size,this.endian],s.inflate(),s.output;default:throw"Compression method not supported."}}},parseCentral:{value:function(){var t,i,a,o=this.stream,l=e(new ArrayBuffer(46),this.endian),n=this.entries.length;for(i=0;i<n;++i){if(o.readBytes(l,0,46),l.position=0,33639248!=l.readUint())throw s;if(l.position+=24,!(a=l.readUshort()))throw s;if(t=r(),t.name=o.readString(a),a=l.readUshort(),a&&(t.extra=e(new ArrayBuffer(a),this.endian),o.readBytes(t.extra,0,a)),o.position+=l.readUshort(),l.position=6,t.version=l.readUshort(),t.flag=l.readUshort(),1==(1&t.flag))throw"Encrypted archive not supported.";t.method=l.readUshort(),t.time=l.readUint(),t.crc=l.readUint(),t.compressed=l.readUint(),t.size=l.readUint(),l.position=42,t.offset=l.readUint(),Object.freeze(t),this.entries[i]=t}}},parseEnd:{value:function(){var e=this.stream,t=e.length-22,i=t-65536;i<0&&(i=0);do{if(80==e.readAt(t)&&(e.position=t,101010256==e.readUint()))break}while(--t>i);if(t==i)throw"The archive is either in unknown format or damaged.";e.position=t+10,this.entries=[],this.entries.length=e.readUshort(),e.position=t+16,e.position=e.readUint(),this.parseCentral()}}});return t.view||(t=e(t)),t.endian=1,t.position=0,y.stream=t,y.parseEnd(),Object.seal(y)}function s(e){var t=Object.create(null,{
next:{value:null,writable:!0},mute:{value:0,writable:!0},panning:{value:0,writable:!0},delay:{value:0,writable:!0},pointer:{value:0,writable:!0},length:{value:0,writable:!0},audena:{value:0,writable:!0},audcnt:{value:0,writable:!0},audloc:{value:0,writable:!0},audper:{value:0,writable:!0},audvol:{value:0,writable:!0},timer:{value:0,writable:!0},level:{value:0,writable:!0},ldata:{value:0,writable:!0},rdata:{value:0,writable:!0},enabled:{get:function(){return this.audena},set:function(e){e!=this.audena&&(this.audena=e,this.audloc=this.pointer,this.audcnt=this.pointer+this.length,this.timer=1,e&&(this.delay+=2))}},period:{set:function(e){e<0?e=0:e>65535&&(e=65535),this.audper=e}},volume:{set:function(e){e<0?e=0:e>64&&(e=64),this.audvol=e}},resetData:{value:function(){this.ldata=0,this.rdata=0}},initialize:{value:function(){this.audena=0,this.audcnt=0,this.audloc=0,this.audper=50,this.audvol=0,this.timer=0,this.ldata=0,this.rdata=0,this.delay=0,this.pointer=0,this.length=0}}});return t.panning=t.level=0==(2&++e)?-1:1,Object.seal(t)}function o(){return Object.create(null,{active:{value:0,writable:!0},forced:{value:-1,writable:!0},l0:{value:0,writable:!0},l1:{value:0,writable:!0},l2:{value:0,writable:!0},l3:{value:0,writable:!0},l4:{value:0,writable:!0},r0:{value:0,writable:!0},r1:{value:0,writable:!0},r2:{value:0,writable:!0},r3:{value:0,writable:!0},r4:{value:0,writable:!0},initialize:{value:function(){this.l0=this.l1=this.l2=this.l3=this.l4=0,this.r0=this.r1=this.r2=this.r3=this.r4=0}},process:{value:function(e,t){var i=.52133458435322,a=.4860348337215757,r=.9314955486749749,s=1-a;0==e&&(this.l0=a*t.l+s*this.l0,this.r0=a*t.r+s*this.r0,s=1-r,t.l=this.l1=r*this.l0+s*this.l1,t.r=this.r1=r*this.r0+s*this.r1),(this.active|this.forced)>0&&(s=1-i,this.l2=i*t.l+s*this.l2,this.r2=i*t.r+s*this.r2,this.l3=i*this.l2+s*this.l3,this.r3=i*this.r2+s*this.r3,t.l=this.l4=i*this.l3+s*this.l4,t.r=this.r4=i*this.r3+s*this.r4),t.l>1?t.l=1:t.l<-1&&(t.l=-1),t.r>1?t.r=1:t.r<-1&&(t.r=-1)}}})}function l(){return Object.create(null,{note:{value:0,writable:!0},sample:{value:0,writable:!0},effect:{value:0,writable:!0},param:{value:0,writable:!0}})}function n(){return Object.create(null,{name:{value:"",writable:!0},length:{value:0,writable:!0},loop:{value:0,writable:!0},repeat:{value:0,writable:!0},volume:{value:0,writable:!0},pointer:{value:0,writable:!0},loopPtr:{value:0,writable:!0}})}function h(){return Object.create(null,{pattern:{value:0,writable:!0},transpose:{value:0,writable:!0}})}function p(){var e=i();return Object.defineProperties(e,{filter:{value:null,writable:!0},model:{value:1,writable:!0},memory:{value:[],writable:!0},loopPtr:{value:0,writable:!0},loopLen:{value:4,writable:!0},clock:{value:0,writable:!0},master:{value:0,writable:!0},ready:{value:0,writable:!0},volume:{set:function(e){e>0?(e>64&&(e=64),this.master=e/64*.00390625):this.master=0}},initialize:{value:function(){var e=this.memory.length,t=e+this.loopLen;if(this.reset(),this.filter.initialize(),!this.ready)for(this.ready=1,this.loopPtr=e;e<t;++e)this.memory[e]=0}},restore:{value:function(){this.ready=0,this.memory.length=0}},store:{value:function(e,t,i){var a,r,s,o=e.position,l=this.memory.length;for(i&&(e.position=i),s=e.position+t,s>=e.length&&(a=s-e.length,t=e.length-e.position),r=l,t+=l;r<t;++r)this.memory[r]=e.readByte();for(t+=a;r<t;++r)this.memory[r]=0;return i&&(e.position=o),l}},fast:{value:function(e){var t,i,a,r,s,o,r,l,n,h,p,u,d=this.memory,v=0,b=0,c=this.bufferSize;if(this.completed){if(!this.remains)return void this.player.stop();c=this.remains}for(;v<c;){for(this.samplesLeft||(this.player.process(),this.samplesLeft=this.samplesTick,this.completed&&(c=v+this.samplesTick)>this.bufferSize&&(this.remains=c-this.bufferSize,c=this.bufferSize)),p=this.samplesLeft,v+p>=c&&(p=c-v),o=b+p,t=this.channels[0];t;){if(n=this.buffer[b],t.audena&&t.audper>60)for(h=t.audper/this.clock,u=t.audvol*this.master,s=u*(1-t.level),l=u*(1+t.level),i=b;i<o;++i)t.delay?t.delay--:--t.timer<1&&(t.mute||(u=.0078125*d[t.audloc],t.ldata=u*s,t.rdata=u*l),t.audloc++,t.timer+=h,t.audloc>=t.audcnt&&(t.audloc=t.pointer,t.audcnt=t.pointer+t.length)),n.l+=t.ldata,n.r+=t.rdata,n=n.next;else for(i=b;i<o;++i)n.l+=t.ldata,n.r+=t.rdata,n=n.next;t=t.next}b=o,v+=p,this.samplesLeft-=p}for(u=this.model,d=this.filter,n=this.buffer[0],a=e.outputBuffer.getChannelData(0),r=e.outputBuffer.getChannelData(1),i=0;i<c;++i)d.process(u,n),a[i]=n.l,r[i]=n.r,n.l=n.r=0,n=n.next}}}),e.channels[0]=s(0),e.channels[0].next=e.channels[1]=s(1),e.channels[1].next=e.channels[2]=s(2),e.channels[2].next=e.channels[3]=s(3),e.bufferSize=8192,e.filter=o(),e.master=.00390625,Object.seal(e)}function u(e){var t=a();return Object.defineProperties(t,{quality:{set:function(e){this.callback=this.mixer.fast.bind(this.mixer)}},stereo:{set:function(e){var t=this.mixer.channels[0];for(e<0?e=0:e>1&&(e=1);t;)t.level=e*t.panning,t=t.next}},volume:{set:function(e){e<0?e=0:e>1&&(e=1),this.mixer.master=.00390625*e}},frequency:{value:function(e){e?(this.mixer.clock=3579545/this.sampleRate,this.mixer.samplesTick=735):(this.mixer.clock=3546895/this.sampleRate,this.mixer.samplesTick=882)}}}),t.mixer=e||p(),t.mixer.player=t,t.frequency(0),t.channels=4,t.endian=0,t.quality=0,t.speed=6,t.tempo=125,t}function d(){return Object.create(null,{next:{value:null,writable:!0},mute:{value:0,writable:!0},enabled:{value:0,writable:!0},sample:{value:null,writable:!0},length:{value:0,writable:!0},index:{value:0,writable:!0},pointer:{value:0,writable:!0},delta:{value:0,writable:!0},fraction:{value:0,writable:!0},speed:{value:0,writable:!0},dir:{value:0,writable:!0},oldSample:{value:null,writable:!0},oldLength:{value:0,writable:!0},oldPointer:{value:0,writable:!0},oldFraction:{value:0,writable:!0},oldSpeed:{value:0,writable:!0},oldDir:{value:0,writable:!0},volume:{value:0,writable:!0},lvol:{value:0,writable:!0},rvol:{value:0,writable:!0},panning:{value:128,writable:!0},lpan:{value:.5,writable:!0},rpan:{value:.5,writable:!0},ldata:{value:0,writable:!0},rdata:{value:0,writable:!0},mixCounter:{value:0,writable:!0},lmixRampU:{value:0,writable:!0},lmixDeltaU:{value:0,writable:!0},rmixRampU:{value:0,writable:!0},rmixDeltaU:{value:0,writable:!0},lmixRampD:{value:0,writable:!0},lmixDeltaD:{value:0,writable:!0},rmixRampD:{value:0,writable:!0},rmixDeltaD:{value:0,writable:!0},volCounter:{value:0,writable:!0},lvolDelta:{value:0,writable:!0},rvolDelta:{value:0,writable:!0},panCounter:{value:0,writable:!0},lpanDelta:{value:0,writable:!0},rpanDelta:{value:0,writable:!0},initialize:{value:function(){this.enabled=0,this.sample=null,this.length=0,this.index=0,this.pointer=0,this.delta=0,this.fraction=0,this.speed=0,this.dir=0,this.oldSample=null,this.oldLength=0,this.oldPointer=0,this.oldFraction=0,this.oldSpeed=0,this.oldDir=0,this.volume=0,this.lvol=0,this.rvol=0,this.panning=128,this.lpan=.5,this.rpan=.5,this.ldata=0,this.rdata=0,this.mixCounter=0,this.lmixRampU=0,this.lmixDeltaU=0,this.rmixRampU=0,this.rmixDeltaU=0,this.lmixRampD=0,this.lmixDeltaD=0,this.rmixRampD=0,this.rmixDeltaD=0,this.volCounter=0,this.lvolDelta=0,this.rvolDelta=0,this.panCounter=0,this.lpanDelta=0,this.rpanDelta=0}}})}function v(){return Object.create(null,{name:{value:"",writable:!0},bits:{value:8,writable:!0},volume:{value:0,writable:!0},length:{value:0,writable:!0},data:{value:[],writable:!0},loopMode:{value:0,writable:!0},loopStart:{value:0,writable:!0},loopLen:{value:0,writable:!0},store:{value:function(e){var t,i,a,r,s,o=0,l=this.length;if(this.loopLen||(this.loopMode=0),i=e.position,this.loopMode?(l=this.loopStart+this.loopLen,this.data=new Float32Array(l+1)):this.data=new Float32Array(this.length+1),8==this.bits)for(r=i+l,r>e.length&&(l=e.length-i),t=0;t<l;t++)s=e.readByte()+o,s<-128?s+=256:s>127&&(s-=256),this.data[t]=.0078125*s,o=s;else for(r=i+(l<<1),r>e.length&&(l=e.length-i>>1),t=0;t<l;t++)s=e.readShort()+o,s<-32768?s+=65536:s>32767&&(s-=65536),this.data[t]=3051758e-11*s,o=s;if(r=i+length,this.loopMode?(this.length=this.loopStart+this.loopLen,1==this.loopMode?this.data[l]=this.data[this.loopStart]:this.data[l]=this.data[l-1]):this.data[this.length]=0,l!=this.length)for(a=this.data[l-1],t=l;t<this.length;t++)this.data[t]=a;r<e.length?e.position=r:e.position=e.length-1}}})}function b(){var e=i();return Object.defineProperties(e,{setup:{value:function(e){var t=1;for(this.channels.length=e,this.channels[0]=d();t<e;++t)this.channels[t]=this.channels[t-1].next=d()}},initialize:{value:function(){this.reset()}},fast:{value:function(e){var t,i,a,r,s,o,l,n,h,p,u=0,d=0,v=this.bufferSize;if(this.completed){if(!this.remains)return void this.player.stop();v=this.remains}for(;u<v;){for(this.samplesLeft||(this.player.process(),this.player.fast(),this.samplesLeft=this.samplesTick,this.completed&&(v=u+this.samplesTick)>this.bufferSize&&(this.remains=v-this.bufferSize,v=this.bufferSize)),h=this.samplesLeft,u+h>=v&&(h=v-u),s=d+h,t=this.channels[0];t;)if(t.enabled){for(l=t.sample,i=l.data,n=this.buffer[d],r=d;r<s;++r){if(t.index!=t.pointer){if(t.index>=t.length){if(!l.loopMode){t.enabled=0;break}t.pointer=l.loopStart+(t.index-t.length),t.length=l.length,2==l.loopMode&&(t.dir?t.dir=0:t.dir=l.length+l.loopStart-1)}else t.pointer=t.index;t.mute?(t.ldata=0,t.rdata=0):(p=t.dir?i[t.dir-t.pointer]:i[t.pointer],t.ldata=p*t.lvol,t.rdata=p*t.rvol)}t.index=t.pointer+t.delta,(t.fraction+=t.speed)>=1&&(t.index++,t.fraction--),n.l+=t.ldata,n.r+=t.rdata,n=n.next}t=t.next}else t=t.next;d=s,u+=h,this.samplesLeft-=h}for(n=this.buffer[0],a=e.outputBuffer.getChannelData(0),o=e.outputBuffer.getChannelData(1),r=0;r<v;++r)n.l>1?n.l=1:n.l<-1&&(n.l=-1),n.r>1?n.r=1:n.r<-1&&(n.r=-1),a[r]=n.l,o[r]=n.r,n.l=n.r=0,n=n.next}},accurate:{value:function(e){var t,i,a,r,s,o,l,n,h,p,u,d,v,b,c=0,m=0,f=this.bufferSize;if(this.completed){if(!this.remains)return void this.player.stop();f=this.remains}for(;c<f;){for(this.samplesLeft||(this.player.process(),this.player.accurate(),this.samplesLeft=this.samplesTick,this.completed&&(f=c+this.samplesTick)>this.bufferSize&&(this.remains=f-this.bufferSize,f=this.bufferSize)),v=this.samplesLeft,c+v>=f&&(v=f-c),l=m+v,t=this.channels[0];t;)if(t.enabled){for(p=t.sample,i=p.data,u=t.oldSample,u&&(a=u.data),d=this.buffer[m],o=m;o<l;++o){if(b=t.mute?0:i[t.pointer],b+=(i[t.pointer+t.dir]-b)*t.fraction,(t.fraction+=t.speed)>=1&&(s=t.fraction>>0,t.fraction-=s,t.dir>0?(t.pointer+=s,t.pointer>t.length&&(t.fraction+=t.pointer-t.length,t.pointer=t.length)):(t.pointer-=s,t.pointer<t.length&&(t.fraction+=t.length-t.pointer,t.pointer=t.length))),t.mixCounter?(u?(n=t.mute?0:a[t.oldPointer],n+=(a[t.oldPointer+t.oldDir]-n)*t.oldFraction,(t.oldFraction+=t.oldSpeed)>1&&(s=t.oldFraction>>0,t.oldFraction-=s,t.oldDir>0?(t.oldPointer+=s,t.oldPointer>t.oldLength&&(t.oldFraction+=t.oldPointer-t.oldLength,t.oldPointer=t.oldLength)):(t.oldPointer-=s,t.oldPointer<t.oldLength&&(t.oldFraction+=t.oldLength-t.oldPointer,t.oldPointer=t.oldLength))),d.l+=b*t.lmixRampU+n*t.lmixRampD,d.r+=b*t.rmixRampU+n*t.rmixRampD,t.lmixRampD-=t.lmixDeltaD,t.rmixRampD-=t.rmixDeltaD):(d.l+=b*t.lmixRampU,d.r+=b*t.rmixRampU),t.lmixRampU+=t.lmixDeltaU,t.rmixRampU+=t.rmixDeltaU,t.mixCounter--,t.oldPointer==t.oldLength&&(u.loopMode?1==u.loopMode?(t.oldPointer=u.loopStart,t.oldLength=u.length):t.oldDir>0?(t.oldPointer=u.length-1,t.oldLength=u.loopStart,t.oldDir=-1):(t.oldFraction-=1,t.oldPointer=u.loopStart,t.oldLength=u.length,t.oldDir=1):(u=null,t.oldPointer=0))):(d.l+=b*t.lvol,d.r+=b*t.rvol,t.volCounter?(t.lvol+=t.lvolDelta,t.rvol+=t.rvolDelta,t.volCounter--):t.panCounter&&(t.lpan+=t.lpanDelta,t.rpan+=t.rpanDelta,t.panCounter--,t.lvol=t.volume*t.lpan,t.rvol=t.volume*t.rpan)),t.pointer==t.length){if(!p.loopMode){t.enabled=0;break}1==p.loopMode?(t.pointer=p.loopStart,t.length=p.length):t.dir>0?(t.pointer=p.length-1,t.length=p.loopStart,t.dir=-1):(t.fraction-=1,t.pointer=p.loopStart,t.length=p.length,t.dir=1)}d=d.next}t=t.next}else t=t.next;m=l,c+=v,this.samplesLeft-=v}for(d=this.buffer[0],r=e.outputBuffer.getChannelData(0),h=e.outputBuffer.getChannelData(1),o=0;o<f;++o)d.l>1?d.l=1:d.l<-1&&(d.l=-1),d.r>1?d.r=1:d.r<-1&&(d.r=-1),r[o]=d.l,h[o]=d.r,d.l=d.r=0,d=d.next}}}),e.bufferSize=8192,Object.seal(e)}function c(e){var t=a();return Object.defineProperties(t,{track:{value:null,writable:!0},length:{value:0,writable:!0},restart:{value:0,writable:!0},timer:{value:0,writable:!0},master:{value:0,writable:!0},volume:{set:function(e){e<0?e=0:e>1&&(e=1),this.master=64*e}},setup:{configurable:!1,value:function(){this.mixer.setup(this.channels)}}}),t.mixer=e||b(),t.mixer.player=t,t.endian=1,t.quality=1,t}window.neoart=Object.create(null),window.neoart.Unzip=1,function(){var t=0,i=4,a=9,s=12,o=13,l=17,n=20,h=22,u=24,d=26,v=28,b=29,c=30,m=32,f=33,w=["Unknown Format","Ultimate SoundTracker","D.O.C. SoundTracker 9","Master SoundTracker","D.O.C. SoundTracker 2.0/2.2","SoundTracker 2.3","SoundTracker 2.4","NoiseTracker 1.0","NoiseTracker 1.1","NoiseTracker 2.0","ProTracker 1.0","ProTracker 1.1/2.1","ProTracker 1.2/2.0","His Master's NoiseTracker","SoundFX 1.0/1.7","SoundFX 1.8","SoundFX 1.945","SoundFX 1.994/2.0","BP SoundMon V1","BP SoundMon V2","BP SoundMon V3","Delta Music 1.0","Delta Music 2.0","Digital Mugician","Digital Mugician 7 Voices","Future Composer 1.0/1.3","Future Composer 1.4","SidMon 1.0","SidMon 2.0","David Whittaker","FredEd","Jochen Hippel","Jochen Hippel COSO","Rob Hubbard","FastTracker II","Sk@leTracker","MadTracker 2.0","MilkyTracker","DigiBooster Pro 2.18","OpenMPT"];window.neoart.FileLoader=function(){var g=Object.create(null,{player:{value:null,writable:!0},index:{value:0,writable:!0},amiga:{value:null,writable:!0},mixer:{value:null,writable:!0},tracker:{get:function(){return this.player?w[this.index+this.player.version]:w[0]}},load:{value:function(p){var w,g,P;if(p.view||(p=e(p)),p.endian=1,p.position=0,67324752==p.readUint()){if(!window.neoart.Unzip)throw"Unzip support is not available.";w=r(p),p=w.uncompress(w.entries[0])}if(!p)return null;if(this.player&&"STPlayer"!=this.player.id&&(this.player.load(p),this.player.version))return player;if(p.length>336&&(p.position=38,("FastTracker v2.00   "==(g=p.readString(20))||"FastTracker v 2.00  "==g||"Sk@le Tracker"==g||"MadTracker 2.0"==g||"MilkyTracker        "==g||"DigiBooster Pro 2.18"==g||-1!=g.indexOf("OpenMPT"))&&(this.player=window.neoart.F2Player(this.mixer),this.player.load(p),this.player.version)))return this.index=f,this.player;if(p.endian=0,p.length>2105)if(p.position=1080,"M.K."==(g=p.readString(4))||"FLT4"==g){if(this.player=window.neoart.MKPlayer(this.amiga),this.player.load(p),this.player.version)return this.index=i,this.player}else if("FEST"==g&&(this.player=window.neoart.HMPlayer(this.amiga),this.player.load(p),this.player.version))return this.index=s,this.player;return p.length>2105&&(p.position=1080,("M.K."==(g=p.readString(4))||"M!K!"==g)&&(this.player=window.neoart.PTPlayer(this.amiga),this.player.load(p),this.player.version))?(this.index=a,this.player):p.length>1685&&(p.position=60,g=p.readString(4),"SONG"!=g&&(p.position=124,g=p.readString(4)),("SONG"==g||"SO31"==g)&&(this.player=window.neoart.FXPlayer(this.amiga),this.player.load(p),this.player.version))?(this.index=o,this.player):p.length>4&&(p.position=0,"ALL "==(g=p.readString(4))&&(this.player=window.neoart.D1Player(this.amiga),this.player.load(p),this.player.version))?(this.index=n,this.player):p.length>3018&&(p.position=3014,".FNL"==(g=p.readString(4))&&(this.player=window.neoart.D2Player(this.amiga),this.player.load(p),this.player.version))?(this.index=n,this.player):p.length>30&&(p.position=26,("BPS"==(g=p.readString(3))||"V.2"==g||"V.3"==g)&&(this.player=window.neoart.BPPlayer(this.amiga),this.player.load(p),this.player.version))?(this.index=l,this.player):p.length>4&&(p.position=0,("SMOD"==(g=p.readString(4))||"FC14"==g)&&(this.player=window.neoart.FCPlayer(this.amiga),this.player.load(p),this.player.version))?(this.index=u,this.player):p.length>10&&(p.position=0," MUGICIAN"==(g=p.readString(9))&&(this.player=window.neoart.DMPlayer(this.amiga),this.player.load(p),this.player.version))?(this.index=h,this.player):p.length>86&&(p.position=58,"SIDMON II - THE MIDI VERSION"==(g=p.readString(28))&&(this.player=window.neoart.S2Player(this.amiga),this.player.load(p),this.player.version))?(this.index=d,this.player):p.length>2830&&(p.position=0,20218==(P=p.readUshort())&&(this.player=window.neoart.FEPlayer(this.amiga),this.player.load(p),this.player.version))?(this.index=b,this.player):p.length>5220&&(this.player=window.neoart.S1Player(this.amiga),this.player.load(p),this.player.version)?(this.index=d,this.player):(p.position=0,P=p.readUshort(),p.position=0,"COSO"!=(g=p.readString(4))&&24576!=P&&24578!=P&&24590!=P&&24598!=P||(this.player=window.neoart.JHPlayer(this.amiga),this.player.load(p),!this.player.version)?(p.position=0,P=p.readUshort(),this.player=window.neoart.DWPlayer(this.amiga),this.player.load(p),this.player.version?(this.index=v,this.player):(p.position=0,24576==(P=p.readUshort())&&(this.player=window.neoart.RHPlayer(this.amiga),this.player.load(p),this.player.version)?(this.index=m,this.player):p.length>1625&&(this.player=window.neoart.STPlayer(this.amiga),this.player.load(p),this.player.version)?(this.index=t,this.player):(p.clear(),this.index=0,this.player=null))):(this.index=c,this.player))}}});return g.amiga=p(),Object.seal(g)}()}(),function(){function e(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},enabled:{value:0,writable:!0},restart:{value:0,writable:!0},note:{value:0,writable:!0},period:{value:0,writable:!0},sample:{value:0,writable:!0},samplePtr:{value:0,writable:!0},sampleLen:{value:0,writable:!0},synth:{value:0,writable:!0},synthPtr:{value:0,writable:!0},arpeggio:{value:0,writable:!0},autoArpeggio:{value:0,writable:!0},autoSlide:{value:0,writable:!0},vibrato:{value:0,writable:!0},volume:{value:0,writable:!0},volumeDef:{value:0,writable:!0},adsrControl:{value:0,writable:!0},adsrPtr:{value:0,writable:!0},adsrCtr:{value:0,writable:!0},lfoControl:{value:0,writable:!0},lfoPtr:{value:0,writable:!0},lfoCtr:{value:0,writable:!0},egControl:{value:0,writable:!0},egPtr:{value:0,writable:!0},egCtr:{value:0,writable:!0},egValue:{value:0,writable:!0},fxControl:{value:0,writable:!0},fxCtr:{value:0,writable:!0},modControl:{value:0,writable:!0},modPtr:{value:0,writable:!0},modCtr:{value:0,writable:!0},initialize:{value:function(){this.channel=null,this.enabled=0,this.restart=0,this.note=0,this.period=0,this.sample=0,this.samplePtr=0,this.sampleLen=2,this.synth=0,this.synthPtr=-1,this.arpeggio=0,this.autoArpeggio=0,this.autoSlide=0,this.vibrato=0,this.volume=0,this.volumeDef=0,this.adsrControl=0,this.adsrPtr=0,this.adsrCtr=0,this.lfoControl=0,this.lfoPtr=0,this.lfoCtr=0,this.egControl=0,this.egPtr=0,this.egCtr=0,this.egValue=0,this.fxControl=0,this.fxCtr=0,this.modControl=0,this.modPtr=0,this.modCtr=0}}})}function t(){var e=n();return Object.defineProperties(e,{synth:{value:0,writable:!0},table:{value:0,writable:!0},adsrControl:{value:0,writable:!0},adsrTable:{value:0,writable:!0},adsrLen:{value:0,writable:!0},adsrSpeed:{value:0,writable:!0},lfoControl:{value:0,writable:!0},lfoTable:{value:0,writable:!0},lfoDepth:{value:0,writable:!0},lfoLen:{value:0,writable:!0},lfoDelay:{value:0,writable:!0},lfoSpeed:{value:0,writable:!0},egControl:{value:0,writable:!0},egTable:{value:0,writable:!0},egLen:{value:0,writable:!0},egDelay:{value:0,writable:!0},egSpeed:{value:0,writable:!0},fxControl:{value:0,writable:!0},fxDelay:{value:0,writable:!0},fxSpeed:{value:0,writable:!0},modControl:{value:0,writable:!0},modTable:{value:0,writable:!0},modLen:{value:0,writable:!0},modDelay:{value:0,writable:!0},modSpeed:{value:0,writable:!0}}),Object.seal(e)}function i(){var e=h();return Object.defineProperties(e,{soundTranspose:{value:0,writable:!0}}),Object.seal(e)}function a(a){var n=u(a);return Object.defineProperties(n,{id:{value:"BPPlayer"},tracks:{value:[],writable:!0},patterns:{value:[],writable:!0},samples:{value:[],writable:!0},length:{value:0,writable:!0},buffer:{value:null,writable:!0},voices:{value:[],writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},nextPos:{value:0,writable:!0},jumpFlag:{value:0,writable:!0},repeatCtr:{value:0,writable:!0},arpeggioCtr:{value:0,writable:!0},vibratoPos:{value:0,writable:!0},initialize:{value:function(){var e,t=this.voices[0];for(this.reset(),this.speed=6,this.tick=1,this.trackPos=0,this.patternPos=0,this.nextPos=0,this.jumpFlag=0,this.repeatCtr=0,this.arpeggioCtr=1,this.vibratoPos=0,e=0;e<128;++e)this.buffer[e]=0;for(;t;)t.initialize(),t.channel=this.mixer.channels[t.index],t.samplePtr=this.mixer.loopPtr,t=t.next}},restore:{value:function(){for(var e,t,i,a=this.voices[0];a;){if(a.synthPtr>-1)for(i=a.index<<5,t=a.synthPtr+32,e=a.synthPtr;e<t;++e)this.mixer.memory[e]=this.buffer[i++];a=a.next}}},loader:{value:function(e){var a,n,h,p,u,d,v=0,b=0;if(this.title=e.readString(26),"BPSM"==(a=e.readString(4)))this.version=r;else{if("V.2"==(a=a.substr(0,3)))this.version=s;else{if("V.3"!=a)return;this.version=o}e.position=29,d=e.readUbyte()}for(this.length=e.readUshort();++b<16;)p=t(),255==e.readUbyte()?(p.synth=1,p.table=e.readUbyte(),p.pointer=p.table<<6,p.length=e.readUshort()<<1,p.adsrControl=e.readUbyte(),p.adsrTable=e.readUbyte()<<6,p.adsrLen=e.readUshort(),p.adsrSpeed=e.readUbyte(),p.lfoControl=e.readUbyte(),p.lfoTable=e.readUbyte()<<6,p.lfoDepth=e.readUbyte(),p.lfoLen=e.readUshort(),this.version<o?(e.readByte(),p.lfoDelay=e.readUbyte(),p.lfoSpeed=e.readUbyte(),p.egControl=e.readUbyte(),p.egTable=e.readUbyte()<<6,e.readByte(),p.egLen=e.readUshort(),e.readByte(),p.egDelay=e.readUbyte(),p.egSpeed=e.readUbyte(),p.fxSpeed=1,p.modSpeed=1,p.volume=e.readUbyte(),e.position+=6):(p.lfoDelay=e.readUbyte(),p.lfoSpeed=e.readUbyte(),p.egControl=e.readUbyte(),p.egTable=e.readUbyte()<<6,p.egLen=e.readUshort(),p.egDelay=e.readUbyte(),p.egSpeed=e.readUbyte(),p.fxControl=e.readUbyte(),p.fxSpeed=e.readUbyte(),p.fxDelay=e.readUbyte(),p.modControl=e.readUbyte(),p.modTable=e.readUbyte()<<6,p.modSpeed=e.readUbyte(),p.modDelay=e.readUbyte(),p.volume=e.readUbyte(),p.modLen=e.readUshort())):(e.position--,p.synth=0,p.name=e.readString(24),p.length=e.readUshort()<<1,p.length?(p.loop=e.readUshort(),p.repeat=e.readUshort()<<1,p.volume=e.readUshort(),p.loop+p.repeat>=p.length&&(p.repeat=p.length-p.loop)):(p.pointer--,p.repeat=2,e.position+=6)),this.samples[b]=p;for(n=this.length<<2,this.tracks.length=n,b=0;b<n;++b)u=i(),u.pattern=e.readUshort(),u.soundTranspose=e.readByte(),u.transpose=e.readByte(),u.pattern>v&&(v=u.pattern),this.tracks[b]=u;for(n=v<<4,this.patterns.length=n,b=0;b<n;++b)h=l(),h.note=e.readByte(),h.sample=e.readUbyte(),h.effect=15&h.sample,h.sample=(240&h.sample)>>4,h.param=e.readByte(),this.patterns[b]=h;for(this.mixer.store(e,d<<6),b=0;++b<16;)p=this.samples[b],!p.synth&&p.length&&(p.pointer=this.mixer.store(e,p.length),p.loopPtr=p.pointer+p.loop)}},process:{value:function(){var e,t,i,a,r,s,l,n,h,u,v,b=this.mixer.memory,c=this.voices[0];for(this.arpeggioCtr=3&--this.arpeggioCtr,this.vibratoPos=7&++this.vibratoPos;c;)if(e=c.channel,c.period+=c.autoSlide,c.vibrato?e.period=c.period+(d[this.vibratoPos]/c.vibrato>>0):e.period=c.period,e.pointer=c.samplePtr,e.length=c.sampleLen,(c.arpeggio||c.autoArpeggio)&&(s=c.note,this.arpeggioCtr?1==this.arpeggioCtr&&(s+=(15&c.arpeggio)+(15&c.autoArpeggio)):s+=((240&c.arpeggio)>>4)+((240&c.autoArpeggio)>>4),e.period=c.period=p[s+35],c.restart=0),!c.synth||c.sample<0)c=c.next;else if(h=this.samples[c.sample],c.adsrControl&&0==--c.adsrCtr&&(c.adsrCtr=h.adsrSpeed,t=128+b[h.adsrTable+c.adsrPtr]>>2,e.volume=t*c.volume>>6,++c.adsrPtr==h.adsrLen&&(c.adsrPtr=0,1==c.adsrControl&&(c.adsrControl=0))),c.lfoControl&&0==--c.lfoCtr&&(c.lfoCtr=h.lfoSpeed,t=b[h.lfoTable+c.lfoPtr],h.lfoDepth&&(t=t/h.lfoDepth>>0),e.period=c.period+t,++c.lfoPtr==h.lfoLen&&(c.lfoPtr=0,1==c.lfoControl&&(c.lfoControl=0))),c.synthPtr<0)c=c.next;else{if(c.egControl&&0==--c.egCtr){if(c.egCtr=h.egSpeed,t=c.egValue,c.egValue=128+b[h.egTable+c.egPtr]>>3,c.egValue!=t)if(u=(c.index<<5)+t,i=c.synthPtr+t,c.egValue<t)for(t-=c.egValue,r=i-t;i>r;)b[--i]=this.buffer[--u];else for(t=c.egValue-t,r=i+t;i<r;)b[i++]=1+~this.buffer[u++];++c.egPtr==h.egLen&&(c.egPtr=0,1==c.egControl&&(c.egControl=0))}switch(c.fxControl){case 0:break;case 1:if(0==--c.fxCtr)for(c.fxCtr=h.fxSpeed,i=c.synthPtr,r=c.synthPtr+32,t=i>0?b[i-1]:0;i<r;)t=t+b[i+1]>>1,b[i++]=t;break;case 2:for(u=31+(c.index<<5),r=c.synthPtr+32,t=h.fxSpeed,i=c.synthPtr;i<r;++i)this.buffer[u]<b[i]?b[i]-=t:this.buffer[u]>b[i]&&(b[i]+=t),u--;break;case 3:case 5:for(u=c.index<<5,r=c.synthPtr+32,t=h.fxSpeed,i=c.synthPtr;i<r;++i)this.buffer[u]<b[i]?b[i]-=t:this.buffer[u]>b[i]&&(b[i]+=t),u++;break;case 4:for(u=c.synthPtr+64,r=c.synthPtr+32,t=h.fxSpeed,i=c.synthPtr;i<r;++i)b[u]<b[i]?b[i]-=t:b[u]>b[i]&&(b[i]+=t),u++;break;case 6:if(0==--c.fxCtr)for(c.fxControl=0,c.fxCtr=1,u=c.synthPtr+64,r=c.synthPtr+32,i=c.synthPtr;i<r;++i)b[i]=b[u++]}c.modControl&&0==--c.modCtr&&(c.modCtr=h.modSpeed,b[c.synthPtr+32]=b[h.modTable+c.modPtr],++c.modPtr==h.modLen&&(c.modPtr=0,1==c.modControl&&(c.modControl=0))),c=c.next}if(0==--this.tick){for(this.tick=this.speed,c=this.voices[0];c;){switch(e=c.channel,c.enabled=0,v=this.tracks[(this.trackPos<<2)+c.index],n=this.patterns[this.patternPos+(v.pattern-1<<4)],s=n.note,l=n.effect,t=n.param,s&&(c.autoArpeggio=c.autoSlide=c.vibrato=0,10==l&&0!=(240&t)||(s+=v.transpose),c.note=s,c.period=p[s+35],c.restart=l<13?c.volumeDef=1:0,a=n.sample,0==a&&(a=c.sample),10==l&&0!=(15&t)||(a+=v.soundTranspose),l<13&&(!c.synth||c.sample!=a)&&(c.sample=a,c.enabled=1)),l){case 0:c.arpeggio=t;break;case 1:c.volume=t,c.volumeDef=0,(this.version<o||!c.synth)&&(e.volume=c.volume);break;case 2:this.tick=this.speed=t;break;case 3:this.mixer.filter.active=t;break;case 4:c.period-=t,c.arpeggio=0;break;case 5:c.period+=t,c.arpeggio=0;break;case 6:this.version==o?c.vibrato=t:this.repeatCtr=t;break;case 7:this.version==o?(this.nextPos=t,this.jumpFlag=1):0==this.repeatCtr&&(this.trackPos=t);break;case 8:c.autoSlide=t;break;case 9:c.autoArpeggio=t,this.version==o&&(c.adsrPtr=0,0==c.adsrControl&&(c.adsrControl=1));break;case 11:c.fxControl=t;break;case 13:c.autoArpeggio=t,c.fxControl^=1,c.adsrPtr=0,0==c.adsrControl&&(c.adsrControl=1);break;case 14:c.autoArpeggio=t,c.adsrPtr=0,0==c.adsrControl&&(c.adsrControl=1);break;case 15:c.autoArpeggio=t}c=c.next}for(this.jumpFlag?(this.trackPos=this.nextPos,this.patternPos=this.jumpFlag=0):16==++this.patternPos&&(this.patternPos=0,++this.trackPos==this.length&&(this.trackPos=0,this.mixer.complete=1)),c=this.voices[0];c;)if(e=c.channel,c.enabled&&(e.enabled=c.enabled=0),0!=c.restart){if(c.synthPtr>-1){for(u=c.index<<5,r=c.synthPtr+32,i=c.synthPtr;i<r;++i)b[i]=this.buffer[u++];c.synthPtr=-1}c=c.next}else c=c.next;for(c=this.voices[0];c;)if(0==c.restart||c.sample<0)c=c.next;else{if(e=c.channel,e.period=c.period,c.restart=0,h=this.samples[c.sample],h.synth){if(c.synth=1,c.egValue=0,c.adsrPtr=c.lfoPtr=c.egPtr=c.modPtr=0,c.adsrCtr=1,c.lfoCtr=h.lfoDelay+1,c.egCtr=h.egDelay+1,c.fxCtr=h.fxDelay+1,c.modCtr=h.modDelay+1,c.adsrControl=h.adsrControl,c.lfoControl=h.lfoControl,c.egControl=h.egControl,c.fxControl=h.fxControl,c.modControl=h.modControl,e.pointer=c.samplePtr=h.pointer,e.length=c.sampleLen=h.length,c.adsrControl?(t=128+b[h.adsrTable]>>2,c.volumeDef&&(c.volume=h.volume,c.volumeDef=0),e.volume=t*c.volume>>6):e.volume=c.volumeDef?h.volume:c.volume,c.egControl||c.fxControl||c.modControl)for(c.synthPtr=h.pointer,i=c.index<<5,r=c.synthPtr+32,u=c.synthPtr;u<r;++u)this.buffer[i++]=b[u]}else c.synth=c.lfoControl=0,h.pointer<0?(c.samplePtr=this.mixer.loopPtr,c.sampleLen=2):(e.pointer=h.pointer,e.volume=c.volumeDef?h.volume:c.volume,2!=h.repeat?(c.samplePtr=h.loopPtr,e.length=c.sampleLen=h.repeat):(c.samplePtr=this.mixer.loopPtr,c.sampleLen=2,e.length=h.length));e.enabled=c.enabled=1,c=c.next}}}}}),n.voices[0]=e(0),n.voices[0].next=n.voices[1]=e(1),n.voices[1].next=n.voices[2]=e(2),n.voices[2].next=n.voices[3]=e(3),n.buffer=new Int8Array(128),Object.seal(n)}var r=1,s=2,o=3,p=[6848,6464,6080,5760,5440,5120,4832,4576,4320,4064,3840,3616,3424,3232,3040,2880,2720,2560,2416,2288,2160,2032,1920,1808,1712,1616,1520,1440,1360,1280,1208,1144,1080,1016,960,904,856,808,760,720,680,640,604,572,540,508,480,452,428,404,380,360,340,320,302,286,270,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,107,101,95,90,85,80,76,72,68,64,60,57],d=[0,64,128,64,0,-64,-128,-64];window.neoart.BPPlayer=a}(),function(){function e(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},sample:{value:null,writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},status:{value:0,writable:!0},speed:{value:0,writable:!0},step:{value:null,writable:!0},row:{value:null,writable:!0},note:{value:0,writable:!0},period:{value:0,writable:!0},arpeggioPos:{value:0,writable:!0},pitchBend:{value:0,writable:!0},tableCtr:{value:0,writable:!0},tablePos:{value:0,writable:!0},vibratoCtr:{value:0,writable:!0},vibratoDir:{value:0,writable:!0},vibratoPos:{value:0,writable:!0},vibratoPeriod:{value:0,writable:!0},volume:{value:0,writable:!0},attackCtr:{value:0,writable:!0},decayCtr:{value:0,writable:!0},releaseCtr:{value:0,writable:!0},sustain:{value:0,writable:!0},initialize:{value:function(){this.sample=null,this.trackPos=0,this.patternPos=0,this.status=0,this.speed=1,this.step=null,this.row=null,this.note=0,this.period=0,this.arpeggioPos=0,this.pitchBend=0,this.tableCtr=0,this.tablePos=0,this.vibratoCtr=0,this.vibratoDir=0,this.vibratoPos=0,this.vibratoPeriod=0,this.volume=0,this.attackCtr=0,this.decayCtr=0,this.releaseCtr=0,this.sustain=1}}})}function t(){var e=n();return Object.defineProperties(e,{synth:{value:0,writable:!0},attackStep:{value:0,writable:!0},attackDelay:{value:0,writable:!0},decayStep:{value:0,writable:!0},decayDelay:{value:0,writable:!0},releaseStep:{value:0,writable:!0},releaseDelay:{value:0,writable:!0},sustain:{value:0,writable:!0},arpeggio:{value:null,writable:!0},pitchBend:{value:0,writable:!0},portamento:{value:0,writable:!0},table:{value:null,writable:!0},tableDelay:{value:0,writable:!0},vibratoWait:{value:0,writable:!0},vibratoStep:{value:0,writable:!0},vibratoLen:{value:0,writable:!0}}),e.arpeggio=new Int8Array(8),e.table=new Int8Array(48),Object.seal(e)}function i(i){var r=u(i);return Object.defineProperties(r,{id:{value:"D1Player"},pointers:{value:null,writable:!0},tracks:{value:[],writable:!0},patterns:{value:[],writable:!0},samples:{value:[],writable:!0},voices:{value:[],writable:!0},initialize:{value:function(){var e=this.voices[0];for(this.reset(),this.speed=6;e;)e.initialize(),e.channel=this.mixer.channels[e.index],e.sample=this.samples[20],e=e.next}},loader:{value:function(e){var i,a,r,s,o,n,p,u,d=0,v=0;if("ALL "==e.readString(4)){for(s=104,i=new Uint32Array(25);d<25;++d)i[d]=e.readUint();for(this.pointers=new Uint32Array(4),d=1;d<4;++d)this.pointers[d]=this.pointers[v]+(i[v++]>>1)-1;for(r=this.pointers[3]+(i[3]>>1)-1,this.tracks.length=r,a=s+i[1]-2,e.position=s,v=1,d=0;d<r;++d)p=h(),u=e.readUshort(),65535==u||e.position==a?(p.pattern=-1,p.transpose=e.readUshort(),a+=i[v++]):(e.position--,p.pattern=(u>>2&16320)>>2,p.transpose=e.readByte()),this.tracks[d]=p;for(r=i[4]>>2,this.patterns.length=r,d=0;d<r;++d)o=l(),o.sample=e.readUbyte(),o.note=e.readUbyte(),o.effect=31&e.readUbyte(),o.param=e.readUbyte(),this.patterns[d]=o;for(a=5,d=0;d<20;++d){if(this.samples[d]=null,0!=i[a]){for(n=t(),n.attackStep=e.readUbyte(),n.attackDelay=e.readUbyte(),n.decayStep=e.readUbyte(),n.decayDelay=e.readUbyte(),n.sustain=e.readUshort(),n.releaseStep=e.readUbyte(),n.releaseDelay=e.readUbyte(),n.volume=e.readUbyte(),n.vibratoWait=e.readUbyte(),n.vibratoStep=e.readUbyte(),n.vibratoLen=e.readUbyte(),n.pitchBend=e.readByte(),n.portamento=e.readUbyte(),n.synth=e.readUbyte(),n.tableDelay=e.readUbyte(),
v=0;v<8;++v)n.arpeggio[v]=e.readByte();if(n.length=e.readUshort(),n.loop=e.readUshort(),n.repeat=e.readUshort()<<1,n.synth=n.synth?0:1,n.synth){for(v=0;v<48;++v)n.table[v]=e.readByte();r=i[a]-78}else r=n.length;n.pointer=this.mixer.store(e,r),n.loopPtr=n.pointer+n.loop,this.samples[d]=n}a++}n=t(),n.pointer=n.loopPtr=this.mixer.memory.length,n.length=n.repeat=2,this.samples[20]=n,this.version=1}}},process:{value:function(){for(var e,t,i,r,s,o,l=this.voices[0];l;){if(t=l.channel,0==--l.speed&&(l.speed=this.speed,0==l.patternPos&&(l.step=this.tracks[this.pointers[l.index]+l.trackPos],l.step.pattern<0&&(l.trackPos=l.step.transpose,l.step=this.tracks[this.pointers[l.index]+l.trackPos]),l.trackPos++),r=this.patterns[l.step.pattern+l.patternPos],r.effect&&(l.row=r),r.note&&(t.enabled=0,l.row=r,l.note=r.note+l.step.transpose,l.arpeggioPos=l.pitchBend=l.status=0,s=l.sample=this.samples[r.sample],s.synth||(t.pointer=s.pointer),t.length=s.length,l.tableCtr=l.tablePos=0,l.vibratoCtr=s.vibratoWait,l.vibratoPos=s.vibratoLen,l.vibratoDir=s.vibratoLen<<1,l.volume=l.attackCtr=l.decayCtr=l.releaseCtr=0,l.sustain=s.sustain),16==++l.patternPos&&(l.patternPos=0)),s=l.sample,s.synth)if(0==l.tableCtr){l.tableCtr=s.tableDelay;do{i=1,l.tablePos>=48&&(l.tablePos=0),o=s.table[l.tablePos],l.tablePos++,o>=0?(t.pointer=s.pointer+(o<<5),i=0):-1!=o?s.tableDelay=127&o:l.tablePos=s.table[l.tablePos]}while(i)}else l.tableCtr--;if(s.portamento&&(o=a[l.note]+l.pitchBend,0!=l.period?l.period<o?(l.period+=s.portamento,l.period>o&&(l.period=o)):(l.period-=s.portamento,l.period<o&&(l.period=o)):l.period=o),0==l.vibratoCtr?(l.vibratoPeriod=l.vibratoPos*s.vibratoStep,0==(1&l.status)?++l.vibratoPos==l.vibratoDir&&(l.status^=1):0==--l.vibratoPos&&(l.status^=1)):l.vibratoCtr--,s.pitchBend<0?l.pitchBend+=s.pitchBend:l.pitchBend-=s.pitchBend,l.row)switch(r=l.row,r.effect){case 0:break;case 1:o=15&r.param,o&&(this.speed=o);break;case 2:l.pitchBend-=r.param;break;case 3:l.pitchBend+=r.param;break;case 4:this.mixer.filter.active=r.param;break;case 5:s.vibratoWait=r.param;break;case 6:s.vibratoStep=r.param;case 7:s.vibratoLen=r.param;break;case 8:s.pitchBend=r.param;break;case 9:s.portamento=r.param;break;case 10:o=r.param,o>64&&(o=64),s.volume=64;break;case 11:s.arpeggio[0]=r.param;break;case 12:s.arpeggio[1]=r.param;break;case 13:s.arpeggio[2]=r.param;break;case 14:s.arpeggio[3]=r.param;break;case 15:s.arpeggio[4]=r.param;break;case 16:s.arpeggio[5]=r.param;break;case 17:s.arpeggio[6]=r.param;break;case 18:s.arpeggio[7]=r.param;break;case 19:s.arpeggio[0]=s.arpeggio[4]=r.param;break;case 20:s.arpeggio[1]=s.arpeggio[5]=r.param;break;case 21:s.arpeggio[2]=s.arpeggio[6]=r.param;break;case 22:s.arpeggio[3]=s.arpeggio[7]=r.param;break;case 23:o=r.param,o>64&&(o=64),s.attackStep=o;break;case 24:s.attackDelay=r.param;break;case 25:o=r.param,o>64&&(o=64),s.decayStep=o;break;case 26:s.decayDelay=r.param;break;case 27:s.sustain=255&r.param&s.sustain;break;case 28:s.sustain=(65280&s.sustain)+r.param;break;case 29:o=r.param,o>64&&(o=64),s.releaseStep=o;break;case 30:s.releaseDelay=r.param}s.portamento?o=l.period:(o=a[l.note+s.arpeggio[l.arpeggioPos]],l.arpeggioPos=7&++l.arpeggioPos,o-=s.vibratoLen*s.vibratoStep,o+=l.pitchBend,l.period=0),t.period=o+l.vibratoPeriod,e=14&l.status,o=l.volume,0==e&&(0==l.attackCtr?(l.attackCtr=s.attackDelay,(o+=s.attackStep)>=64&&(e|=2,l.status|=2,o=64)):l.attackCtr--),2==e&&(0==l.decayCtr?(l.decayCtr=s.decayDelay,(o-=s.decayStep)<=s.volume&&(e|=6,l.status|=6,o=s.volume)):l.decayCtr--),6==e&&(0==l.sustain?(e|=14,l.status|=14):l.sustain--),14==e&&(0==l.releaseCtr?(l.releaseCtr=s.releaseDelay,(o-=s.releaseStep)<0&&(l.status&=9,o=0)):l.releaseCtr--),t.volume=l.volume=o,t.enabled=1,s.synth||(s.loop?(t.pointer=s.loopPtr,t.length=s.repeat):(t.pointer=this.mixer.loopPtr,t.length=2)),l=l.next}}}}),r.voices[0]=e(0),r.voices[0].next=r.voices[1]=e(1),r.voices[1].next=r.voices[2]=e(2),r.voices[2].next=r.voices[3]=e(3),Object.seal(r)}var a=[0,6848,6464,6096,5760,5424,5120,4832,4560,4304,4064,3840,3616,3424,3232,3048,2880,2712,2560,2416,2280,2152,2032,1920,1808,1712,1616,1524,1440,1356,1280,1208,1140,1076,960,904,856,808,762,720,678,640,604,570,538,508,480,452,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,113,113,113,113,113,113,113,113,113,113,113,113];window.neoart.D1Player=i}(),function(){function e(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},sample:{value:null,writable:!0},trackPtr:{value:0,writable:!0},trackPos:{value:0,writable:!0},trackLen:{value:0,writable:!0},patternPos:{value:0,writable:!0},restart:{value:0,writable:!0},step:{value:null,writable:!0},row:{value:null,writable:!0},note:{value:0,writable:!0},period:{value:0,writable:!0},finalPeriod:{value:0,writable:!0},arpeggioPtr:{value:0,writable:!0},arpeggioPos:{value:0,writable:!0},pitchBend:{value:0,writable:!0},portamento:{value:0,writable:!0},tableCtr:{value:0,writable:!0},tablePos:{value:0,writable:!0},vibratoCtr:{value:0,writable:!0},vibratoDir:{value:0,writable:!0},vibratoPos:{value:0,writable:!0},vibratoPeriod:{value:0,writable:!0},vibratoSustain:{value:0,writable:!0},volume:{value:0,writable:!0},volumeMax:{value:0,writable:!0},volumePos:{value:0,writable:!0},volumeSustain:{value:0,writable:!0},initialize:{value:function(){this.sample=null,this.trackPtr=0,this.trackPos=0,this.trackLen=0,this.patternPos=0,this.restart=0,this.step=null,this.row=null,this.note=0,this.period=0,this.finalPeriod=0,this.arpeggioPtr=0,this.arpeggioPos=0,this.pitchBend=0,this.portamento=0,this.tableCtr=0,this.tablePos=0,this.vibratoCtr=0,this.vibratoDir=0,this.vibratoPos=0,this.vibratoPeriod=0,this.vibratoSustain=0,this.volume=0,this.volumeMax=63,this.volumePos=0,this.volumeSustain=0}}})}function t(){var e=n();return Object.defineProperties(e,{index:{value:0,writable:!0},pitchBend:{value:0,writable:!0},synth:{value:0,writable:!0},table:{value:null,writable:!0},vibratos:{value:null,writable:!0},volumes:{value:null,writable:!0}}),e.table=new Uint8Array(48),e.vibratos=new Uint8Array(15),e.volumes=new Uint8Array(15),Object.seal(e)}function i(i){var r=u(i);return Object.defineProperties(r,{id:{value:"D2Player"},tracks:{value:[],writable:!0},patterns:{value:[],writable:!0},samples:{value:[],writable:!0},data:{value:null,writable:!0},arpeggios:{value:null,writable:!0},voices:{value:[],writable:!0},noise:{value:0,writable:!0},initialize:{value:function(){var e=this.voices[0];for(this.reset(),this.speed=5,this.tick=1,this.noise=0;e;)e.initialize(),e.channel=this.mixer.channels[e.index],e.sample=this.samples[this.samples.length-1],e.trackPtr=this.data[e.index],e.restart=this.data[e.index+4],e.trackLen=this.data[e.index+8],e=e.next}},loader:{value:function(e){var i,a,r,s,o,n,p,u=0,d=0;if(e.position=3014,".FNL"==e.readString(4)){for(e.position=4042,this.data=new Uint16Array(12);u<4;++u)this.data[u+4]=e.readUshort()>>1,p=e.readUshort()>>1,this.data[u+8]=p,d+=p;for(p=d,u=3;u>0;--u)this.data[u]=p-=this.data[u+8];for(this.tracks.length=d,u=0;u<d;++u)n=h(),n.pattern=e.readUbyte()<<4,n.transpose=e.readByte(),this.tracks[u]=n;for(d=e.readUint()>>2,this.patterns.length=d,u=0;u<d;++u)s=l(),s.note=e.readUbyte(),s.sample=e.readUbyte(),s.effect=e.readUbyte()-1,s.param=e.readUbyte(),this.patterns[u]=s;for(e.position+=254,p=e.readUshort(),r=e.position,e.position-=256,d=1,a=new Uint16Array(128),u=0;u<128;++u)(i=e.readUshort())!=p&&(a[d++]=i);for(this.samples.length=d,u=0;u<d;++u){for(e.position=r+a[u],o=t(),o.length=e.readUshort()<<1,o.loop=e.readUshort(),o.repeat=e.readUshort()<<1,i=0;i<15;++i)o.volumes[i]=e.readUbyte();for(i=0;i<15;++i)o.vibratos[i]=e.readUbyte();for(o.pitchBend=e.readUshort(),o.synth=e.readByte(),o.index=e.readUbyte(),i=0;i<48;++i)o.table[i]=e.readUbyte();this.samples[u]=o}for(d=e.readUint(),this.mixer.store(e,d),e.position+=64,u=0;u<8;++u)a[u]=e.readUint();for(d=this.samples.length,r=e.position,u=0;u<d;++u)o=this.samples[u],o.synth>=0||(e.position=r+a[o.index],o.pointer=this.mixer.store(e,o.length),o.loopPtr=o.pointer+o.loop);for(e.position=3018,u=0;u<1024;++u)this.arpeggios[u]=e.readByte();for(o=t(),o.pointer=o.loopPtr=this.mixer.memory.length,o.length=o.repeat=2,this.samples[d]=o,d=this.patterns.length,i=this.samples.length-1,u=0;u<d;++u)s=this.patterns[u],s.sample>i&&(s.sample=0);this.version=2}}},process:{value:function(){for(var e,t,i,r,s,o=0,l=this.voices[0];o<64;)this.noise=this.noise<<7|this.noise>>>25,this.noise+=1858762093,this.noise^=2656676139,s=this.noise>>>24&255,s>127&&(s|=-256),this.mixer.memory[o++]=s,s=this.noise>>>16&255,s>127&&(s|=-256),this.mixer.memory[o++]=s,s=this.noise>>>8&255,s>127&&(s|=-256),this.mixer.memory[o++]=s,s=255&this.noise,s>127&&(s|=-256),this.mixer.memory[o++]=s;for(--this.tick<0&&(this.tick=this.speed);l;)if(l.trackLen<1)l=l.next;else{if(e=l.channel,r=l.sample,r.synth&&(e.pointer=r.loopPtr,e.length=r.repeat),0==this.tick){switch(0==l.patternPos&&(l.step=this.tracks[l.trackPtr+l.trackPos],++l.trackPos==l.trackLen&&(l.trackPos=l.restart)),i=l.row=this.patterns[l.step.pattern+l.patternPos],i.note&&(e.enabled=0,l.note=i.note,l.period=a[i.note+l.step.transpose],r=l.sample=this.samples[i.sample],r.synth<0&&(e.pointer=r.pointer,e.length=r.length),l.arpeggioPos=0,l.tableCtr=0,l.tablePos=0,l.vibratoCtr=r.vibratos[1],l.vibratoPos=0,l.vibratoDir=0,l.vibratoPeriod=0,l.vibratoSustain=r.vibratos[2],l.volume=0,l.volumePos=0,l.volumeSustain=0),i.effect){case-1:break;case 0:this.speed=15&i.param;break;case 1:this.mixer.filter.active=i.param;break;case 2:l.pitchBend=1+~(255&i.param);break;case 3:l.pitchBend=255&i.param;break;case 4:l.portamento=i.param;break;case 5:l.volumeMax=63&i.param;break;case 6:this.mixer.volume=i.param;break;case 7:l.arpeggioPtr=(63&i.param)<<4}l.patternPos=15&++l.patternPos}r=l.sample,r.synth>=0&&(l.tableCtr?l.tableCtr--:(l.tableCtr=r.index,s=r.table[l.tablePos],255==s&&255!=(s=r.table[++l.tablePos])&&(l.tablePos=s,s=r.table[l.tablePos]),255!=s&&(e.pointer=s<<8,e.length=r.length,++l.tablePos>47&&(l.tablePos=0)))),s=r.vibratos[l.vibratoPos],l.vibratoDir?l.vibratoPeriod-=s:l.vibratoPeriod+=s,0==--l.vibratoCtr&&(l.vibratoCtr=r.vibratos[l.vibratoPos+1],l.vibratoDir=~l.vibratoDir),l.vibratoSustain?l.vibratoSustain--:(l.vibratoPos+=3,15==l.vibratoPos&&(l.vibratoPos=12),l.vibratoSustain=r.vibratos[l.vibratoPos+2]),l.volumeSustain?l.volumeSustain--:(s=r.volumes[l.volumePos],t=r.volumes[l.volumePos+1],t<l.volume?(l.volume-=s,l.volume<t&&(l.volume=t,l.volumePos+=3,l.volumeSustain=r.volumes[l.volumePos-1])):(l.volume+=s,l.volume>t&&(l.volume=t,l.volumePos+=3,15==l.volumePos&&(l.volumePos=12),l.volumeSustain=r.volumes[l.volumePos-1]))),l.portamento&&(l.period<l.finalPeriod?(l.finalPeriod-=l.portamento,l.finalPeriod<l.period&&(l.finalPeriod=l.period)):(l.finalPeriod+=l.portamento,l.finalPeriod>l.period&&(l.finalPeriod=l.period))),s=this.arpeggios[l.arpeggioPtr+l.arpeggioPos],-128==s&&(l.arpeggioPos=0,s=this.arpeggios[l.arpeggioPtr]),l.arpeggioPos=15&++l.arpeggioPos,0==l.portamento&&(s=l.note+l.step.transpose+s,s<0&&(s=0),l.finalPeriod=a[s]),l.vibratoPeriod-=r.pitchBend-l.pitchBend,e.period=l.finalPeriod+l.vibratoPeriod,s=l.volume>>2&63,s>l.volumeMax&&(s=l.volumeMax),e.volume=s,e.enabled=1,l=l.next}}}}),r.voices[0]=e(0),r.voices[0].next=r.voices[1]=e(1),r.voices[1].next=r.voices[2]=e(2),r.voices[2].next=r.voices[3]=e(3),r.arpeggios=new Int8Array(1024),Object.seal(r)}var a=[0,6848,6464,6096,5760,5424,5120,4832,4560,4304,4064,3840,3616,3424,3232,3048,2880,2712,2560,2416,2280,2152,2032,1920,1808,1712,1616,1524,1440,1356,1280,1208,1140,1076,1016,960,904,856,808,762,720,678,640,604,570,538,508,480,452,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,113,113,113,113,113,113,113,113,113,113,113,113];window.neoart.D2Player=i}(),function(){function e(){return Object.create(null,{channel:{value:null,writable:!0},sample:{value:null,writable:!0},step:{value:null,writable:!0},note:{value:0,writable:!0},period:{value:0,writable:!0},val1:{value:0,writable:!0},val2:{value:0,writable:!0},finalPeriod:{value:0,writable:!0},arpeggioStep:{value:0,writable:!0},effectCtr:{value:0,writable:!0},pitch:{value:0,writable:!0},pitchCtr:{value:0,writable:!0},pitchStep:{value:0,writable:!0},portamento:{value:0,writable:!0},volume:{value:0,writable:!0},volumeCtr:{value:0,writable:!0},volumeStep:{value:0,writable:!0},mixMute:{value:0,writable:!0},mixPtr:{value:0,writable:!0},mixEnd:{value:0,writable:!0},mixSpeed:{value:0,writable:!0},mixStep:{value:0,writable:!0},mixVolume:{value:0,writable:!0},initialize:{value:function(){this.sample=null,this.step=null,this.note=0,this.period=0,this.val1=0,this.val2=0,this.finalPeriod=0,this.arpeggioStep=0,this.effectCtr=0,this.pitch=0,this.pitchCtr=0,this.pitchStep=0,this.portamento=0,this.volume=0,this.volumeCtr=0,this.volumeStep=0,this.mixMute=1,this.mixPtr=0,this.mixEnd=0,this.mixSpeed=0,this.mixStep=0,this.mixVolume=0}}})}function t(){var e=n();return Object.defineProperties(e,{wave:{value:0,writable:!0},waveLen:{value:0,writable:!0},finetune:{value:0,writable:!0},arpeggio:{value:0,writable:!0},pitch:{value:0,writable:!0},pitchDelay:{value:0,writable:!0},pitchLoop:{value:0,writable:!0},pitchSpeed:{value:0,writable:!0},effect:{value:0,writable:!0},effectDone:{value:0,writable:!0},effectStep:{value:0,writable:!0},effectSpeed:{value:0,writable:!0},source1:{value:0,writable:!0},source2:{value:0,writable:!0},volumeLoop:{value:0,writable:!0},volumeSpeed:{value:0,writable:!0}}),Object.seal(e)}function i(){return Object.create(null,{title:{value:"",writable:!0},speed:{value:0,writable:!0},length:{value:0,writable:!0},loop:{value:0,writable:!0},loopStep:{value:0,writable:!0},tracks:{value:[],writable:!0}})}function a(a){var n=u(a);return Object.defineProperties(n,{id:{value:"DMPlayer"},songs:{value:[],writable:!0},patterns:{value:[],writable:!0},samples:{value:[],writable:!0},voices:{value:[],writable:!0},buffer1:{value:0,writable:!0},buffer2:{value:0,writable:!0},song1:{value:0,writable:!0},song2:{value:0,writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},patternLen:{value:0,writable:!0},patternEnd:{value:0,writable:!0},stepEnd:{value:0,writable:!0},numChannels:{value:0,writable:!0},arpeggios:{value:null,writable:!0},averages:{value:null,writable:!0},volumes:{value:null,writable:!0},mixChannel:{value:null,writable:!0},mixPeriod:{value:0,writable:!0},initialize:{value:function(){var e,t,i,a=0;for(this.reset(),this.playSong>7&&(this.playSong=0),this.song1=this.songs[this.playSong],this.speed=15&this.song1.speed,this.speed|=this.speed<<4,this.tick=this.song1.speed,this.trackPos=0,this.patternPos=0,this.patternLen=64,this.patternEnd=1,this.stepEnd=1,this.numChannels=4;a<7;++a)i=this.voices[a],i.initialize(),i.sample=this.samples[0],a<4&&(e=this.mixer.channels[a],e.enabled=0,e.pointer=this.mixer.loopPtr,e.length=2,e.period=124,e.volume=0,i.channel=e);if(this.version==o)for(0!=(1&this.playSong)&&this.playSong--,this.song2=this.songs[this.playSong+1],this.mixChannel=s(7),this.numChannels=7,e=this.mixer.channels[3],e.mute=0,e.pointer=this.buffer1,e.length=350,e.period=this.mixPeriod,e.volume=64,t=this.buffer1+700,a=this.buffer1;a<t;++a)this.mixer.memory[a]=0}},loader:{value:function(e){var a,s,n,p,u,d,v,b,c,m,f,w=0;if(" MUGICIAN/SOFTEYES 1990 "==(s=e.readString(24)))this.version=r;else{if(" MUGICIAN2/SOFTEYES 1990"!=s)return;this.version=o}for(e.position=28,n=new Uint32Array(8);w<8;++w)n[w]=e.readUint();for(e.position=76,w=0;w<8;++w)m=i(),m.loop=e.readUbyte(),m.loopStep=e.readUbyte()<<2,m.speed=e.readUbyte(),m.length=e.readUbyte()<<2,m.title=e.readString(12),this.songs[w]=m;for(e.position=204,this.lastSong=this.songs.length-1,w=0;w<8;++w)for(m=this.songs[w],d=n[w]<<2,u=0;u<d;++u)f=h(),f.pattern=e.readUbyte()<<6,f.transpose=e.readByte(),m.tracks[u]=f;for(v=e.position,e.position=60,d=e.readUint(),this.samples.length=++d,e.position=v,w=1;w<d;++w)c=t(),c.wave=e.readUbyte(),c.waveLen=e.readUbyte()<<1,c.volume=e.readUbyte(),c.volumeSpeed=e.readUbyte(),c.arpeggio=e.readUbyte(),c.pitch=e.readUbyte(),c.effectStep=e.readUbyte(),c.pitchDelay=e.readUbyte(),c.finetune=e.readUbyte()<<6,c.pitchLoop=e.readUbyte(),c.pitchSpeed=e.readUbyte(),c.effect=e.readUbyte(),c.source1=e.readUbyte(),c.source2=e.readUbyte(),c.effectSpeed=e.readUbyte(),c.volumeLoop=e.readUbyte(),this.samples[w]=c;for(this.samples[0]=this.samples[1],v=e.position,e.position=64,d=e.readUint()<<7,e.position=v,this.mixer.store(e,d),v=e.position,e.position=68,p=e.readUint(),e.position=26,d=e.readUshort()<<6,this.patterns.length=d,e.position=v+(p<<5),p&&(p=v),w=0;w<d;++w)b=l(),b.note=e.readUbyte(),b.sample=63&e.readUbyte(),b.effect=e.readUbyte(),b.param=e.readByte(),this.patterns[w]=b;if(v=e.position,e.position=72,p)for(d=e.readUint(),e.position=v,a=this.mixer.store(e,d),v=e.position,this.mixer.memory.length+=350,this.buffer1=this.mixer.memory.length,this.mixer.memory.length+=350,this.buffer2=this.mixer.memory.length,this.mixer.memory.length+=350,this.mixer.loopLen=8,d=this.samples.length,w=1;w<d;++w)c=this.samples[w],c.wave<32||(e.position=p+(c.wave-32<<5),c.pointer=e.readUint(),c.length=e.readUint()-c.pointer,c.loop=e.readUint(),c.name=e.readString(12),c.loop?(c.loop-=c.pointer,c.repeat=c.length-c.loop,0!=(1&c.repeat)&&c.repeat--):(c.loopPtr=this.mixer.memory.length,c.repeat=8),0!=(1&c.pointer)&&c.pointer--,0!=(1&c.length)&&c.length--,c.pointer+=a,c.loopPtr||(c.loopPtr=c.pointer+c.loop));else v+=e.readUint();if(e.position=24,1==e.readUshort())for(e.position=v,d=e.length-e.position,d>256&&(d=256),w=0;w<d;++w)this.arpeggios[w]=e.readUbyte()}},process:{value:function(){for(var e,t,i,a,r,s,o,l,n,h,u,d,v=0,b=this.mixer.memory;v<this.numChannels;++v){if(d=this.voices[v],h=d.sample,v<3||4==this.numChannels?(e=d.channel,this.stepEnd&&(d.step=this.song1.tracks[this.trackPos+v]),h.wave>31&&(e.pointer=h.loopPtr,e.length=h.repeat)):(e=this.mixChannel,this.stepEnd&&(d.step=this.song2.tracks[this.trackPos+(v-3)])),this.patternEnd&&(o=this.patterns[d.step.pattern+this.patternPos],o.note)){if(74!=o.effect&&(d.note=o.note,o.sample&&(h=d.sample=this.samples[o.sample])),d.val1=o.effect<64?1:o.effect-62,d.val2=o.param,i=d.step.transpose+h.finetune,12!=d.val1?(d.pitch=o.effect,1==d.val1&&(i+=d.pitch,d.period=i<0?0:p[i])):(d.pitch=o.note,i+=d.pitch,d.period=i<0?0:p[i]),11==d.val1&&(h.arpeggio=7&d.val2),12!=d.val1)if(h.wave>31)e.pointer=h.pointer,e.length=h.length,e.enabled=0,d.mixPtr=h.pointer,d.mixEnd=h.pointer+h.length,d.mixMute=0;else if(t=h.wave<<7,e.pointer=t,e.length=h.waveLen,10!=d.val1&&(e.enabled=0),4==this.numChannels&&0!=h.effect&&2!=d.val1&&4!=d.val1){for(r=t+128,l=h.source1<<7,a=t;a<r;++a)b[a]=b[l++];h.effectStep=0,d.effectCtr=h.effectSpeed}3!=d.val1&&4!=d.val1&&12!=d.val1&&(d.volumeCtr=1,d.volumeStep=0),d.arpeggioStep=0,d.pitchCtr=h.pitchDelay,d.pitchStep=0,d.portamento=0}switch(d.val1){case 0:break;case 5:u=d.val2,u>0&&u<65&&(this.patternLen=u);break;case 6:if(u=15&d.val2,u|=u<<4,0==d.val2||d.val2>15)break;this.speed=u;break;case 7:this.mixer.filter.active=1;break;case 8:this.mixer.filter.active=0;break;case 13:if(d.val1=0,0==(u=15&d.val2))break;if(0==(u=240&d.val2))break;this.speed=d.val2}}for(v=0;v<this.numChannels;++v){if(d=this.voices[v],h=d.sample,4==this.numChannels){if(e=d.channel,h.wave<32&&h.effect&&!h.effectDone)if(h.effectDone=1,d.effectCtr)d.effectCtr--;else switch(d.effectCtr=h.effectSpeed,t=h.wave<<7,h.effect){case 1:for(a=0;a<127;++a)u=b[t],u+=b[t+1],b[t++]=u>>1;break;case 2:for(l=h.source1<<7,n=h.source2<<7,i=h.effectStep,r=h.waveLen,h.effectStep=127&++h.effectStep,a=0;a<r;++a)u=b[l++],u+=b[n+i],b[t++]=u>>1,i=127&++i;break;case 3:for(u=b[t],a=0;a<127;++a)b[t]=b[++t];b[t]=u;break;case 4:for(t+=127,u=b[t],a=0;a<127;++a)b[t]=b[--t];b[t]=u;break;case 5:for(i=u=t,a=0;a<64;++a)b[i++]=b[t++],t++;for(i=t=u,i+=64,a=0;a<64;++a)b[i++]=b[t++];break;case 6:for(l=t+64,t+=128,a=0;a<64;++a)b[--t]=b[--l],b[--t]=b[l];break;case 7:t+=h.effectStep,b[t]=1+~b[t],++h.effectStep>=h.waveLen&&(h.effectStep=0);break;case 8:for(h.effectStep=127&++h.effectStep,n=(h.source2<<7)+h.effectStep,i=b[n],r=h.waveLen,u=3,a=0;a<r;++a)l=b[t]+u,l<-128?l+=256:l>127&&(l-=256),b[t++]=l,u+=i,u<-128?u+=256:u>127&&(u-=256);break;case 9:for(n=h.source2<<7,r=h.waveLen,a=0;a<r;++a)u=b[n++],u+=b[t],u>127&&(u-=256),b[t++]=u;break;case 10:for(a=0;a<126;++a)u=3*b[t++],u+=b[t+1],b[t]=u>>2;break;case 11:for(l=h.source1<<7,n=h.source2<<7,r=h.waveLen,h.effectStep=127&++h.effectStep,u=h.effectStep,u>=64&&(u=127-u),i=63&(255^u),a=0;a<r;++a)s=b[l++]*u,s+=b[n++]*i,b[t++]=s>>6;break;case 12:for(l=h.source1<<7,n=h.source2<<7,r=h.waveLen,h.effectStep=31&++h.effectStep,u=h.effectStep,u>=16&&(u=31-u),i=15&(255^u),a=0;a<r;++a)s=b[l++]*u,s+=b[n++]*i,b[t++]=s>>4;break;case 13:for(a=0;a<126;++a)u=b[t++],u+=b[t+1],b[t]=u>>1;break;case 14:i=t+h.effectStep,b[i]=1+~b[i],i=h.effectStep+h.source2&h.waveLen-1,i+=t,b[i]=1+~b[i],++h.effectStep>=h.waveLen&&(h.effectStep=0);break;case 15:for(i=t,a=0;a<127;++a)u=b[t],u+=b[t+1],b[t++]=u>>1;if(t=i,++h.effectStep==h.source2){for(h.effectStep=0,i=u=t,a=0;a<64;++a)b[i++]=b[t++],t++;for(i=t=u,i+=64,a=0;a<64;++a)b[i++]=b[t++]}}}else e=v<3?d.channel:this.mixChannel;d.volumeCtr&&0==--d.volumeCtr&&(d.volumeCtr=h.volumeSpeed,d.volumeStep=127&++d.volumeStep,d.volumeStep||h.volumeLoop?(i=d.volumeStep+(h.volume<<7),u=1+~(b[i]+129),d.volume=(255&u)>>2,e.volume=d.volume):d.volumeCtr=0),u=d.note,h.arpeggio&&(i=d.arpeggioStep+(h.arpeggio<<5),u+=this.arpeggios[i],d.arpeggioStep=31&++d.arpeggioStep),i=u+d.step.transpose+h.finetune,d.finalPeriod=p[i],t=d.finalPeriod,1!=d.val1&&12!=d.val1||(u=1+~d.val2,d.portamento+=u,d.finalPeriod+=d.portamento,d.val2&&(u<0&&d.finalPeriod<=d.period||u>=0&&d.finalPeriod>=d.period)&&(d.portamento=d.period-t,d.val2=0)),h.pitch&&(d.pitchCtr?d.pitchCtr--:(i=d.pitchStep,d.pitchStep=127&++d.pitchStep,0==d.pitchStep&&(d.pitchStep=h.pitchLoop),i+=h.pitch<<7,u=b[i],d.finalPeriod+=1+~u)),e.period=d.finalPeriod}if(this.numChannels>4){for(l=this.buffer1,this.buffer1=this.buffer2,this.buffer2=l,e=this.mixer.channels[3],e.pointer=l,v=3;v<7;++v)d=this.voices[v],d.mixStep=0,d.finalPeriod<125?(d.mixMute=1,d.mixSpeed=0):(a=(d.finalPeriod<<8)/this.mixPeriod&65535,n=(256/a&255)<<8,t=256%a<<8&16777215,d.mixSpeed=(n|t/a&255)<<8),d.mixMute?d.mixVolume=0:d.mixVolume=d.volume<<8;for(v=0;v<350;++v){for(t=0,a=3;a<7;++a)d=this.voices[a],n=(255&b[d.mixPtr+(d.mixStep>>16)])+d.mixVolume,t+=this.volumes[n],d.mixStep+=d.mixSpeed;b[l++]=this.averages[t]}e.length=350,e.period=this.mixPeriod,e.volume=64}for(0==--this.tick?(this.tick=15&this.speed,this.speed=(240&this.speed)>>4,this.speed|=this.tick<<4,this.patternEnd=1,64!=++this.patternPos&&this.patternPos!=this.patternLen||(this.patternPos=0,this.stepEnd=1,this.trackPos+=4,this.trackPos==this.song1.length&&(this.trackPos=this.song1.loopStep,this.mixer.complete=1))):(this.patternEnd=0,this.stepEnd=0),v=0;v<this.numChannels;++v)d=this.voices[v],d.mixPtr+=d.mixStep>>16,h=d.sample,h.effectDone=0,d.mixPtr>=d.mixEnd&&(h.loop?d.mixPtr-=h.repeat:(d.mixPtr=0,d.mixMute=1)),v<4&&(e=d.channel,e.enabled=1)}},tables:{value:function(){var e,t,i,a,r=0,s=0,o=0,l=128;for(this.averages=new Int32Array(1024),this.volumes=new Int32Array(16384),this.mixPeriod=203;r<1024;++r)l>127&&(l-=256),this.averages[r]=l,r>383&&r<639&&(l=255&++l);for(r=0;r<64;++r){for(i=-128,a=128,t=0;t<256;++t)l=i*o/63+128,e=s+a,this.volumes[e]=255&l,0!=r&&63!=r&&a>=128&&--this.volumes[e],i++,a=255&++a;s+=256,o++}}}}),n.voices[0]=e(),n.voices[1]=e(),n.voices[2]=e(),n.voices[3]=e(),n.voices[4]=e(),n.voices[5]=e(),n.voices[6]=e(),n.arpeggios=new Uint8Array(256),n.tables(),Object.seal(n)}var r=1,o=2,p=[3220,3040,2869,2708,2556,2412,2277,2149,2029,1915,1807,1706,1610,1520,1434,1354,1278,1206,1139,1075,1014,957,904,853,805,760,717,677,639,603,569,537,507,479,452,426,403,380,359,338,319,302,285,269,254,239,226,213,201,190,179,169,160,151,142,134,127,4842,4571,4314,4072,3843,3628,3424,3232,3051,2879,2718,2565,2421,2285,2157,2036,1922,1814,1712,1616,1525,1440,1359,1283,1211,1143,1079,1018,961,907,856,808,763,720,679,641,605,571,539,509,480,453,428,404,381,360,340,321,303,286,270,254,240,227,214,202,191,180,170,160,151,143,135,127,4860,4587,4330,4087,3857,3641,3437,3244,3062,2890,2728,2574,2430,2294,2165,2043,1929,1820,1718,1622,1531,1445,1364,1287,1215,1147,1082,1022,964,910,859,811,765,722,682,644,607,573,541,511,482,455,430,405,383,361,341,322,304,287,271,255,241,228,215,203,191,181,170,161,152,143,135,128,4878,4604,4345,4102,3871,3654,3449,3255,3073,2900,2737,2584,2439,2302,2173,2051,1936,1827,1724,1628,1536,1450,1369,1292,1219,1151,1086,1025,968,914,862,814,768,725,684,646,610,575,543,513,484,457,431,407,384,363,342,323,305,288,272,256,242,228,216,203,192,181,171,161,152,144,136,128,4895,4620,4361,4116,3885,3667,3461,3267,3084,2911,2747,2593,2448,2310,2181,2058,1943,1834,1731,1634,1542,1455,1374,1297,1224,1155,1090,1029,971,917,865,817,771,728,687,648,612,578,545,515,486,458,433,408,385,364,343,324,306,289,273,257,243,229,216,204,193,182,172,162,153,144,136,129,4913,4637,4377,4131,3899,3681,3474,3279,3095,2921,2757,2603,2456,2319,2188,2066,1950,1840,1737,1639,1547,1461,1379,1301,1228,1159,1094,1033,975,920,868,820,774,730,689,651,614,580,547,516,487,460,434,410,387,365,345,325,307,290,274,258,244,230,217,205,193,183,172,163,154,145,137,129,4931,4654,4393,4146,3913,3694,3486,3291,3106,2932,2767,2612,2465,2327,2196,2073,1957,1847,1743,1645,1553,1466,1384,1306,1233,1163,1098,1037,978,923,872,823,777,733,692,653,616,582,549,518,489,462,436,411,388,366,346,326,308,291,275,259,245,231,218,206,194,183,173,163,154,145,137,130,4948,4671,4409,4161,3928,3707,3499,3303,3117,2942,2777,2621,2474,2335,2204,2081,1964,1854,1750,1651,1559,1471,1389,1311,1237,1168,1102,1040,982,927,875,826,779,736,694,655,619,584,551,520,491,463,437,413,390,368,347,328,309,292,276,260,245,232,219,206,195,184,174,164,155,146,138,130,4966,4688,4425,4176,3942,3721,3512,3315,3129,2953,2787,2631,2483,2344,2212,2088,1971,1860,1756,1657,1564,1477,1394,1315,1242,1172,1106,1044,985,930,878,829,782,738,697,658,621,586,553,522,493,465,439,414,391,369,348,329,310,293,277,261,246,233,219,207,196,185,174,164,155,146,138,131,4984,4705,4441,4191,3956,3734,3524,3327,3140,2964,2797,2640,2492,2352,2220,2096,1978,1867,1762,1663,1570,1482,1399,1320,1246,1176,1110,1048,989,934,881,832,785,741,699,660,623,588,555,524,495,467,441,416,392,370,350,330,312,294,278,262,247,233,220,208,196,185,175,165,156,147,139,131,5002,4722,4457,4206,3970,3748,3537,3339,3151,2974,2807,2650,2501,2361,2228,2103,1985,1874,1769,1669,1576,1487,1404,1325,1251,1180,1114,1052,993,937,884,835,788,744,702,662,625,590,557,526,496,468,442,417,394,372,351,331,313,295,279,263,248,234,221,209,197,186,175,166,156,148,139,131,5020,4739,4473,4222,3985,3761,3550,3351,3163,2985,2818,2659,2510,2369,2236,2111,1992,1881,1775,1675,1581,1493,1409,1330,1255,1185,1118,1055,996,940,887,838,791,746,704,665,628,592,559,528,498,470,444,419,395,373,352,332,314,296,280,264,249,235,222,209,198,187,176,166,157,148,140,132,5039,4756,4489,4237,3999,3775,3563,3363,3174,2996,2828,2669,2519,2378,2244,2118,2e3,1887,1781,1681,1587,1498,1414,1335,1260,1189,1122,1059,1e3,944,891,841,794,749,707,667,630,594,561,530,500,472,445,420,397,374,353,334,315,297,281,265,250,236,223,210,198,187,177,167,157,149,140,132,5057,4773,4505,4252,4014,3788,3576,3375,3186,3007,2838,2679,2528,2387,2253,2126,2007,1894,1788,1688,1593,1503,1419,1339,1264,1193,1126,1063,1003,947,894,844,796,752,710,670,632,597,563,532,502,474,447,422,398,376,355,335,316,298,282,266,251,237,223,211,199,188,177,167,158,149,141,133,5075,4790,4521,4268,4028,3802,3589,3387,3197,3018,2848,2688,2538,2395,2261,2134,2014,1901,1794,1694,1599,1509,1424,1344,1269,1198,1130,1067,1007,951,897,847,799,754,712,672,634,599,565,533,504,475,449,423,400,377,356,336,317,299,283,267,252,238,224,212,200,189,178,168,159,150,141,133,5093,4808,4538,4283,4043,3816,3602,3399,3209,3029,2859,2698,2547,2404,2269,2142,2021,1908,1801,1700,1604,1514,1429,1349,1273,1202,1134,1071,1011,954,900,850,802,757,715,675,637,601,567,535,505,477,450,425,401,379,357,337,318,300,284,268,253,238,225,212,201,189,179,169,159,150,142,134];window.neoart.DMPlayer=a}(),function(){function e(e,t){return Object.create(null,{index:{value:e,writable:!0},bitFlag:{value:t,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},sample:{value:null,writable:!0},trackPtr:{value:0,writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},frqseqPtr:{value:0,writable:!0},frqseqPos:{value:0,writable:!0},volseqPtr:{value:0,writable:!0},volseqPos:{value:0,writable:!0},volseqSpeed:{value:0,writable:!0},volseqCounter:{value:0,writable:!0},halve:{value:0,writable:!0},speed:{value:0,writable:!0},tick:{value:0,writable:!0},busy:{value:0,writable:!0},flags:{value:0,writable:!0},note:{value:0,writable:!0},period:{value:0,writable:!0},transpose:{value:0,writable:!0},portaDelay:{value:0,writable:!0},portaDelta:{value:0,writable:!0},portaSpeed:{value:0,writable:!0},vibrato:{value:0,writable:!0},vibratoDelta:{value:0,writable:!0},vibratoSpeed:{value:0,writable:!0},vibratoDepth:{value:0,writable:!0},initialize:{value:function(){this.channel=null,this.sample=null,this.trackPtr=0,this.trackPos=0,this.patternPos=0,this.frqseqPtr=0,this.frqseqPos=0,this.volseqPtr=0,this.volseqPos=0,this.volseqSpeed=0,this.volseqCounter=0,this.halve=0,this.speed=0,this.tick=1,this.busy=-1,this.flags=0,this.note=0,this.period=0,this.transpose=0,this.portaDelay=0,this.portaDelta=0,this.portaSpeed=0,this.vibrato=0,this.vibratoDelta=0,this.vibratoSpeed=0,this.vibratoDepth=0}}})}function t(){var e=n();return Object.defineProperties(e,{relative:{value:0,writable:!0},finetune:{value:0,writable:!0}}),Object.seal(e)}function i(){return Object.create(null,{speed:{value:0,writable:!0},delay:{value:0,writable:!0},tracks:{value:null,writable:!0}})}function a(a){var r=u(a);return Object.defineProperties(r,{id:{value:"DWPlayer"},songs:{value:[],writable:!0},samples:{value:[],writable:!0},stream:{value:null,writable:!0},song:{value:null,writable:!0},songvol:{value:0,writable:!0},master:{value:0,writable:!0},periods:{value:0,writable:!0},frqseqs:{value:0,writable:!0},volseqs:{value:0,writable:!0},transpose:{value:0,writable:!0},slower:{value:0,writable:!0},slowerCounter:{value:0,writable:!0},delaySpeed:{value:0,writable:!0},delayCounter:{value:0,writable:!0},fadeSpeed:{value:0,writable:!0},fadeCounter:{value:0,writable:!0},wave:{value:null,writable:!0},waveCenter:{value:0,writable:!0},waveLo:{value:0,writable:!0},waveHi:{value:0,writable:!0},waveDir:{value:0,writable:!0},waveLen:{value:0,writable:!0},wavePos:{value:0,writable:!0},waveRateNeg:{value:0,writable:!0},waveRatePos:{value:0,writable:!0},voices:{value:[],writable:!0},active:{value:0,writable:!0},complete:{value:0,writable:!0},variant:{value:0,writable:!0},base:{value:0,writable:!0},com2:{value:0,writable:!0},com3:{value:0,writable:!0},com4:{value:0,writable:!0},readMix:{value:"",writable:!0},readLen:{value:0,writable:!0},initialize:{value:function(){var e,t,i=this.voices[this.active];if(this.reset(),this.song=this.songs[this.playSong],this.songvol=this.master,this.speed=this.song.speed,this.transpose=0,this.slowerCounter=6,this.delaySpeed=this.song.delay,this.delayCounter=0,this.fadeSpeed=0,this.fadeCounter=0,this.wave){for(this.waveDir=0,this.wavePos=this.wave.pointer+this.waveCenter,e=this.wave.pointer,t=this.wavePos;e<t;++e)this.mixer.memory[e]=this.waveRateNeg;for(t+=this.waveCenter;e<t;++e)this.mixer.memory[e]=this.waveRatePos}for(;i;)i.initialize(),i.channel=this.mixer.channels[i.index],i.sample=this.samples[0],this.complete+=i.bitFlag,i.trackPtr=this.song.tracks[i.index],i.trackPos=this.readLen,this.stream.position=i.trackPtr,i.patternPos=this.base+this.stream[this.readMix](),this.frqseqs&&(this.stream.position=this.frqseqs,i.frqseqPtr=this.base+this.stream.readUshort(),i.frqseqPos=i.frqseqPtr),i=i.next}},loader:{value:function(e){
var a,r,s,o,l,n,h,p,u,d,v,b=10;if(this.master=64,this.readMix="readUshort",this.readLen=2,this.variant=0,18663==e.readUshort()){if(e.position=4,24832!=e.readUshort())return;e.position+=e.readUshort(),this.variant=30}else e.position=0;for(;20085!=v;){switch(v=e.readUshort()){case 18426:this.base=e.position+e.readShort();break;case 24832:e.position+=2,l=e.position,24832==e.readUshort()&&(l=e.position+e.readUshort());break;case 49404:b=e.readUshort(),18==b?(this.readMix="readUint",this.readLen=4):this.variant=10,16890==e.readUshort()&&(r=e.position+e.readUshort()),4656==e.readUshort()&&(a=1);break;case 4656:e.position-=6,16890==e.readUshort()&&(r=e.position+e.readUshort(),a=1),e.position+=4;break;case 48764:this.channels=e.readUshort(),e.position+=2,14204==e.readUshort()&&(this.master=e.readUshort())}if(e.bytesAvailable<20)return}for(o=e.position,this.songs=[],n=2147483647,d=0,e.position=r;;){if(u=i(),u.tracks=new Uint32Array(this.channels),a?(u.speed=e.readUbyte(),u.delay=e.readUbyte()):u.speed=e.readUshort(),u.speed>255)break;for(s=0;s<this.channels;++s)v=this.base+e[this.readMix](),v<n&&(n=v),u.tracks[s]=v;if(this.songs[d++]=u,n-e.position<b)break}if(d&&(this.lastSong=this.songs.length-1,e.position=l,18987==e.readUshort())){for(r=b=0,this.wave=null;20085!=v;)switch(v=e.readUshort()){case 19450:if(r)break;l=e.position+e.readShort(),e.position++,d=e.readUbyte(),e.position-=10,v=e.readUshort(),h=e.position,16890==v||8314==v?r=e.position+e.readUshort():53500==v&&(r=64+e.readUshort(),e.position-=18,r+=e.position+e.readUshort()),e.position=h;break;case 33987:if(b)break;for(e.position+=4,v=e.readUshort(),56060==v?b=e.readUshort():56316==v&&(b=e.readUint()),12==b&&this.variant<30&&(this.variant=20),h=e.position,this.samples=[],this.samples.length=++d,e.position=r,s=0;s<d;++s)p=t(),p.length=e.readUint(),p.relative=parseInt(3579545/e.readUshort()),p.pointer=this.mixer.store(e,p.length),v=e.position,e.position=l+s*b+4,p.loopPtr=e.readInt(),0==this.variant?(e.position+=6,p.volume=e.readUshort()):10==this.variant&&(e.position+=4,p.volume=e.readUshort(),p.finetune=e.readByte()),e.position=v,this.samples[s]=p;this.mixer.loopLen=64,e.length=r,e.position=h;break;case 8314:if(v=e.position+e.readShort(),12860!=e.readUshort()){e.position-=2;break}this.wave=this.samples[parseInt((v-l)/b)],this.waveCenter=e.readUshort()+1<<1,e.position+=2,this.waveRateNeg=e.readByte(),e.position+=12,this.waveRatePos=e.readByte();break;case 1131:case 1643:d=e.readUshort(),p=this.samples[parseInt((e.readUshort()-l)/b)],1643==v?p.relative+=d:p.relative-=d}if(this.samples.length){for(e.position=o,this.periods=0,this.frqseqs=0,this.volseqs=0,this.slower=0,this.com2=176,this.com3=160,this.com4=144;e.bytesAvailable>16;)switch(v=e.readUshort()){case 18426:if(e.position+=2,18987!=e.readUshort())break;if(h=e.position,e.position+=4,4154==(v=e.readUshort())){if(e.position+=4,49404==e.readUshort()){for(v=e.readUshort(),d=this.songs.length,s=0;s<d;++s)this.songs[s].delay*=v;e.position+=6}}else 21291==v&&(e.position-=8);v=e.readUshort(),18987==v&&(e.position=this.base+e.readUshort(),this.slower=e.readByte()),e.position=h;break;case 3179:e.position-=6,v=e.readUshort(),21611==v||21099==v?(e.position+=4,this.waveHi=this.wave.pointer+e.readUshort()):21867!=v&&21355!=v||(e.position+=4,this.waveLo=this.wave.pointer+e.readUshort()),this.waveLen=v<21611?1:2;break;case 32256:case 32257:case 32258:case 32259:if(this.active=15&v,d=this.channels-1,this.active)for(this.voices[0].next=null,s=d;s>0;)this.voices[s].next=this.voices[--s];else for(this.voices[d].next=null,s=0;s<d;)this.voices[s].next=this.voices[++s];break;case 3176:e.position+=22,3089==e.readUshort()&&(this.variant=40);break;case 12845:h=e.position,v=e.readUshort(),10!=v&&12!=v||(e.position-=8,17914==e.readUshort()&&(this.periods=e.position+e.readUshort())),e.position=h+2;break;case 1024:case 1088:case 1536:v=e.readUshort(),192==v||64==v?(this.com2=192,this.com3=176,this.com4=160):v==this.com3?(e.position+=2,17914==e.readUshort()&&(this.volseqs=e.position+e.readUshort(),this.variant<40&&(this.variant=30))):v==this.com4&&(e.position+=2,17914==e.readUshort()&&(this.frqseqs=e.position+e.readUshort()));break;case 20211:e.position+=2;case 20178:n=e.position,e.position-=10,e.position+=e.readUshort(),h=e.position,e.position=h+2,e.position=this.base+e.readUshort()+10,18964==e.readUshort()&&(this.variant=41),e.position=h+16,v=this.base+e.readUshort(),v>n&&v<h&&(e.position=v,v=e.readUshort(),20712==v?this.variant=21:5977==v&&(this.variant=11)),e.position=h+20,v=this.base+e.readUshort(),v>n&&v<h&&(e.position=v+2,18560!=e.readUshort()&&(this.variant=31)),e.position=h+26,v=e.readUshort(),v>n&&v<h&&(this.variant=32),this.frqseqs&&(e.position=e.length)}this.periods&&(this.com2-=256,this.com3-=256,this.com4-=256,this.stream=e,this.version=1)}}}},process:{value:function(){var e,t,i,a,r,s,o=this.voices[this.active];if(this.slower&&0==--this.slowerCounter)return void(this.slowerCounter=6);if((this.delayCounter+=this.delaySpeed)>255)return void(this.delayCounter-=256);if(this.fadeSpeed&&(0==--this.fadeCounter&&(this.fadeCounter=this.fadeSpeed,this.songvol--),!this.songvol)){if(!this.loopSong)return void(this.mixer.complete=1);this.initialize()}for(this.wave&&(this.waveDir?(this.mixer.memory[this.wavePos++]=this.waveRatePos,this.waveLen>1&&(this.mixer.memory[this.wavePos++]=this.waveRatePos),(this.wavePos-=this.waveLen<<1)==this.waveLo&&(this.waveDir=0)):(this.mixer.memory[this.wavePos++]=this.waveRateNeg,this.waveLen>1&&(this.mixer.memory[this.wavePos++]=this.waveRateNeg),this.wavePos==this.waveHi&&(this.waveDir=1)));o;){if(e=o.channel,this.stream.position=o.patternPos,a=o.sample,o.busy||(o.busy=1,a.loopPtr<0?(e.pointer=this.mixer.loopPtr,e.length=this.mixer.loopLen):(e.pointer=a.pointer+a.loopPtr,e.length=a.length-a.loopPtr)),0==--o.tick)for(o.flags=0,t=1;t>0;)if((r=this.stream.readByte())<0)if(r>=-32)o.speed=this.speed*(r+33);else if(r>=this.com2)r-=this.com2,o.sample=a=this.samples[r];else if(r>=this.com3)i=this.stream.position,this.stream.position=this.volseqs+(r-this.com3<<1),this.stream.position=this.base+this.stream.readUshort(),o.volseqPtr=this.stream.position,this.stream.position--,o.volseqSpeed=this.stream.readUbyte(),this.stream.position=i;else if(r>=this.com4)i=this.stream.position,this.stream.position=this.frqseqs+(r-this.com4<<1),o.frqseqPtr=this.base+this.stream.readUshort(),o.frqseqPos=o.frqseqPtr,this.stream.position=i;else switch(r){case-128:this.stream.position=o.trackPtr+o.trackPos,r=this.stream[this.readMix](),r?(this.stream.position=this.base+r,o.trackPos+=this.readLen):(this.stream.position=o.trackPtr,this.stream.position=this.base+this.stream[this.readMix](),o.trackPos=this.readLen,this.loopSong||(this.complete&=~o.bitFlag,this.complete||(this.mixer.complete=1)));break;case-127:this.variant>0&&(o.portaDelta=0),o.portaSpeed=this.stream.readByte(),o.portaDelay=this.stream.readUbyte(),o.flags|=2;break;case-126:o.tick=o.speed,o.patternPos=this.stream.position,41==this.variant?(o.busy=1,e.enabled=0):(e.pointer=this.mixer.loopPtr,e.length=this.mixer.loopLen),t=0;break;case-125:this.variant>0&&(o.tick=o.speed,o.patternPos=this.stream.position,e.enabled=1,t=0);break;case-124:this.mixer.complete=1;break;case-123:this.variant>0&&(this.transpose=this.stream.readByte());break;case-122:o.vibrato=-1,o.vibratoSpeed=this.stream.readUbyte(),o.vibratoDepth=this.stream.readUbyte(),o.vibratoDelta=0;break;case-121:o.vibrato=0;break;case-120:21==this.variant?o.halve=1:11==this.variant?this.fadeSpeed=this.stream.readUbyte():o.transpose=this.stream.readByte();break;case-119:21==this.variant?o.halve=0:(o.trackPtr=this.base+this.stream.readUshort(),o.trackPos=0);break;case-118:31==this.variant?this.delaySpeed=this.stream.readUbyte():this.speed=this.stream.readUbyte();break;case-117:this.fadeSpeed=this.stream.readUbyte(),this.fadeCounter=this.fadeSpeed;break;case-116:r=this.stream.readUbyte(),32!=this.variant&&(this.songvol=r)}else o.patternPos=this.stream.position,o.note=r+=a.finetune,o.tick=o.speed,o.busy=0,this.variant>=20?(r=r+this.transpose+o.transpose&255,this.stream.position=o.volseqPtr,s=this.stream.readUbyte(),o.volseqPos=this.stream.position,o.volseqCounter=o.volseqSpeed,o.halve&&(s>>=1),s=s*this.songvol>>6):s=a.volume,e.pointer=a.pointer,e.length=a.length,e.volume=s,this.stream.position=this.periods+(r<<1),r=this.stream.readUshort()*a.relative>>10,this.variant<10&&(o.portaDelta=r),e.period=r,e.enabled=1,t=0;else 1==o.tick?this.variant<30?e.enabled=0:131!=(r=this.stream.readUbyte())&&(this.variant<40||r<224||131!=this.stream.readUbyte())&&(e.enabled=0):0==this.variant?2&o.flags&&(o.portaDelay?o.portaDelay--:(o.portaDelta-=o.portaSpeed,e.period=o.portaDelta)):(this.stream.position=o.frqseqPos,r=this.stream.readByte(),r<0&&(r&=127,this.stream.position=o.frqseqPtr),o.frqseqPos=this.stream.position,r=r+o.note+this.transpose+o.transpose&255,this.stream.position=this.periods+(r<<1),r=this.stream.readUshort()*a.relative>>10,2&o.flags&&(o.portaDelay?o.portaDelay--:(o.portaDelta+=o.portaSpeed,r-=o.portaDelta)),o.vibrato&&(o.vibrato>0?(o.vibratoDelta-=o.vibratoSpeed,o.vibratoDelta||(o.vibrato^=2147483648)):(o.vibratoDelta+=o.vibratoSpeed,o.vibratoDelta==o.vibratoDepth&&(o.vibrato^=2147483648)),o.vibratoDelta||(o.vibrato^=1),1&o.vibrato?r+=o.vibratoDelta:r-=o.vibratoDelta),e.period=r,this.variant>=20&&--o.volseqCounter<0&&(this.stream.position=o.volseqPos,s=this.stream.readByte(),s>=0&&(o.volseqPos=this.stream.position),o.volseqCounter=o.volseqSpeed,s&=127,o.halve&&(s>>=1),e.volume=s*this.songvol>>6));o=o.next}}}}),r.voices[0]=e(0,1),r.voices[1]=e(1,2),r.voices[2]=e(2,4),r.voices[3]=e(3,8),Object.seal(r)}window.neoart.DWPlayer=a}(),function(){function t(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},sample:{value:null,writable:!0},enabled:{value:0,writable:!0},pattern:{value:0,writable:!0},soundTranspose:{value:0,writable:!0},transpose:{value:0,writable:!0},patStep:{value:0,writable:!0},frqStep:{value:0,writable:!0},frqPos:{value:0,writable:!0},frqSustain:{value:0,writable:!0},frqTranspose:{value:0,writable:!0},volStep:{value:0,writable:!0},volPos:{value:0,writable:!0},volCtr:{value:0,writable:!0},volSpeed:{value:0,writable:!0},volSustain:{value:0,writable:!0},note:{value:0,writable:!0},pitch:{value:0,writable:!0},volume:{value:0,writable:!0},pitchBendFlag:{value:0,writable:!0},pitchBendSpeed:{value:0,writable:!0},pitchBendTime:{value:0,writable:!0},portamentoFlag:{value:0,writable:!0},portamento:{value:0,writable:!0},volBendFlag:{value:0,writable:!0},volBendSpeed:{value:0,writable:!0},volBendTime:{value:0,writable:!0},vibratoFlag:{value:0,writable:!0},vibratoSpeed:{value:0,writable:!0},vibratoDepth:{value:0,writable:!0},vibratoDelay:{value:0,writable:!0},vibrato:{value:0,writable:!0},initialize:{value:function(){this.sample=null,this.enabled=0,this.pattern=0,this.soundTranspose=0,this.transpose=0,this.patStep=0,this.frqStep=0,this.frqPos=0,this.frqSustain=0,this.frqTranspose=0,this.volStep=0,this.volPos=0,this.volCtr=1,this.volSpeed=1,this.volSustain=0,this.note=0,this.pitch=0,this.volume=0,this.pitchBendFlag=0,this.pitchBendSpeed=0,this.pitchBendTime=0,this.portamentoFlag=0,this.portamento=0,this.volBendFlag=0,this.volBendSpeed=0,this.volBendTime=0,this.vibratoFlag=0,this.vibratoSpeed=0,this.vibratoDepth=0,this.vibratoDelay=0,this.vibrato=0}},volumeBend:{value:function(){this.volBendFlag^=1,this.volBendFlag&&(this.volBendTime--,this.volume+=this.volBendSpeed,(this.volume<0||this.volume>64)&&(this.volBendTime=0))}}})}function i(i){var l=u(i);return Object.defineProperties(l,{id:{value:"FCPlayer"},seqs:{value:null,writable:!0},pats:{value:null,writable:!0},vols:{value:null,writable:!0},frqs:{value:null,writable:!0},length:{value:0,writable:!0},samples:{value:[],writable:!0},voices:{value:[],writable:!0},initialize:{value:function(){var e=this.voices[0];for(this.reset(),this.seqs.position=0,this.pats.position=0,this.vols.position=0,this.frqs.position=0;e;)e.initialize(),e.channel=this.mixer.channels[e.index],e.pattern=this.seqs.readUbyte()<<6,e.transpose=this.seqs.readByte(),e.soundTranspose=this.seqs.readByte(),e=e.next;this.speed=this.seqs.readUbyte(),this.speed||(this.speed=3),this.tick=this.speed}},loader:{value:function(t){var i,s,l,h,p,u,d,v,b,c;if("SMOD"==(s=t.readString(4)))this.version=a;else{if("FC14"!=s)return;this.version=r}for(t.position=4,this.length=t.readUint(),t.position=this.version==a?100:180,this.seqs=e(new ArrayBuffer(this.length)),t.readBytes(this.seqs,0,this.length),this.length=this.length/13>>0,t.position=12,h=t.readUint(),t.position=8,t.position=t.readUint(),this.pats=e(new ArrayBuffer(h+1)),t.readBytes(this.pats,0,h),t.position=20,h=t.readUint(),t.position=16,t.position=t.readUint(),this.frqs=e(new ArrayBuffer(h+9)),this.frqs.writeInt(16777216),this.frqs.writeInt(225),t.readBytes(this.frqs,8,h),this.frqs.position=this.frqs.length-1,this.frqs.writeByte(225),this.frqs.position=0,t.position=28,h=t.readUint(),t.position=24,t.position=t.readUint(),this.vols=e(new ArrayBuffer(h+8)),this.vols.writeInt(16777216),this.vols.writeInt(225),t.readBytes(this.vols,8,h),t.position=32,v=t.readUint(),t.position=40,this.version==a?(this.samples.length=57,p=0):(this.samples.length=200,p=2),i=0;i<10;++i)if((h=t.readUshort()<<1)>0)if(u=t.position,t.position=v,"SSMP"==(s=t.readString(4))){for(b=h,l=0;l<10;++l)t.readInt(),h=t.readUshort()<<1,h>0?(d=n(),d.length=h+2,d.loop=t.readUshort(),d.repeat=t.readUshort()<<1,d.loop+d.repeat>d.length&&(d.repeat=d.length-d.loop),v+d.length>t.length&&(d.length=t.length-v),d.pointer=this.mixer.store(t,d.length,v+c),d.loopPtr=d.pointer+d.loop,this.samples[100+10*i+l]=d,c+=d.length,t.position+=6):t.position+=10;v+=b+2,t.position=u+4}else t.position=u,d=n(),d.length=h+p,d.loop=t.readUshort(),d.repeat=t.readUshort()<<1,d.loop+d.repeat>d.length&&(d.repeat=d.length-d.loop),v+d.length>t.length&&(d.length=t.length-v),d.pointer=this.mixer.store(t,d.length,v),d.loopPtr=d.pointer+d.loop,this.samples[i]=d,v+=d.length;else t.position+=4;if(this.version==a)for(p=0,b=47,i=10;i<57;++i)for(d=n(),d.length=o[p++]<<1,d.loop=0,d.repeat=d.length,u=this.mixer.memory.length,d.pointer=u,d.loopPtr=u,this.samples[i]=d,h=u+d.length,l=u;l<h;++l)this.mixer.memory[l]=o[b++];else for(t.position=36,v=t.readUint(),t.position=100,i=10;i<90;++i)(h=t.readUbyte()<<1)<2||(d=n(),d.length=h,d.loop=0,d.repeat=d.length,v+d.length>t.length&&(d.length=t.length-v),d.pointer=this.mixer.store(t,d.length,v),d.loopPtr=d.pointer,this.samples[i]=d,v+=d.length);this.length*=13}},process:{value:function(){var e,t,i,r,o,l,n,h,p,u=this.voices[0];if(0==--this.tick){for(e=this.seqs.position;u;)t=u.channel,this.pats.position=u.pattern+u.patStep,p=this.pats.readUbyte(),(u.patStep>=64||73==p)&&(this.seqs.position==this.length&&(this.seqs.position=0,this.mixer.complete=1),u.patStep=0,u.pattern=this.seqs.readUbyte()<<6,u.transpose=this.seqs.readByte(),u.soundTranspose=this.seqs.readByte(),this.pats.position=u.pattern,p=this.pats.readUbyte()),r=this.pats.readUbyte(),this.frqs.position=0,this.vols.position=0,0!=p&&(u.note=127&p,u.pitch=0,u.portamento=0,u.enabled=t.enabled=0,p=8+((63&r)+u.soundTranspose<<6),p>=0&&p<this.vols.length&&(this.vols.position=p),u.volStep=0,u.volSpeed=u.volCtr=this.vols.readUbyte(),u.volSustain=0,u.frqPos=8+(this.vols.readUbyte()<<6),u.frqStep=0,u.frqSustain=0,u.vibratoFlag=0,u.vibratoSpeed=this.vols.readUbyte(),u.vibratoDepth=u.vibrato=this.vols.readUbyte(),u.vibratoDelay=this.vols.readUbyte(),u.volPos=this.vols.position),64&r?u.portamento=0:128&r&&(u.portamento=this.pats[this.pats.position+1],this.version==a&&(u.portamento<<=1)),u.patStep+=2,u=u.next;this.seqs.position!=e&&(p=this.seqs.readUbyte())&&(this.speed=p),this.tick=this.speed}for(u=this.voices[0];u;){t=u.channel;do{if(l=0,u.frqSustain){u.frqSustain--;break}this.frqs.position=u.frqPos+u.frqStep;do{if(o=0,!this.frqs.bytesAvailable)break;if(225==(r=this.frqs.readUbyte()))break;switch(224==r&&(u.frqStep=63&this.frqs.readUbyte(),this.frqs.position=u.frqPos+u.frqStep,r=this.frqs.readUbyte()),r){case 226:t.enabled=0,u.enabled=1,u.volCtr=1,u.volStep=0;case 228:h=this.samples[this.frqs.readUbyte()],h?(t.pointer=h.pointer,t.length=h.length):u.enabled=0,u.sample=h,u.frqStep+=2;break;case 233:p=100+10*this.frqs.readUbyte(),h=this.samples[p+this.frqs.readUbyte()],h&&(t.enabled=0,t.pointer=h.pointer,t.length=h.length,u.enabled=1),u.sample=h,u.volCtr=1,u.volStep=0,u.frqStep+=3;break;case 231:o=1,u.frqPos=8+(this.frqs.readUbyte()<<6),u.frqPos>=this.frqs.length&&(u.frqPos=0),u.frqStep=0,this.frqs.position=u.frqPos;break;case 234:u.pitchBendSpeed=this.frqs.readByte(),u.pitchBendTime=this.frqs.readUbyte(),u.frqStep+=3;break;case 232:l=1,u.frqSustain=this.frqs.readUbyte(),u.frqStep+=2;break;case 227:u.vibratoSpeed=this.frqs.readUbyte(),u.vibratoDepth=this.frqs.readUbyte(),u.frqStep+=3}l||o||(this.frqs.position=u.frqPos+u.frqStep,u.frqTranspose=this.frqs.readByte(),u.frqStep++)}while(o)}while(l);if(u.volSustain)u.volSustain--;else if(u.volBendTime)u.volumeBend();else if(0==--u.volCtr){u.volCtr=u.volSpeed;do{if(o=0,this.vols.position=u.volPos+u.volStep,!this.vols.bytesAvailable)break;if(225==(r=this.vols.readUbyte()))break;switch(r){case 234:u.volBendSpeed=this.vols.readByte(),u.volBendTime=this.vols.readUbyte(),u.volStep+=3,u.volumeBend();break;case 232:u.volSustain=this.vols.readUbyte(),u.volStep+=2;break;case 224:o=1,p=63&this.vols.readUbyte(),u.volStep=p-5;break;default:u.volume=r,u.volStep++}}while(o)}if(r=u.frqTranspose,r>=0&&(r+=u.note+u.transpose),r&=127,n=s[r],u.vibratoDelay)u.vibratoDelay--;else{for(p=u.vibrato,u.vibratoFlag?(i=u.vibratoDepth<<1,(p+=u.vibratoSpeed)>i&&(p=i,u.vibratoFlag=0)):(p-=u.vibratoSpeed)<0&&(p=0,u.vibratoFlag=1),u.vibrato=p,p-=u.vibratoDepth,e=160+(r<<1);e<256;)p<<=1,e+=24;n+=p}u.portamentoFlag^=1,u.portamentoFlag&&u.portamento&&(u.portamento>31?u.pitch+=31&u.portamento:u.pitch-=u.portamento),u.pitchBendFlag^=1,u.pitchBendFlag&&u.pitchBendTime&&(u.pitchBendTime--,u.pitch-=u.pitchBendSpeed),n+=u.pitch,n<113?n=113:n>3424&&(n=3424),t.period=n,t.volume=u.volume,u.sample&&(h=u.sample,t.enabled=u.enabled,t.pointer=h.loopPtr,t.length=h.repeat),u=u.next}}}}),l.voices[0]=t(0),l.voices[0].next=l.voices[1]=t(1),l.voices[1].next=l.voices[2]=t(2),l.voices[2].next=l.voices[3]=t(3),Object.seal(l)}var a=1,r=2,s=[1712,1616,1524,1440,1356,1280,1208,1140,1076,1016,960,906,856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,113,113,113,113,113,113,113,113,113,113,113,113,3424,3232,3048,2880,2712,2560,2416,2280,2152,2032,1920,1812,1712,1616,1524,1440,1356,1280,1208,1140,1076,1016,960,906,856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,113,113,113,113,113,113,113,113,113,113,113,113],o=[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,8,8,8,8,8,8,8,8,16,8,16,16,8,8,24,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,63,55,47,39,31,23,15,7,-1,7,15,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,55,47,39,31,23,15,7,-1,7,15,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,47,39,31,23,15,7,-1,7,15,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,39,31,23,15,7,-1,7,15,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,31,23,15,7,-1,7,15,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,-96,23,15,7,-1,7,15,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,-96,-104,15,7,-1,7,15,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,-96,-104,-112,7,-1,7,15,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,-96,-104,-112,-120,-1,7,15,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,-96,-104,-112,-120,-128,7,15,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,-96,-104,-112,-120,-128,-120,15,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,-96,-104,-112,-120,-128,-120,-112,23,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,-96,-104,-112,-120,-128,-120,-112,-104,31,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,-96,-104,-112,-120,-128,-120,-112,-104,-96,39,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,-96,-104,-112,-120,-128,-120,-112,-104,-96,-88,47,55,-64,-64,-48,-40,-32,-24,-16,-8,0,-8,-16,-24,-32,-40,-48,-56,-64,-72,-80,-88,-96,-104,-112,-120,-128,-120,-112,-104,-96,-88,-80,55,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,127,127,127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,127,127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,-127,127,127,127,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,127,127,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,-128,127,-128,-128,-128,-128,-128,-128,-128,-128,127,127,127,127,127,127,127,127,-128,-128,-128,-128,-128,-128,-128,127,127,127,127,127,127,127,127,127,-128,-128,-128,-128,-128,-128,127,127,127,127,127,127,127,127,127,127,-128,-128,-128,-128,-128,127,127,127,127,127,127,127,127,127,127,127,-128,-128,-128,-128,127,127,127,127,127,127,127,127,127,127,127,127,-128,-128,-128,127,127,127,127,127,127,127,127,127,127,127,127,127,-128,-128,127,127,127,127,127,127,127,127,127,127,127,127,127,127,-128,-128,127,127,127,127,127,127,127,127,127,127,127,127,127,127,-128,-128,-112,-104,-96,-88,-80,-72,-64,-56,-48,-40,-32,-24,-16,-8,0,8,16,24,32,40,48,56,64,72,80,88,96,104,112,127,-128,-128,-96,-80,-64,-48,-32,-16,0,16,32,48,64,80,96,112,69,69,121,125,122,119,112,102,97,88,83,77,44,32,24,18,4,-37,-45,-51,-58,-68,-75,-82,-88,-93,-99,-103,-109,-114,-117,-118,69,69,121,125,122,119,112,102,91,75,67,55,44,32,24,18,4,-8,-24,-37,-49,-58,-66,-80,-88,-92,-98,-102,-107,-108,-115,-125,0,0,64,96,127,96,64,32,0,-32,-64,-96,-128,-96,-64,-32,0,0,64,96,127,96,64,32,0,-32,-64,-96,-128,-96,-64,-32,-128,-128,-112,-104,-96,-88,-80,-72,-64,-56,-48,-40,-32,-24,-16,-8,0,8,16,24,32,40,48,56,64,72,80,88,96,104,112,127,-128,-128,-96,-80,-64,-48,-32,-16,0,16,32,48,64,80,96,112];window.neoart.FCPlayer=i}(),function(){function t(e,t){return Object.create(null,{index:{value:e,writable:!0},bitFlag:{value:t,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},sample:{value:null,writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},tick:{value:0,writable:!0},busy:{value:0,writable:!0},synth:{value:0,writable:!0},note:{value:0,writable:!0},period:{value:0,writable:!0},volume:{value:0,writable:!0},envelopePos:{value:0,writable:!0},sustainTime:{value:0,writable:!0},arpeggioPos:{value:0,writable:!0},arpeggioSpeed:{value:0,writable:!0},portamento:{value:0,writable:!0},portaCounter:{value:0,writable:!0},portaDelay:{value:0,writable:!0},portaFlag:{value:0,writable:!0},portaLimit:{value:0,writable:!0},portaNote:{value:0,writable:!0},portaPeriod:{value:0,writable:!0},portaSpeed:{value:0,writable:!0},vibrato:{value:0,writable:!0},vibratoDelay:{value:0,writable:!0},vibratoDepth:{value:0,writable:!0},vibratoFlag:{value:0,writable:!0},vibratoSpeed:{value:0,writable:!0},pulseCounter:{value:0,writable:!0},pulseDelay:{value:0,writable:!0},pulseDir:{value:0,writable:!0},pulsePos:{value:0,writable:!0},pulseSpeed:{value:0,writable:!0},blendCounter:{value:0,writable:!0},blendDelay:{value:0,writable:!0},blendDir:{value:0,writable:!0},blendPos:{value:0,writable:!0},initialize:{value:function(){this.channel=null,this.sample=null,this.trackPos=0,this.patternPos=0,this.tick=1,this.busy=1,this.note=0,this.period=0,this.volume=0,this.envelopePos=0,this.sustainTime=0,this.arpeggioPos=0,this.arpeggioSpeed=0,this.portamento=0,this.portaCounter=0,this.portaDelay=0,this.portaFlag=0,this.portaLimit=0,this.portaNote=0,this.portaPeriod=0,this.portaSpeed=0,this.vibrato=0,this.vibratoDelay=0,this.vibratoDepth=0,this.vibratoFlag=0,this.vibratoSpeed=0,this.pulseCounter=0,this.pulseDelay=0,this.pulseDir=0,this.pulsePos=0,this.pulseSpeed=0,this.blendCounter=0,this.blendDelay=0,this.blendDir=0,this.blendPos=0}}})}function i(){return Object.create(null,{pointer:{value:0,writable:!0},loopPtr:{value:0,writable:!0},length:{value:0,writable:!0},relative:{value:0,writable:!0},type:{value:0,writable:!0},synchro:{value:0,writable:!0},envelopeVol:{value:0,writable:!0},attackSpeed:{value:0,writable:!0},attackVol:{value:0,writable:!0},decaySpeed:{value:0,writable:!0},decayVol:{value:0,writable:!0},sustainTime:{value:0,writable:!0},releaseSpeed:{value:0,writable:!0},releaseVol:{value:0,writable:!0},arpeggio:{value:null,writable:!0},arpeggioLimit:{value:0,writable:!0},arpeggioSpeed:{value:0,writable:!0},vibratoDelay:{value:0,writable:!0},vibratoDepth:{value:0,writable:!0},vibratoSpeed:{value:0,writable:!0},pulseCounter:{value:0,writable:!0},pulseDelay:{value:0,writable:!0},pulsePosL:{value:0,writable:!0},pulsePosH:{value:0,writable:!0},pulseSpeed:{value:0,writable:!0},pulseRateNeg:{value:0,writable:!0},pulseRatePos:{value:0,writable:!0},blendCounter:{value:0,writable:!0},blendDelay:{value:0,writable:!0},blendRate:{value:0,writable:!0}})}function a(){return Object.create(null,{speed:{value:0,writable:!0},length:{value:0,writable:!0},tracks:{value:[],writable:!0}})}function r(r){var o=u(r);return Object.defineProperties(o,{id:{value:"FEPlayer"},songs:{value:[],writable:!0},samples:{value:[],writable:!0},patterns:{value:null,writable:!0},song:{value:null,writable:!0},voices:{value:[],writable:!0},complete:{value:0,writable:!0},sampFlag:{value:0,writable:!0},initialize:{value:function(){var e,t,i=this.voices[3];for(this.reset(),this.song=this.songs[this.playSong],this.speed=this.song.speed,this.complete=15;i;){for(i.initialize(),i.channel=this.mixer.channels[i.index],i.patternPos=this.song.tracks[i.index][0],e=i.synth,t=e+64;e<t;++e)this.mixer.memory[e]=0;i=i.next}}},loader:{value:function(t){for(var r,s,o,l,n,h,p,u,d,v,b,c;t.position<16;)if(c=t.readUshort(),t.position+=2,20218!=c)return;for(;t.position<1024;)if(4666==(c=t.readUshort()))t.position+=2,45057==(c=t.readUshort())&&(t.position-=4,s=t.position+t.readUshort()-2197);else if(8522==c&&(t.position+=2,18426==(c=t.readUshort()))){r=t.position+t.readShort(),this.version=1;break}if(this.version){for(t.position=s+2210,h=t.readUint(),t.position=r+h,this.samples=[],h=2147483647;h>t.position;){if(c=t.readUint()){if(c<t.position||c>=t.length){t.position-=4;break}c<h&&(h=r+c)}for(u=i(),u.pointer=c,u.loopPtr=t.readShort(),u.length=t.readUshort()<<1,u.relative=t.readUshort(),u.vibratoDelay=t.readUbyte(),t.position++,u.vibratoSpeed=t.readUbyte(),u.vibratoDepth=t.readUbyte(),u.envelopeVol=t.readUbyte(),u.attackSpeed=t.readUbyte(),u.attackVol=t.readUbyte(),u.decaySpeed=t.readUbyte(),u.decayVol=t.readUbyte(),u.sustainTime=t.readUbyte(),u.releaseSpeed=t.readUbyte(),u.releaseVol=t.readUbyte(),u.arpeggio=new Int8Array(16),o=0;o<16;++o)u.arpeggio[o]=t.readByte();if(u.arpeggioSpeed=t.readUbyte(),u.type=t.readByte(),u.pulseRateNeg=t.readByte(),u.pulseRatePos=t.readUbyte(),u.pulseSpeed=t.readUbyte(),u.pulsePosL=t.readUbyte(),u.pulsePosH=t.readUbyte(),u.pulseDelay=t.readUbyte(),u.synchro=t.readUbyte(),u.blendRate=t.readUbyte(),u.blendDelay=t.readUbyte(),u.pulseCounter=t.readUbyte(),u.blendCounter=t.readUbyte(),u.arpeggioLimit=t.readUbyte(),t.position+=12,this.samples.push(u),!t.bytesAvailable)break}if(2147483647!=h)for(this.mixer.store(t,t.length-h),n=this.samples.length,o=0;o<n;++o)u=this.samples[o],u.pointer&&(u.pointer-=r+h);for(h=this.mixer.memory.length,this.mixer.memory.length+=256,this.mixer.loopLen=100,o=0;o<4;++o)this.voices[o].synth=h,h+=64;for(t.position=s+2210,n=t.readUint(),h=t.readUint(),t.position=r+h,this.patterns=e(new ArrayBuffer(n-h)),t.readBytes(this.patterns,0,n-h),h+=r,t.position=s+2197,this.lastSong=n=t.readUbyte(),this.songs=[],this.songs.length=++n,r=s+2830,b=h-r,h=0,o=0;o<n;++o){for(v=a(),v.tracks=[],l=0;l<4;++l){for(t.position=r+h,c=t.readUshort(),d=3==l&&o==n-1?b:t.readUshort(),d=d-c>>1,d>v.length&&(v.length=d),v.tracks[l]=new Uint32Array(d),t.position=r+c,p=0;p<d;++p)v.tracks[l][p]=t.readUshort();h+=2}t.position=s+2199+o,v.speed=t.readUbyte(),this.songs[o]=v}t.clear(),t=null}}},process:{value:function(){for(var e,t,i,a,r,o,l,n,h=this.voices[3];h;){e=h.channel,r=0;do{if(this.patterns.position=h.patternPos,l=h.sample,this.sampFlag=0,h.busy||(h.busy=1,0==l.loopPtr?(e.pointer=this.mixer.loopPtr,e.length=this.mixer.loopLen):l.loopPtr>0&&(e.pointer=l.type?h.synth:l.pointer+l.loopPtr,e.length=l.length-l.loopPtr)),0==--h.tick)for(r=2;r>1;)if((n=this.patterns.readByte())<0)switch(n){case-125:h.sample=l=this.samples[this.patterns.readUbyte()],this.sampFlag=1,h.patternPos=this.patterns.position;break;case-126:this.speed=this.patterns.readUbyte(),h.patternPos=this.patterns.position;break;case-127:n=l?l.relative:428,h.portaSpeed=this.patterns.readUbyte()*this.speed,h.portaNote=this.patterns.readUbyte(),h.portaLimit=s[h.portaNote]*n>>10,h.portamento=0,h.portaDelay=this.patterns.readUbyte()*this.speed,h.portaFlag=1,h.patternPos=this.patterns.position;break;case-124:e.enabled=0,h.tick=this.speed,h.busy=1,h.patternPos=this.patterns.position,r=0;break;case-128:for(h.trackPos++;;)if(65535==(n=this.song.tracks[h.index][h.trackPos]))this.mixer.complete=1;else{if(!(n>32767)){h.patternPos=n,h.tick=1,r=1;break}h.trackPos=(32768^n)>>1,this.loopSong||(this.complete&=~h.bitFlag,this.complete||(this.mixer.complete=1))}break;default:h.tick=this.speed*-n,h.patternPos=this.patterns.position,r=0}else{if(r=0,
h.patternPos=this.patterns.position,h.note=n,h.arpeggioPos=0,h.vibratoFlag=-1,h.vibrato=0,h.arpeggioSpeed=l.arpeggioSpeed,h.vibratoDelay=l.vibratoDelay,h.vibratoSpeed=l.vibratoSpeed,h.vibratoDepth=l.vibratoDepth,1==l.type){if(this.sampFlag||2&l.synchro){for(h.pulseCounter=l.pulseCounter,h.pulseDelay=l.pulseDelay,h.pulseDir=0,h.pulsePos=l.pulsePosL,h.pulseSpeed=l.pulseSpeed,t=h.synth,a=t+l.pulsePosL;t<a;++t)this.mixer.memory[t]=l.pulseRateNeg;for(a+=l.length-l.pulsePosL;t<a;++t)this.mixer.memory[t]=l.pulseRatePos}e.pointer=h.synth}else if(2==l.type){for(h.blendCounter=l.blendCounter,h.blendDelay=l.blendDelay,h.blendDir=0,h.blendPos=1,t=l.pointer,i=h.synth,a=t+31;t<a;++t)this.mixer.memory[i++]=this.mixer.memory[t];e.pointer=h.synth}else e.pointer=l.pointer;h.tick=this.speed,h.busy=0,h.period=s[h.note]*l.relative>>10,h.volume=0,h.envelopePos=0,h.sustainTime=l.sustainTime,e.length=l.length,e.period=h.period,e.volume=0,e.enabled=1,h.portaFlag&&(h.portamento||(h.portamento=h.period,h.portaCounter=1,h.portaPeriod=h.portaLimit-h.period))}else 1==h.tick&&(n=this.patterns.readAt(h.patternPos)-160&255)>127&&(e.enabled=0)}while(r>0);if(e.enabled){switch(n=h.note+l.arpeggio[h.arpeggioPos],0==--h.arpeggioSpeed&&(h.arpeggioSpeed=l.arpeggioSpeed,++h.arpeggioPos==l.arpeggioLimit&&(h.arpeggioPos=0)),h.period=s[n]*l.relative>>10,h.portaFlag&&(h.portaDelay?h.portaDelay--:(h.period+=h.portaCounter*h.portaPeriod/h.portaSpeed,++h.portaCounter>h.portaSpeed&&(h.note=h.portaNote,h.portaFlag=0))),h.vibratoDelay?h.vibratoDelay--:h.vibratoFlag&&(h.vibratoFlag<0?(h.vibrato+=h.vibratoSpeed,h.vibrato==h.vibratoDepth&&(h.vibratoFlag^=2147483648)):(h.vibrato-=h.vibratoSpeed,0==h.vibrato&&(h.vibratoFlag^=2147483648)),0==h.vibrato&&(h.vibratoFlag^=1),1&h.vibratoFlag?h.period+=h.vibrato:h.period-=h.vibrato),e.period=h.period,h.envelopePos){case 4:break;case 0:h.volume+=l.attackSpeed,h.volume>=l.attackVol&&(h.volume=l.attackVol,h.envelopePos=1);break;case 1:h.volume-=l.decaySpeed,h.volume<=l.decayVol&&(h.volume=l.decayVol,h.envelopePos=2);break;case 2:h.sustainTime?h.sustainTime--:h.envelopePos=3;break;case 3:h.volume-=l.releaseSpeed,h.volume<=l.releaseVol&&(h.volume=l.releaseVol,h.envelopePos=4)}if(n=l.envelopeVol<<12,n>>=8,n>>=4,n*=h.volume,n>>=8,n>>=1,e.volume=n,1==l.type){if(h.pulseDelay)h.pulseDelay--;else if(h.pulseSpeed)h.pulseSpeed--;else if(h.pulseCounter||!(1&l.synchro)){if(h.pulseSpeed=l.pulseSpeed,4&h.pulseDir)for(;;){if(h.pulsePos>=l.pulsePosL){r=1;break}if(h.pulseDir&=-5,h.pulsePos++,h.pulseCounter--,h.pulsePos<=l.pulsePosH){r=2;break}h.pulseDir|=4,h.pulsePos--,h.pulseCounter--}else for(;;){if(h.pulsePos<=l.pulsePosH){r=2;break}if(h.pulseDir|=4,h.pulsePos--,h.pulseCounter--,h.pulsePos>=l.pulsePosL){r=1;break}h.pulseDir&=-5,h.pulsePos++,h.pulseCounter++}o=h.synth+h.pulsePos,1==r?(this.mixer.memory[o]=l.pulseRatePos,h.pulsePos--):(this.mixer.memory[o]=l.pulseRateNeg,h.pulsePos++)}}else if(2==l.type)if(h.blendDelay)h.blendDelay--;else if(h.blendCounter||!(4&l.synchro))for(h.blendDir?1!=h.blendPos?h.blendPos--:(h.blendDir^=1,h.blendCounter--):h.blendPos!=l.blendRate<<1?h.blendPos++:(h.blendDir^=1,h.blendCounter--),t=l.pointer,i=h.synth,a=t+31,o=a+1;t<a;++t)n=h.blendPos*this.mixer.memory[o++]>>l.blendRate,this.mixer.memory[o++]=n+this.mixer.memory[t];h=h.next}else h=h.next}}}}),o.voices[3]=t(3,8),o.voices[3].next=o.voices[2]=t(2,4),o.voices[2].next=o.voices[1]=t(1,2),o.voices[1].next=o.voices[0]=t(0,1),Object.seal(o)}var s=[8192,7728,7296,6888,6504,6136,5792,5464,5160,4872,4600,4336,4096,3864,3648,3444,3252,3068,2896,2732,2580,2436,2300,2168,2048,1932,1824,1722,1626,1534,1448,1366,1290,1218,1150,1084,1024,966,912,861,813,767,724,683,645,609,575,542,512,483,456,430,406,383,362,341,322,304,287,271,256,241,228,215,203,191,181,170,161,152,143,135];window.neoart.FEPlayer=r}(),function(){function e(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},sample:{value:null,writable:!0},enabled:{value:0,writable:!0},period:{value:0,writable:!0},effect:{value:0,writable:!0},param:{value:0,writable:!0},volume:{value:0,writable:!0},last:{value:0,writable:!0},slideCtr:{value:0,writable:!0},slideDir:{value:0,writable:!0},slideParam:{value:0,writable:!0},slidePeriod:{value:0,writable:!0},slideSpeed:{value:0,writable:!0},stepPeriod:{value:0,writable:!0},stepSpeed:{value:0,writable:!0},stepWanted:{value:0,writable:!0},initialize:{value:function(){this.channel=null,this.sample=null,this.enabled=0,this.period=0,this.effect=0,this.param=0,this.volume=0,this.last=0,this.slideCtr=0,this.slideDir=0,this.slideParam=0,this.slidePeriod=0,this.slideSpeed=0,this.stepPeriod=0,this.stepSpeed=0,this.stepWanted=0}}})}function t(t){var h=u(t);return Object.defineProperties(h,{id:{value:"FXPlayer"},standard:{value:0,writable:!0},track:{value:null,writable:!0},patterns:{value:[],writable:!0},samples:{value:[],writable:!0},length:{value:0,writable:!0},voices:{value:[],writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},jumpFlag:{value:0,writable:!0},delphine:{value:0,writable:!0},force:{set:function(e){e<i?e=i:e>s&&(e=s),this.version=e}},ntsc:{set:function(e){this.standard=e,this.frequency(e),e=e?20.44952532:20.637767904,e=e*(this.sampleRate/1e3)/120,this.mixer.samplesTick=this.tempo/122*e>>0}},initialize:{value:function(){var e=this.voices[0];for(this.reset(),this.ntsc=this.standard,this.speed=6,this.trackPos=0,this.patternPos=0,this.jumpFlag=0;e;)e.initialize(),e.channel=this.mixer.channels[e.index],e.sample=this.samples[0],e=e.next}},loader:{value:function(e){var t,o,h,p,u,d,v,b=0,c=0;if(!(e.length<1686)){if(e.position=60,"SONG"!=e.readString(4)){if(e.position=124,"SO31"!=e.readString(4))return;if(e.length<2350)return;p=544,this.samples.length=h=32,this.version=s}else p=0,this.samples.length=h=16,this.version=i;for(this.tempo=e.readUshort(),e.position=0,t=1;t<h;++t)v=e.readUint(),v?(d=n(),d.pointer=c,c+=v,this.samples[t]=d):this.samples[t]=null;for(e.position+=20,t=1;t<h;++t)d=this.samples[t],d?(d.name=e.readString(22),d.length=e.readUshort()<<1,d.volume=e.readUshort(),d.loop=e.readUshort(),d.repeat=e.readUshort()<<1):e.position+=30;for(e.position=530+p,this.length=h=e.readUbyte(),e.position++,t=0;t<h;++t)v=e.readUbyte()<<8,this.track[t]=v,v>b&&(b=v);for(p&&(p+=4),e.position=660+p,b+=256,this.patterns.length=b,h=this.samples.length,t=0;t<b;++t)u=l(),u.note=e.readShort(),v=e.readUbyte(),u.param=e.readUbyte(),u.effect=15&v,u.sample=v>>4,this.patterns[t]=u,this.version==s?4096&u.note&&(u.sample+=16,u.note>0&&(u.note&=61439)):((9==u.effect||u.note>856)&&(this.version=a),u.note<-3&&(this.version=r)),(u.sample>=h||null==this.samples[u.sample])&&(u.sample=0);for(this.mixer.store(e,c),t=1;t<h;++t)if(d=this.samples[t])for(d.loop?d.loopPtr=d.pointer+d.loop:(d.loopPtr=this.mixer.memory.length,d.repeat=2),c=d.pointer+4,o=d.pointer;o<c;++o)this.mixer.memory[o]=0;for(d=n(),d.pointer=d.loopPtr=this.mixer.memory.length,d.length=d.repeat=2,this.samples[0]=d,e.position=b=this.delphine=0,t=0;t<265;++t)b+=e.readUshort();switch(b){case 172662:case 1391423:case 1458300:case 1706977:case 1920077:case 1920694:case 1677853:case 1931956:case 1926836:case 1385071:case 1720635:case 1714491:case 1731874:case 1437490:this.delphine=1}}}},process:{value:function(){var e,t,i,r,s,l,n=this.voices[0];if(this.tick)for(;n;)if(e=n.channel,this.version!=a||-3!=n.period){if(n.stepSpeed)n.stepPeriod+=n.stepSpeed,n.stepSpeed<0?n.stepPeriod<n.stepWanted&&(n.stepPeriod=n.stepWanted,this.version>a&&(n.stepSpeed=0)):n.stepPeriod>n.stepWanted&&(n.stepPeriod=n.stepWanted,this.version>a&&(n.stepSpeed=0)),this.version>a&&(n.last=n.stepPeriod),e.period=n.stepPeriod;else{if(n.slideSpeed&&(l=15&n.slideParam)){if(++n.slideCtr!=l){n=n.next;continue}n.slideCtr=0,l=n.slideParam<<4<<3,n.slideDir?(n.slidePeriod-=8,e.period=n.slidePeriod,(l-=n.slideSpeed)==n.slidePeriod&&(n.slideDir=0)):(n.slidePeriod+=8,e.period=n.slidePeriod,(l+=n.slideSpeed)==n.slidePeriod&&(n.slideDir=1))}switch(l=0,n.effect){case 0:break;case 1:if(l=this.tick%3,t=0,2==l){e.period=n.last,n=n.next;continue}for(l=1==l?15&n.param:n.param>>4;n.last!=o[t];)t++;e.period=o[t+l];break;case 2:l=n.param>>4,l?n.period+=l:n.period-=15&n.param,e.period=n.period;break;case 3:this.mixer.filter.active=1;break;case 4:this.mixer.filter.active=0;break;case 8:l=-1;case 7:for(n.stepSpeed=15&n.param,n.stepPeriod=this.version>a?n.last:n.period,l<0&&(n.stepSpeed=-n.stepSpeed),t=0;;){if((i=o[t])==n.stepPeriod)break;if(i<0){t=-1;break}t++}t>-1?(i=n.param>>4,l>-1&&(i=-i),t+=i,t<0&&(t=0),n.stepWanted=o[t]):n.stepWanted=n.period;break;case 9:n.slideSpeed=n.slidePeriod=n.period,n.slideParam=n.param,n.slideDir=0,n.slideCtr=0}}n=n.next}else n=n.next;else for(l=this.track[this.trackPos]+this.patternPos;n;)if(e=n.channel,n.enabled=0,r=this.patterns[l+n.index],n.period=r.note,n.effect=r.effect,n.param=r.param,-3!=r.note){if(r.sample?(s=n.sample=this.samples[r.sample],n.volume=s.volume,5==n.effect?n.volume+=n.param:6==n.effect&&(n.volume-=n.param),e.volume=n.volume):s=n.sample,n.period){switch(n.last=n.period,n.slideSpeed=0,n.stepSpeed=0,n.enabled=1,e.enabled=0,n.period){case-2:e.volume=0;break;case-4:this.jumpFlag=1;break;case-5:break;default:e.pointer=s.pointer,e.length=s.length,this.delphine?e.period=n.period<<1:e.period=n.period}n.enabled&&(e.enabled=1),e.pointer=s.loopPtr,e.length=s.repeat}n=n.next}else n.effect=0,n=n.next;++this.tick==this.speed&&(this.tick=0,this.patternPos+=4,(256==this.patternPos||this.jumpFlag)&&(this.patternPos=this.jumpFlag=0,++this.trackPos==this.length&&(this.trackPos=0,this.mixer.complete=1)))}}}),h.voices[0]=e(0),h.voices[0].next=h.voices[1]=e(1),h.voices[1].next=h.voices[2]=e(2),h.voices[2].next=h.voices[3]=e(3),h.track=new Uint16Array(128),Object.seal(h)}var i=1,a=2,r=3,s=4,o=[1076,1016,960,906,856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,113,-1];window.neoart.FXPlayer=t}(),function(){function e(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},sample:{value:null,writable:!0},enabled:{value:0,writable:!0},period:{value:0,writable:!0},effect:{value:0,writable:!0},param:{value:0,writable:!0},volume1:{value:0,writable:!0},volume2:{value:0,writable:!0},handler:{value:0,writable:!0},portaDir:{value:0,writable:!0},portaPeriod:{value:0,writable:!0},portaSpeed:{value:0,writable:!0},vibratoPos:{value:0,writable:!0},vibratoSpeed:{value:0,writable:!0},wavePos:{value:0,writable:!0},initialize:{value:function(){this.channel=null,this.sample=null,this.enabled=0,this.period=0,this.effect=0,this.param=0,this.volume1=0,this.volume2=0,this.handler=0,this.portaDir=0,this.portaPeriod=0,this.portaSpeed=0,this.vibratoPos=0,this.vibratoSpeed=0,this.wavePos=0}}})}function t(){var e=n();return Object.defineProperties(e,{finetune:{value:0,writable:!0},restart:{value:0,writable:!0},waveLen:{value:0,writable:!0},waves:{value:null,writable:!0},volumes:{value:null,writable:!0}}),Object.seal(e)}function i(i){var o=u(i);return Object.defineProperties(o,{id:{value:"HMPlayer"},track:{value:null,writable:!0},patterns:{value:[],writable:!0},samples:{value:[],writable:!0},length:{value:0,writable:!0},restart:{value:0,writable:!0},voices:{value:[],writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},jumpFlag:{value:0,writable:!0},initialize:{value:function(){var e=this.voices[0];for(this.reset(),this.speed=6,this.trackPos=0,this.patternPos=0,this.jumpFlag=0,this.mixer.samplesTick=884;e;)e.initialize(),e.channel=this.mixer.channels[e.index],e.sample=this.samples[0],e=e.next}},loader:{value:function(e){var i,a,r,s,o,n,h,p=0,u=0,d=0,v=0;if(!(e.length<2106)&&(e.position=1080,"FEST"==(a=e.readString(4)))){for(e.position=950,this.length=e.readUbyte(),this.restart=e.readUbyte(),i=0;i<128;++i)this.track[i]=e.readUbyte();for(e.position=0,this.title=e.readString(20),this.version=1,i=1;i<32;++i){if(this.samples[i]=null,"Mupp"==(a=e.readString(4))){for(h=e.readUbyte(),p=h-u++,r=0;r<128;++r)this.track[r]&&this.track[r]>=p&&this.track[r]--;for(n=t(),n.name=a,n.length=n.repeat=32,n.restart=e.readUbyte(),n.waveLen=e.readUbyte(),e.position+=17,n.finetune=e.readByte(),n.volume=e.readUbyte(),s=e.position+4,h=1084+(h<<10),e.position=h,n.pointer=this.mixer.memory.length,n.waves=new Uint16Array(64),n.volumes=new Uint8Array(64),this.mixer.store(e,896),r=0;r<64;++r)n.waves[r]=e.readUbyte()<<5;for(r=0;r<64;++r)n.volumes[r]=127&e.readUbyte();e.position=h,e.writeInt(1718382436),e.position=s,d+=896}else{if(a=a.substr(0,2),"El"==a?e.position+=18:(e.position-=4,a=e.readString(22)),!(h=e.readUshort())){e.position+=6;continue}n=t(),n.name=a,n.pointer=v,n.length=h<<1,n.finetune=e.readByte(),n.volume=e.readUbyte(),n.loop=e.readUshort()<<1,n.repeat=e.readUshort()<<1,v+=n.length}this.samples[i]=n}for(i=0;i<128;++i)h=this.track[i]<<8,this.track[i]=h,h>u&&(u=h);for(e.position=1084,u+=256,this.patterns.length=u,i=0;i<u;++i){for(h=e.readUint();1718382436==h;)e.position+=1020,h=e.readUint();o=l(),o.note=h>>16&4095,o.sample=h>>24&240|h>>12&15,o.effect=h>>8&15,o.param=255&h,(o.sample>31||!this.samples[o.sample])&&(o.sample=0),this.patterns[i]=o}for(this.mixer.store(e,v),i=1;i<32;++i)if(null!=(n=this.samples[i])&&"Mupp"!=n.name)for(n.pointer+=d,n.loop?(n.loopPtr=n.pointer+n.loop,n.length=n.loop+n.repeat):(n.loopPtr=this.mixer.memory.length,n.repeat=2),v=n.pointer+4,r=n.pointer;r<v;++r)this.mixer.memory[r]=0;n=t(),n.pointer=n.loopPtr=this.mixer.memory.length,n.length=n.repeat=2,this.samples[0]=n}}},process:{value:function(){var e,t,i,a,r,s=this.voices[0];if(this.tick)for(;s;)this.effects(s),this.handler(s),a=s.sample,s.channel.pointer=a.loopPtr,s.channel.length=a.repeat,s=s.next;else for(t=this.track[this.trackPos]+this.patternPos;s;){switch(e=s.channel,s.enabled=0,i=this.patterns[t+s.index],s.effect=i.effect,s.param=i.param,i.sample?(a=s.sample=this.samples[i.sample],s.volume2=a.volume,"Mupp"==a.name?(a.loopPtr=a.pointer+a.waves[0],s.handler=1,s.volume1=a.volumes[0]):(s.handler=0,s.volume1=64)):a=s.sample,i.note&&(3==s.effect||5==s.effect?i.note<s.period?(s.portaDir=1,s.portaPeriod=i.note):i.note>s.period?(s.portaDir=0,s.portaPeriod=i.note):s.portaPeriod=0:(s.period=i.note,s.vibratoPos=0,s.wavePos=0,s.enabled=1,e.enabled=0,r=s.period*a.finetune>>8,e.period=s.period+r,s.handler?(e.pointer=a.loopPtr,e.length=a.repeat):(e.pointer=a.pointer,e.length=a.length))),s.effect){case 11:this.trackPos=s.param-1,this.jumpFlag=1;break;case 12:s.volume2=s.param,s.volume2>64&&(s.volume2=64);break;case 13:this.jumpFlag=1;break;case 14:this.mixer.filter.active=1^s.param;break;case 15:r=s.param,r<1?r=1:r>31&&(r=31),this.speed=r,this.tick=0}i.note||this.effects(s),this.handler(s),s.enabled&&(e.enabled=1),e.pointer=a.loopPtr,e.length=a.repeat,s=s.next}++this.tick==this.speed&&(this.tick=0,this.patternPos+=4,(256==this.patternPos||this.jumpFlag)&&(this.patternPos=this.jumpFlag=0,this.trackPos=127&++this.trackPos,this.trackPos==this.length&&(this.trackPos=this.restart,this.mixer.complete=1)))}},effects:{value:function(e){var t,i,o,l,n=e.channel,h=4095&e.period;if(e.effect||e.param)switch(e.effect){case 0:if(!(l=this.tick%3))break;for(l=1==l?e.param>>4:15&e.param,i=37-l,t=0;t<i;++t)if(h>=r[t]){h=r[t+l];break}break;case 1:e.period-=e.param,e.period<113&&(e.period=113),h=e.period;break;case 2:e.period+=e.param,e.period>856&&(e.period=856),h=e.period;break;case 3:case 5:5==e.effect?o=1:e.param&&(e.portaSpeed=e.param,e.param=0),e.portaPeriod&&(e.portaDir?(e.period-=e.portaSpeed,e.period<e.portaPeriod&&(e.period=e.portaPeriod,e.portaPeriod=0)):(e.period+=e.portaSpeed,e.period>e.portaPeriod&&(e.period=e.portaPeriod,e.portaPeriod=0))),h=e.period;break;case 4:case 6:6==e.effect?o=1:e.param&&(e.vibratoSpeed=e.param),l=s[e.vibratoPos>>2&31],l=(15&e.vibratoSpeed)*l>>7,e.vibratoPos>127?h-=l:h+=l,l=e.vibratoSpeed>>2&60,e.vibratoPos=e.vibratoPos+l&255;break;case 7:for(l=a[(15&e.vibratoPos)+((15&e.param)<<4)],e.vibratoPos++,t=0;t<37&&!(h>=r[t]);++t);l+=t,l>35&&(l-=12),h=r[l];break;case 10:o=1}n.period=h+(h*e.sample.finetune>>8),o&&(l=e.param>>4,l?e.volume2+=l:e.volume2-=15&e.param,e.volume2>64?e.volume2=64:e.volume2<0&&(e.volume2=0))}},handler:{value:function(e){var t;e.handler&&(t=e.sample,t.loopPtr=t.pointer+t.waves[e.wavePos],e.volume1=t.volumes[e.wavePos],++e.wavePos>t.waveLen&&(e.wavePos=t.restart)),e.channel.volume=e.volume1*e.volume2>>6}}}),o.voices[0]=e(0),o.voices[0].next=o.voices[1]=e(1),o.voices[1].next=o.voices[2]=e(2),o.voices[2].next=o.voices[3]=e(3),o.track=new Uint16Array(128),Object.seal(o)}var a=[0,3,7,12,15,12,7,3,0,3,7,12,15,12,7,3,0,4,7,12,16,12,7,4,0,4,7,12,16,12,7,4,0,3,8,12,15,12,8,3,0,3,8,12,15,12,8,3,0,4,8,12,16,12,8,4,0,4,8,12,16,12,8,4,0,5,8,12,17,12,8,5,0,5,8,12,17,12,8,5,0,5,9,12,17,12,9,5,0,5,9,12,17,12,9,5,12,0,7,0,3,0,7,0,12,0,7,0,3,0,7,0,12,0,7,0,4,0,7,0,12,0,7,0,4,0,7,0,0,3,7,3,7,12,7,12,15,12,7,12,7,3,7,3,0,4,7,4,7,12,7,12,16,12,7,12,7,4,7,4,31,27,24,19,15,12,7,3,0,3,7,12,15,19,24,27,31,28,24,19,16,12,7,4,0,4,7,12,16,19,24,28,0,12,0,12,0,12,0,12,0,12,0,12,0,12,0,12,0,12,24,12,0,12,24,12,0,12,24,12,0,12,24,12,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0,4,0,4,0,4,0,4,0,4,0,4,0,4,0,4],r=[856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,0],s=[0,24,49,74,97,120,141,161,180,197,212,224,235,244,250,253,255,253,250,244,235,224,212,197,180,161,141,120,97,74,49,24];window.neoart.HMPlayer=i}(),function(){function e(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},enabled:{value:0,writable:!0},cosoCounter:{value:0,writable:!0},cosoSpeed:{value:0,writable:!0},trackPtr:{value:0,writable:!0},trackPos:{value:0,writable:!0},trackTransp:{value:0,writable:!0},patternPtr:{value:0,writable:!0},patternPos:{value:0,writable:!0},frqseqPtr:{value:0,writable:!0},frqseqPos:{value:0,writable:!0},volseqPtr:{value:0,writable:!0},volseqPos:{value:0,writable:!0},sample:{value:0,writable:!0},loopPtr:{value:0,writable:!0},repeat:{value:0,writable:!0},tick:{value:0,writable:!0},note:{value:0,writable:!0},transpose:{value:0,writable:!0},info:{value:0,writable:!0},infoPrev:{value:0,writable:!0},volume:{value:0,writable:!0},volCounter:{value:0,writable:!0},volSpeed:{value:0,writable:!0},volSustain:{value:0,writable:!0},volTransp:{value:0,writable:!0},volFade:{value:0,writable:!0},portaDelta:{value:0,writable:!0},vibrato:{value:0,writable:!0},vibDelay:{value:0,writable:!0},vibDelta:{value:0,writable:!0},vibDepth:{value:0,writable:!0},vibSpeed:{value:0,writable:!0},slide:{value:0,writable:!0},sldActive:{value:0,writable:!0},sldDone:{value:0,writable:!0},sldCounter:{value:0,writable:!0},sldSpeed:{value:0,writable:!0},sldDelta:{value:0,writable:!0},sldPointer:{value:0,writable:!0},sldLen:{value:0,writable:!0},sldEnd:{value:0,writable:!0},sldLoopPtr:{value:0,writable:!0},initialize:{value:function(){this.channel=null,this.enabled=0,this.cosoCounter=0,this.cosoSpeed=0,this.trackPtr=0,this.trackPos=12,this.trackTransp=0,this.patternPtr=0,this.patternPos=0,this.frqseqPtr=0,this.frqseqPos=0,this.volseqPtr=0,this.volseqPos=0,this.sample=-1,this.loopPtr=0,this.repeat=0,this.tick=0,this.note=0,this.transpose=0,this.info=0,this.infoPrev=0,this.volume=0,this.volCounter=1,this.volSpeed=1,this.volSustain=0,this.volTransp=0,this.volFade=100,this.portaDelta=0,this.vibrato=0,this.vibDelay=0,this.vibDelta=0,this.vibDepth=0,this.vibSpeed=0,this.slide=0,this.sldActive=0,this.sldDone=0,this.sldCounter=0,this.sldSpeed=0,this.sldDelta=0,this.sldPointer=0,this.sldLen=0,this.sldEnd=0,this.sldLoopPtr=0}}})}function t(){return Object.create(null,{pointer:{value:0,writable:!0},speed:{value:0,writable:!0},length:{value:0,writable:!0}})}function i(i){var r=u(i);return Object.defineProperties(r,{id:{value:"JHPlayer"},songs:{value:[],writable:!0},samples:{value:[],writable:!0},stream:{value:null,writable:!0},base:{value:0,writable:!0},patterns:{value:0,writable:!0},patternLen:{value:0,writable:!0},periods:{value:0,writable:!0},frqseqs:{value:0,writable:!0},volseqs:{value:0,writable:!0},samplesData:{value:0,writable:!0},song:{value:null,writable:!0},voices:{value:[],writable:!0},coso:{value:0,writable:!0},variant:{value:0,writable:!0},initialize:{value:function(){var e=this.voices[0];for(this.reset(),this.song=this.songs[this.playSong],this.speed=this.song.speed,this.tick=this.coso||this.variant>1?1:this.speed;e;)e.initialize(),e.channel=this.mixer.channels[e.index],e.trackPtr=this.song.pointer+3*e.index,this.coso?(e.trackPos=0,e.patternPos=8):(this.stream.position=e.trackPtr,e.patternPtr=this.patterns+this.stream.readUbyte()*this.patternLen,e.trackTransp=this.stream.readByte(),e.volTransp=this.stream.readByte(),e.frqseqPtr=this.base,e.volseqPtr=this.base),e=e.next}},loader:{value:function(e){var i,a,r,s,o,l,h,p,u,d=0;if(this.base=this.periods=0,this.coso="COSO"==e.readString(4),this.coso){for(a=0;a<7;++a)d+=e.readInt();switch(16942==d&&(e.position=47,d+=e.readUbyte()),d){case 22666:case 18842:case 30012:case 22466:case 3546:this.variant=1;break;case 16948:case 18332:case 13698:this.variant=2;break;case 18546:case 13926:case 8760:case 17242:case 11394:case 14494:case 14392:case 13576:case 6520:this.variant=3;break;default:this.variant=4}this.version=2,e.position=4,this.frqseqs=e.readUint(),this.volseqs=e.readUint(),this.patterns=e.readUint(),u=e.readUint(),p=e.readUint(),i=e.readUint(),this.samplesData=e.readUint(),e.position=0,e.writeInt(16777216),e.writeInt(225),e.writeShort(65535),s=(this.samplesData-i)/10-1,this.lastSong=(i-p)/6}else{for(;e.bytesAvailable>12;)switch(d=e.readUshort()){case 576:d=e.readUshort(),127==d&&(e.position+=2,this.periods=e.position+e.readUshort());break;case 28674:case 28675:this.channels=255&d,d=e.readUshort(),30208==d&&(d=e.readUshort()),16890==d&&(e.position+=4,this.base=e.position+e.readUshort());break;case 21574:d=e.readUshort(),19800==d&&(r=e.position-4,e.position=e.length)}if(!r||!this.base||!this.periods)return;this.version=1,e.position=r+4,this.frqseqs=o=r+32,d=e.readUshort(),this.volseqs=o+=++d<<6,d=e.readUshort(),this.patterns=o+=++d<<6,d=e.readUshort(),e.position+=2,this.patternLen=e.readUshort(),u=o+=++d*this.patternLen,e.position-=4,d=e.readUshort(),p=o+=12*++d,e.position=r+16,this.lastSong=e.readUshort(),i=o+=6*++this.lastSong,s=e.readUshort(),this.samplesData=o+30*s}for(e.position=i,this.samples=[],d=0,a=0;a<s;++a)l=n(),this.coso||(l.name=e.readString(18)),l.pointer=e.readUint(),l.length=e.readUshort()<<1,this.coso||(l.volume=e.readUshort()),l.loopPtr=e.readUshort()+l.pointer,l.repeat=e.readUshort()<<1,1&l.loopPtr&&l.loopPtr--,d+=l.length,this.samples[a]=l;for(e.position=this.samplesData,this.mixer.store(e,d),e.position=p,this.songs=[],d=0,a=0;a<this.lastSong;++a)h=t(),h.pointer=e.readUshort(),h.length=e.readUshort()-h.pointer+1,h.speed=e.readUshort(),h.pointer=12*h.pointer+u,h.length*=12,h.length>12&&(this.songs[d++]=h);if(this.lastSong=this.songs.length-1,!this.coso)for(e.position=0,this.variant=1;e.position<r;)if(45116==(d=e.readUshort())||3072==d){if(229==(d=e.readUshort())||230==d||233==d){this.variant=2;break}}else if(20219==d){this.variant=3;break}this.stream=e}},process:{value:function(){var e,t,i,r,s,o,l,n=this.voices[0];if(0==--this.tick){for(this.tick=this.speed;n;){if(e=n.channel,this.coso){if(--n.cosoCounter<0){n.cosoCounter=n.cosoSpeed;do{this.stream.position=n.patternPos;do{t=0,l=this.stream.readByte(),-1==l?(n.trackPos==this.song.length&&(n.trackPos=0,this.mixer.complete=1),this.stream.position=n.trackPtr+n.trackPos,l=this.stream.readUbyte(),n.trackTransp=this.stream.readByte(),r=this.stream.readAt(this.stream.position),this.variant>3&&r>127?(s=r>>4&15,r&=15,15==s?(s=100,r&&(s=15-r+1,s<<=1,r=s,s<<=1,s+=r),n.volFade=s):8==s?this.mixer.complete=1:14==s&&(this.speed=r)):n.volTransp=this.stream.readByte(),this.stream.position=this.patterns+(l<<1),n.patternPos=this.stream.readUshort(),n.trackPos+=12,t=1):-2==l?(n.cosoCounter=n.cosoSpeed=this.stream.readUbyte(),t=3):-3==l?(n.cosoCounter=n.cosoSpeed=this.stream.readUbyte(),n.patternPos=this.stream.position):(n.note=l,n.info=this.stream.readByte(),224&n.info&&(n.infoPrev=this.stream.readByte()),n.patternPos=this.stream.position,n.portaDelta=0,l>=0&&(1==this.variant&&(e.enabled=0),l=(31&n.info)+n.volTransp,this.stream.position=this.volseqs+(l<<1),this.stream.position=this.stream.readUshort(),n.volCounter=n.volSpeed=this.stream.readUbyte(),n.volSustain=0,l=this.stream.readByte(),n.vibSpeed=this.stream.readByte(),n.vibrato=64,n.vibDepth=n.vibDelta=this.stream.readByte(),n.vibDelay=this.stream.readUbyte(),n.volseqPtr=this.stream.position,n.volseqPos=0,-128!=l&&(this.variant>1&&64&n.info&&(l=n.infoPrev),this.stream.position=this.frqseqs+(l<<1),n.frqseqPtr=this.stream.readUshort(),n.frqseqPos=0,n.tick=0)))}while(t>2)}while(t>0)}}else this.stream.position=n.patternPtr+n.patternPos,l=this.stream.readByte(),n.patternPos!=this.patternLen&&1!=(127&l)||(n.trackPos==this.song.length&&(n.trackPos=0,this.mixer.complete=1),this.stream.position=n.trackPtr+n.trackPos,l=this.stream.readUbyte(),n.trackTransp=this.stream.readByte(),n.volTransp=this.stream.readByte(),-128==n.volTransp&&(this.mixer.complete=1),n.patternPtr=this.patterns+l*this.patternLen,n.patternPos=0,n.trackPos+=12,this.stream.position=n.patternPtr,l=this.stream.readByte()),127&l&&(n.note=127&l,n.portaDelta=0,r=this.stream.position,n.patternPos||(this.stream.position+=this.patternLen),this.stream.position-=2,n.infoPrev=this.stream.readByte(),this.stream.position=r,n.info=this.stream.readByte(),l>=0&&(1==this.variant&&(e.enabled=0),l=(31&n.info)+n.volTransp,this.stream.position=this.volseqs+(l<<6),n.volCounter=n.volSpeed=this.stream.readUbyte(),n.volSustain=0,l=this.stream.readByte(),n.vibSpeed=this.stream.readByte(),n.vibrato=64,n.vibDepth=n.vibDelta=this.stream.readByte(),n.vibDelay=this.stream.readUbyte(),n.volseqPtr=this.stream.position,n.volseqPos=0,this.variant>1&&64&n.info&&(l=n.infoPrev),n.frqseqPtr=this.frqseqs+(l<<6),n.frqseqPos=0,n.tick=0)),n.patternPos+=2;n=n.next}n=this.voices[0]}for(;n;){e=n.channel,n.enabled=0;do{if(t=0,n.tick)n.tick--;else{this.stream.position=n.frqseqPtr+n.frqseqPos;do{if(-31==(l=this.stream.readByte()))break;switch(t=3,3==this.variant&&this.coso&&(-27==l?l=-30:-26==l&&(l=-28)),l){case-32:n.frqseqPos=63&this.stream.readUbyte(),this.stream.position=n.frqseqPtr+n.frqseqPos;break;case-30:o=this.samples[this.stream.readUbyte()],n.sample=-1,n.loopPtr=o.loopPtr,n.repeat=o.repeat,n.enabled=1,e.enabled=0,e.pointer=o.pointer,e.length=o.length,n.volseqPos=0,n.volCounter=1,n.slide=0,n.frqseqPos+=2;break;case-29:n.vibSpeed=this.stream.readByte(),n.vibDepth=this.stream.readByte(),n.frqseqPos+=3;break;case-28:o=this.samples[this.stream.readUbyte()],n.loopPtr=o.loopPtr,n.repeat=o.repeat,e.pointer=o.pointer,e.length=o.length,n.slide=0,n.frqseqPos+=2;break;case-27:if(this.variant<2)break;o=this.samples[this.stream.readUbyte()],e.enabled=0,n.enabled=1,2==this.variant?(r=this.stream.readUbyte()*o.length,n.loopPtr=o.loopPtr+r,n.repeat=o.repeat,e.pointer=o.pointer+r,e.length=o.length,n.frqseqPos+=3):(n.sldPointer=o.pointer,n.sldEnd=o.pointer+o.length,l=this.stream.readUshort(),n.sldLoopPtr=65535==l?o.length:l<<1,n.sldLen=this.stream.readUshort()<<1,n.sldDelta=this.stream.readShort()<<1,n.sldActive=0,n.sldCounter=0,n.sldSpeed=this.stream.readUbyte(),n.slide=1,n.sldDone=0,n.frqseqPos+=9),n.volseqPos=0,n.volCounter=1;break;case-26:if(this.variant<3)break;n.sldLen=this.stream.readUshort()<<1,n.sldDelta=this.stream.readShort()<<1,n.sldActive=0,n.sldCounter=0,n.sldSpeed=this.stream.readUbyte(),n.sldDone=0,n.frqseqPos+=6;break;case-25:1==this.variant?(n.frqseqPtr=this.frqseqs+(this.stream.readUbyte()<<6),n.frqseqPos=0,this.stream.position=n.frqseqPtr,t=3):(l=this.stream.readUbyte(),l!=n.sample&&(o=this.samples[l],n.sample=l,n.loopPtr=o.loopPtr,n.repeat=o.repeat,n.enabled=1,e.enabled=0,e.pointer=o.pointer,e.length=o.length),n.volseqPos=0,n.volCounter=1,n.slide=0,n.frqseqPos+=2);break;case-24:n.tick=this.stream.readUbyte(),n.frqseqPos+=2,t=1;break;case-23:if(this.variant<2)break;o=this.samples[this.stream.readUbyte()],n.sample=-1,n.enabled=1,s=this.stream.readUbyte(),r=this.stream.position,e.enabled=0,this.stream.position=this.samplesData+o.pointer+4,l=24*this.stream.readUshort()+(this.stream.readUshort()<<2),this.stream.position+=24*s,n.loopPtr=4294967294&this.stream.readUint(),e.length=(4294967294&this.stream.readUint())-n.loopPtr,n.loopPtr+=o.pointer+l+8,e.pointer=n.loopPtr,n.repeat=2,this.stream.position=r,r=n.loopPtr+1,this.mixer.memory[r]=this.mixer.memory[n.loopPtr],n.volseqPos=0,n.volCounter=1,n.slide=0,n.frqseqPos+=3;break;default:n.transpose=l,n.frqseqPos++,t=0}}while(t>2)}}while(t>0);n.slide&&(n.sldDone||--n.sldCounter<0&&(n.sldCounter=n.sldSpeed,n.sldActive?(l=n.sldLoopPtr+n.sldDelta,l<0?(n.sldDone=1,l=n.sldLoopPtr-n.sldDelta):(r=n.sldPointer+n.sldLen+l)>n.sldEnd&&(n.sldDone=1,l=n.sldLoopPtr-n.sldDelta),n.sldLoopPtr=l):n.sldActive=1,n.loopPtr=n.sldPointer+n.sldLoopPtr,n.repeat=n.sldLen,e.pointer=n.loopPtr,e.length=n.repeat));do{if(t=0,n.volSustain)n.volSustain--;else{if(--n.volCounter)break;n.volCounter=n.volSpeed;do{if(this.stream.position=n.volseqPtr+n.volseqPos,(l=this.stream.readByte())<=-25&&l>=-31)break;switch(l){case-24:n.volSustain=this.stream.readUbyte(),n.volseqPos+=2,t=1;break;case-32:n.volseqPos=(63&this.stream.readUbyte())-5,t=3;break;default:n.volume=l,n.volseqPos++,t=0}}while(t>2)}}while(t>0);if(l=n.transpose,l>=0&&(l+=n.note+n.trackTransp),l&=127,this.coso?(l>83&&(l=0),i=a[l],l<<=1):(l<<=1,this.stream.position=this.periods+l,i=this.stream.readUshort()),n.vibDelay)n.vibDelay--;else if(this.variant>3)32&n.vibrato?(l=n.vibDelta+n.vibSpeed)>n.vibDepth&&(n.vibrato&=-33,l=n.vibDepth):(l=n.vibDelta-n.vibSpeed)<0&&(n.vibrato|=32,l=0),n.vibDelta=l,l=(l-(n.vibDepth>>1))*i,i+=l>>10;else if(this.variant>2)l=n.vibSpeed,l<0&&(l&=127,n.vibrato^=1),1&n.vibrato||(32&n.vibrato?(n.vibDelta+=l,r=n.vibDepth<<1,n.vibDelta>r&&(n.vibrato&=-33,n.vibDelta=r)):(n.vibDelta-=l,n.vibDelta<0&&(n.vibrato|=32,n.vibDelta=0))),i+=l-n.vibDepth;else if(!(n.vibrato>=0)&&1&n.vibrato||(32&n.vibrato?(n.vibDelta+=n.vibSpeed,r=n.vibDepth<<1,n.vibDelta>=r&&(n.vibrato&=-33,n.vibDelta=r)):(n.vibDelta-=n.vibSpeed,n.vibDelta<0&&(n.vibrato|=32,n.vibDelta=0))),r=n.vibDelta-n.vibDepth){for(l+=160;l<256;)r+=r,l+=24;i+=r}this.variant<3&&(n.vibrato^=1),32&n.info&&(l=n.infoPrev,this.variant>3?l<0?(n.portaDelta+=-l,l=n.portaDelta*i,i+=l>>10):(n.portaDelta+=l,l=n.portaDelta*i,i-=l>>10):l<0?(n.portaDelta+=-l<<11,i+=n.portaDelta>>16):(n.portaDelta+=l<<11,i-=n.portaDelta>>16)),l=this.variant>3?n.volFade*n.volume/100:n.volume,e.period=i,e.volume=l,n.enabled&&(e.enabled=1,e.pointer=n.loopPtr,e.length=n.repeat),n=n.next}}}}),r.voices[0]=e(0),r.voices[0].next=r.voices[1]=e(1),r.voices[1].next=r.voices[2]=e(2),r.voices[2].next=r.voices[3]=e(3),Object.seal(r)}var a=[1712,1616,1524,1440,1356,1280,1208,1140,1076,1016,960,906,856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,113,113,113,113,113,113,113,113,113,113,113,113,3424,3232,3048,2880,2712,2560,2416,2280,2152,2032,1920,1812,6848,6464,6096,5760,5424,5120,4832,4560,4304,4064,3840,3624];window.neoart.JHPlayer=i}(),function(){function e(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},sample:{value:null,writable:!0},enabled:{value:0,writable:!0},period:{value:0,writable:!0},effect:{value:0,writable:!0},param:{value:0,writable:!0},volume:{value:0,writable:!0},portaDir:{value:0,writable:!0},portaPeriod:{value:0,writable:!0},portaSpeed:{value:0,writable:!0},vibratoPos:{value:0,writable:!0},vibratoSpeed:{value:0,writable:!0},
initialize:{value:function(){this.channel=null,this.sample=null,this.enabled=0,this.period=0,this.effect=0,this.param=0,this.volume=0,this.portaDir=0,this.portaPeriod=0,this.portaSpeed=0,this.vibratoPos=0,this.vibratoSpeed=0}}})}function t(t){var d=u(t);return Object.defineProperties(d,{id:{value:"MKPlayer"},track:{value:null,writable:!0},patterns:{value:[],writable:!0},samples:{value:[],writable:!0},length:{value:0,writable:!0},restart:{value:0,writable:!0},voices:{value:[],writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},jumpFlag:{value:0,writable:!0},vibratoDepth:{value:0,writable:!0},restartSave:{value:0,writable:!0},force:{set:function(e){e<i?e=i:e>o&&(e=o),this.version=e,this.vibratoDepth=e==o?6:7,e==r?(this.restartSave=this.restart,this.restart=0):(this.restart=this.restartSave,this.restartSave=0)}},initialize:{value:function(){var e=this.voices[0];for(this.reset(),this.force=this.version,this.speed=6,this.trackPos=0,this.patternPos=0,this.jumpFlag=0;e;)e.initialize(),e.channel=this.mixer.channels[e.index],e.sample=this.samples[0],e=e.next}},loader:{value:function(e){var t,h,p,u,d,v,b=0,c=0;if(!(e.length<2106)&&(e.position=1080,"M.K."==(h=e.readString(4))||"FLT4"==h)){for(e.position=0,this.title=e.readString(20),this.version=i,e.position+=22,t=1;t<32;++t)v=e.readUshort(),v?(d=n(),e.position-=24,d.name=e.readString(22),d.length=v<<1,e.position+=3,d.volume=e.readUbyte(),d.loop=e.readUshort()<<1,d.repeat=e.readUshort()<<1,e.position+=22,d.pointer=c,c+=d.length,this.samples[t]=d,d.length>32768&&(this.version=a)):(this.samples[t]=null,e.position+=28);for(e.position=950,this.length=e.readUbyte(),v=e.readUbyte(),this.restart=v<length?v:0,t=0;t<128;++t)v=e.readUbyte()<<8,this.track[t]=v,v>b&&(b=v);for(e.position=1084,b+=256,this.patterns.length=b,t=0;t<b;++t)if(u=l(),v=e.readUint(),u.note=v>>16&4095,u.effect=v>>8&15,u.sample=v>>24&240|v>>12&15,u.param=255&v,this.patterns[t]=u,(u.sample>31||!this.samples[u.sample])&&(u.sample=0),3!=u.effect&&4!=u.effect||(this.version=r),5!=u.effect&&6!=u.effect||(this.version=o),u.effect>6&&u.effect<10)return void(this.version=0);for(this.mixer.store(e,c),t=1;t<32;++t)if(d=this.samples[t])for(d.name.indexOf("2.0")>-1&&(this.version=o),d.loop?(d.loopPtr=d.pointer+d.loop,d.length=d.loop+d.repeat):(d.loopPtr=this.mixer.memory.length,d.repeat=2),c=d.pointer+4,p=d.pointer;p<c;++p)this.mixer.memory[p]=0;d=n(),d.pointer=d.loopPtr=this.mixer.memory.length,d.length=d.repeat=2,this.samples[0]=d,this.version<o&&127!=this.restart&&(this.version=s)}}},process:{value:function(){var e,t,i,a,r,s,l,n,u,d=this.voices[0];if(this.tick)for(;d;)if(e=d.channel,d.effect||d.param){switch(d.effect){case 0:if(!(u=this.tick%3)){e.period=d.period,d=d.next;continue}for(u=1==u?d.param>>4:15&d.param,r=4095&d.period,i=37-u,t=0;t<i;++t)if(r>=h[t]){e.period=h[t+u];break}break;case 1:d.period-=d.param,d.period<113&&(d.period=113),e.period=d.period;break;case 2:d.period+=d.param,d.period>856&&(d.period=856),e.period=d.period;break;case 3:case 5:5==d.effect?n=1:d.param&&(d.portaSpeed=d.param,d.param=0),d.portaPeriod&&(d.portaDir?(d.period-=d.portaSpeed,d.period<=d.portaPeriod&&(d.period=d.portaPeriod,d.portaPeriod=0)):(d.period+=d.portaSpeed,d.period>=d.portaPeriod&&(d.period=d.portaPeriod,d.portaPeriod=0))),e.period=d.period;break;case 4:case 6:6==d.effect?n=1:d.param&&(d.vibratoSpeed=d.param),u=d.vibratoPos>>2&31,u=(15&d.vibratoSpeed)*p[u]>>this.vibratoDepth,d.vibratoPos>127?e.period=d.period-u:e.period=d.period+u,u=d.vibratoSpeed>>2&60,d.vibratoPos=d.vibratoPos+u&255;break;case 10:n=1}n&&(u=d.param>>4,n=0,u?d.volume+=u:d.volume-=15&d.param,d.volume<0?d.volume=0:d.volume>64&&(d.volume=64),e.volume=d.volume),d=d.next}else e.period=d.period,d=d.next;else for(a=this.track[this.trackPos]+this.patternPos;d;){switch(e=d.channel,d.enabled=0,s=this.patterns[a+d.index],d.effect=s.effect,d.param=s.param,s.sample?(l=d.sample=this.samples[s.sample],e.volume=d.volume=l.volume):l=d.sample,s.note&&(3==d.effect||5==d.effect?s.note<d.period?(d.portaDir=1,d.portaPeriod=s.note):s.note>d.period?(d.portaDir=0,d.portaPeriod=s.note):d.portaPeriod=0:(d.enabled=1,d.vibratoPos=0,e.enabled=0,e.pointer=l.pointer,e.length=l.length,e.period=d.period=s.note)),d.effect){case 11:this.trackPos=d.param-1,this.jumpFlag^=1;break;case 12:e.volume=d.param,this.version==o&&(d.volume=d.param);break;case 13:this.jumpFlag^=1;break;case 14:this.mixer.filter.active=1^d.param;break;case 15:u=d.param,u<1?u=1:u>31&&(u=31),this.speed=u,this.tick=0}d.enabled&&(e.enabled=1),e.pointer=l.loopPtr,e.length=l.repeat,d=d.next}++this.tick==this.speed&&(this.tick=0,this.patternPos+=4,(256==this.patternPos||this.jumpFlag)&&(this.patternPos=this.jumpFlag=0,this.trackPos=127&++this.trackPos,this.trackPos==this.length&&(this.trackPos=this.restart,this.mixer.complete=1)))}}}),d.voices[0]=e(0),d.voices[0].next=d.voices[1]=e(1),d.voices[1].next=d.voices[2]=e(2),d.voices[2].next=d.voices[3]=e(3),d.track=new Uint16Array(128),Object.seal(d)}var i=1,a=2,r=3,s=4,o=5,h=[856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,0],p=[0,24,49,74,97,120,141,161,180,197,212,224,235,244,250,253,255,253,250,244,235,224,212,197,180,161,141,120,97,74,49,24];window.neoart.MKPlayer=t}(),function(){function e(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},sample:{value:null,writable:!0},enabled:{value:0,writable:!0},loopCtr:{value:0,writable:!0},loopPos:{value:0,writable:!0},step:{value:0,writable:!0},period:{value:0,writable:!0},effect:{value:0,writable:!0},param:{value:0,writable:!0},volume:{value:0,writable:!0},pointer:{value:0,writable:!0},length:{value:0,writable:!0},loopPtr:{value:0,writable:!0},repeat:{value:0,writable:!0},finetune:{value:0,writable:!0},offset:{value:0,writable:!0},portaDir:{value:0,writable:!0},portaPeriod:{value:0,writable:!0},portaSpeed:{value:0,writable:!0},glissando:{value:0,writable:!0},tremoloParam:{value:0,writable:!0},tremoloPos:{value:0,writable:!0},tremoloWave:{value:0,writable:!0},vibratoParam:{value:0,writable:!0},vibratoPos:{value:0,writable:!0},vibratoWave:{value:0,writable:!0},funkPos:{value:0,writable:!0},funkSpeed:{value:0,writable:!0},funkWave:{value:0,writable:!0},initialize:{value:function(){this.channel=null,this.sample=null,this.enabled=0,this.loopCtr=0,this.loopPos=0,this.step=0,this.period=0,this.effect=0,this.param=0,this.volume=0,this.pointer=0,this.length=0,this.loopPtr=0,this.repeat=0,this.finetune=0,this.offset=0,this.portaDir=0,this.portaPeriod=0,this.portaSpeed=0,this.glissando=0,this.tremoloParam=0,this.tremoloPos=0,this.tremoloWave=0,this.vibratoParam=0,this.vibratoPos=0,this.vibratoWave=0,this.funkPos=0,this.funkSpeed=0,this.funkWave=0}}})}function t(){var e=l();return Object.defineProperties(e,{step:{value:0,writable:!0}}),Object.seal(e)}function i(){var e=n();return Object.defineProperties(e,{finetune:{value:0,writable:!0},realLen:{value:0,writable:!0}}),Object.seal(e)}function a(a){var l=u(a);return Object.defineProperties(l,{id:{value:"PTPlayer"},track:{value:null,writable:!0},patterns:{value:[],writable:!0},samples:{value:[],writable:!0},length:{value:0,writable:!0},voices:{value:[],writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},patternBreak:{value:0,writable:!0},patternDelay:{value:0,writable:!0},breakPos:{value:0,writable:!0},jumpFlag:{value:0,writable:!0},vibratoDepth:{value:0,writable:!0},force:{set:function(e){e<r?e=r:e>o&&(e=o),this.version=e,this.vibratoDepth=e<s?6:7}},initialize:{value:function(){var e=this.voices[0];for(this.tempo=125,this.speed=6,this.trackPos=0,this.patternPos=0,this.patternBreak=0,this.patternDelay=0,this.breakPos=0,this.jumpFlag=0,this.reset(),this.force=this.version;e;)e.initialize(),e.channel=this.mixer.channels[e.index],e.sample=this.samples[0],e=e.next}},loader:{value:function(e){var a,l,n,h,p,u,d=0,v=0;if(!(e.length<2106)&&(e.position=1080,"M.K."==(l=e.readString(4))||"M!K!"==l)){for(e.position=0,this.title=e.readString(20),this.version=r,e.position+=22,a=1;a<32;++a)u=e.readUshort(),u?(p=i(),e.position-=24,p.name=e.readString(22),p.length=p.realLen=u<<1,e.position+=2,p.finetune=37*e.readUbyte(),p.volume=e.readUbyte(),p.loop=e.readUshort()<<1,p.repeat=e.readUshort()<<1,e.position+=22,p.pointer=v,v+=p.length,this.samples[a]=p):(this.samples[a]=null,e.position+=28);for(e.position=950,this.length=e.readUbyte(),e.position++,a=0;a<128;++a)u=e.readUbyte()<<8,this.track[a]=u,u>d&&(d=u);for(e.position=1084,d+=256,this.patterns.length=d,a=0;a<d;++a)h=t(),h.step=u=e.readUint(),h.note=u>>16&4095,h.effect=u>>8&15,h.sample=u>>24&240|u>>12&15,h.param=255&u,this.patterns[a]=h,(h.sample>31||!this.samples[h.sample])&&(h.sample=0),15==h.effect&&h.param>31&&(this.version=s),8==h.effect&&(this.version=o);for(this.mixer.store(e,v),a=1;a<32;++a)if(p=this.samples[a])for(p.loop||p.repeat>4?(p.loopPtr=p.pointer+p.loop,p.length=p.loop+p.repeat):(p.loopPtr=this.mixer.memory.length,p.repeat=2),v=p.pointer+2,n=p.pointer;n<v;++n)this.mixer.memory[n]=0;p=i(),p.pointer=p.loopPtr=this.mixer.memory.length,p.length=p.repeat=2,this.samples[0]=p}}},process:{value:function(){var e,t,i,a,r,s,o=this.voices[0];if(this.tick)this.effects();else if(this.patternDelay)this.effects();else{for(i=this.track[this.trackPos]+this.patternPos;o;)if(e=o.channel,o.enabled=0,o.step||(e.period=o.period),a=this.patterns[i+o.index],o.step=a.step,o.effect=a.effect,o.param=a.param,a.sample?(r=o.sample=this.samples[a.sample],o.pointer=r.pointer,o.length=r.length,o.loopPtr=o.funkWave=r.loopPtr,o.repeat=r.repeat,o.finetune=r.finetune,e.volume=o.volume=r.volume):r=o.sample,a.note){if(3664==(4080&o.step))o.finetune=37*(15&o.param);else if(3==o.effect||5==o.effect)if(a.note==o.period)o.portaPeriod=0;else{for(t=o.finetune,s=t+37;t<s&&!(a.note>=h[t]);++t);t==s&&s--,t>0&&(s=o.finetune/37>>0&8)&&t--,o.portaPeriod=h[t],o.portaDir=a.note>o.portaPeriod?0:1}else 9==o.effect&&this.moreEffects(o);for(t=0;t<37&&!(a.note>=h[t]);++t);o.period=h[o.finetune+t],3792!=(4080&o.step)?(o.vibratoWave<4&&(o.vibratoPos=0),o.tremoloWave<4&&(o.tremoloPos=0),e.enabled=0,e.pointer=o.pointer,e.length=o.length,e.period=o.period,o.enabled=1,this.moreEffects(o),o=o.next):(o.funkSpeed&&this.updateFunk(o),this.extended(o),o=o.next)}else this.moreEffects(o),o=o.next;for(o=this.voices[0];o;)e=o.channel,o.enabled&&(e.enabled=1),e.pointer=o.loopPtr,e.length=o.repeat,o=o.next}++this.tick==this.speed&&(this.tick=0,this.patternPos+=4,this.patternDelay&&--this.patternDelay&&(this.patternPos-=4),this.patternBreak&&(this.patternBreak=0,this.patternPos=this.breakPos,this.breakPos=0),(256==this.patternPos||this.jumpFlag)&&(this.patternPos=this.breakPos,this.breakPos=0,this.jumpFlag=0,++this.trackPos==this.length&&(this.trackPos=0,this.mixer.complete=1)))}},effects:{value:function(){for(var e,t,i,a,r,s,o=this.voices[0];o;)if(e=o.channel,o.funkSpeed&&this.updateFunk(o),0!=(4095&o.step)){switch(o.effect){case 0:if(!(r=this.tick%3)){e.period=o.period,o=o.next;continue}for(r=1==r?o.param>>4:15&o.param,t=o.finetune,i=t+37;t<i;++t)if(o.period>=h[t]){e.period=h[t+r];break}break;case 1:o.period-=o.param,o.period<113&&(o.period=113),e.period=o.period;break;case 2:o.period+=o.param,o.period>856&&(o.period=856),e.period=o.period;break;case 3:case 5:if(5==o.effect?a=1:(o.portaSpeed=o.param,o.param=0),o.portaPeriod)if(o.portaDir?(o.period-=o.portaSpeed,o.period<=o.portaPeriod&&(o.period=o.portaPeriod,o.portaPeriod=0)):(o.period+=o.portaSpeed,o.period>=o.portaPeriod&&(o.period=o.portaPeriod,o.portaPeriod=0)),o.glissando){for(t=o.finetune,r=t+37;t<r&&!(o.period>=h[t]);++t);t==r&&t--,e.period=h[t]}else e.period=o.period;break;case 4:case 6:6==o.effect?a=1:o.param&&(r=15&o.param,r&&(o.vibratoParam=240&o.vibratoParam|r),(r=240&o.param)&&(o.vibratoParam=15&o.vibratoParam|r)),i=o.vibratoPos>>2&31,s=3&o.vibratoWave,s?(r=255,i<<=3,1==s&&(o.vibratoPos>127?r-=i:r=i)):r=p[i],r=(15&o.vibratoParam)*r>>this.vibratoDepth,o.vibratoPos>127?e.period=o.period-r:e.period=o.period+r,r=o.vibratoParam>>2&60,o.vibratoPos=o.vibratoPos+r&255;break;case 7:e.period=o.period,o.param&&(r=15&o.param,r&&(o.tremoloParam=240&o.tremoloParam|r),(r=240&o.param)&&(o.tremoloParam=15&o.tremoloParam|r)),i=o.tremoloPos>>2&31,s=3&o.tremoloWave,s?(r=255,i<<=3,1==s&&(o.tremoloPos>127?r-=i:r=i)):r=p[i],r=(15&o.tremoloParam)*r>>6,o.tremoloPos>127?e.volume=o.volume-r:e.volume=o.volume+r,r=o.tremoloParam>>2&60,o.tremoloPos=o.tremoloPos+r&255;break;case 10:a=1;break;case 14:this.extended(o)}a&&(a=0,r=o.param>>4,r?o.volume+=r:o.volume-=15&o.param,o.volume<0?o.volume=0:o.volume>64&&(o.volume=64),e.volume=o.volume),o=o.next}else e.period=o.period,o=o.next}},moreEffects:{value:function(e){var t,i=e.channel;switch(e.funkSpeed&&this.updateFunk(e),e.effect){case 9:e.param&&(e.offset=e.param),t=e.offset<<8,t>=e.length?e.length=2:(e.pointer+=t,e.length-=t);break;case 11:this.trackPos=e.param-1,this.breakPos=0,this.jumpFlag=1;break;case 12:e.volume=e.param,e.volume>64&&(e.volume=64),i.volume=e.volume;break;case 13:this.breakPos=10*(e.param>>4)+(15&e.param),this.breakPos>63?this.breakPos=0:this.breakPos<<=2,this.jumpFlag=1;break;case 14:this.extended(e);break;case 15:if(!e.param)return;e.param<32?this.speed=e.param:this.mixer.samplesTick=2.5*this.sampleRate/e.param>>0,this.tick=0}}},extended:{value:function(e){var t,i,a,r=e.channel,s=e.param>>4,o=15&e.param;switch(s){case 0:this.mixer.filter.active=o;break;case 1:if(this.tick)return;e.period-=o,e.period<113&&(e.period=113),r.period=e.period;break;case 2:if(this.tick)return;e.period+=o,e.period>856&&(e.period=856),r.period=e.period;break;case 3:e.glissando=o;break;case 4:e.vibratoWave=o;break;case 5:e.finetune=37*o;break;case 6:if(this.tick)return;o?(e.loopCtr?e.loopCtr--:e.loopCtr=o,e.loopCtr&&(this.breakPos=e.loopPos<<2,this.patternBreak=1)):e.loopPos=this.patternPos>>2;break;case 7:e.tremoloWave=o;break;case 8:for(i=e.length-2,a=this.mixer.memory,t=e.loopPtr;t<i;)a[t]=.5*(a[t]+a[++t]);a[++t]=.5*(a[t]+a[0]);break;case 9:if(this.tick||!o||!e.period)return;if(this.tick%o)return;r.enabled=0,r.pointer=e.pointer,r.length=e.length,r.delay=30,r.enabled=1,r.pointer=e.loopPtr,r.length=e.repeat,r.period=e.period;break;case 10:if(this.tick)return;e.volume+=o,e.volume>64&&(e.volume=64),r.volume=e.volume;break;case 11:if(this.tick)return;e.volume-=o,e.volume<0&&(e.volume=0),r.volume=e.volume;break;case 12:this.tick==o&&(r.volume=e.volume=0);break;case 13:if(this.tick!=o||!e.period)return;r.enabled=0,r.pointer=e.pointer,r.length=e.length,r.delay=30,r.enabled=1,r.pointer=e.loopPtr,r.length=e.repeat,r.period=e.period;break;case 14:if(this.tick||this.patternDelay)return;this.patternDelay=++o;break;case 15:if(this.tick)return;e.funkSpeed=o,o&&this.updateFunk(e)}}},updateFunk:{value:function(e){var t,i,a=e.channel,s=d[e.funkSpeed];e.funkPos+=s,e.funkPos<128||(e.funkPos=0,this.version==r?(t=e.pointer+e.sample.realLen-e.repeat,i=e.funkWave+e.repeat,i>t&&(i=e.loopPtr,a.length=e.repeat),a.pointer=e.funkWave=i):(t=e.loopPtr+e.repeat,i=e.funkWave+1,i>=t&&(i=e.loopPtr),this.mixer.memory[i]=-this.mixer.memory[i]))}}}),l.voices[0]=e(0),l.voices[0].next=l.voices[1]=e(1),l.voices[1].next=l.voices[2]=e(2),l.voices[2].next=l.voices[3]=e(3),l.track=new Uint16Array(128),Object.seal(l)}var r=1,s=2,o=3,h=[856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,0,850,802,757,715,674,637,601,567,535,505,477,450,425,401,379,357,337,318,300,284,268,253,239,225,213,201,189,179,169,159,150,142,134,126,119,113,0,844,796,752,709,670,632,597,563,532,502,474,447,422,398,376,355,335,316,298,282,266,251,237,224,211,199,188,177,167,158,149,141,133,125,118,112,0,838,791,746,704,665,628,592,559,528,498,470,444,419,395,373,352,332,314,296,280,264,249,235,222,209,198,187,176,166,157,148,140,132,125,118,111,0,832,785,741,699,660,623,588,555,524,495,467,441,416,392,370,350,330,312,294,278,262,247,233,220,208,196,185,175,165,156,147,139,131,124,117,110,0,826,779,736,694,655,619,584,551,520,491,463,437,413,390,368,347,328,309,292,276,260,245,232,219,206,195,184,174,164,155,146,138,130,123,116,109,0,820,774,730,689,651,614,580,547,516,487,460,434,410,387,365,345,325,307,290,274,258,244,230,217,205,193,183,172,163,154,145,137,129,122,115,109,0,814,768,725,684,646,610,575,543,513,484,457,431,407,384,363,342,323,305,288,272,256,242,228,216,204,192,181,171,161,152,144,136,128,121,114,108,0,907,856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,0,900,850,802,757,715,675,636,601,567,535,505,477,450,425,401,379,357,337,318,300,284,268,253,238,225,212,200,189,179,169,159,150,142,134,126,119,0,894,844,796,752,709,670,632,597,563,532,502,474,447,422,398,376,355,335,316,298,282,266,251,237,223,211,199,188,177,167,158,149,141,133,125,118,0,887,838,791,746,704,665,628,592,559,528,498,470,444,419,395,373,352,332,314,296,280,264,249,235,222,209,198,187,176,166,157,148,140,132,125,118,0,881,832,785,741,699,660,623,588,555,524,494,467,441,416,392,370,350,330,312,294,278,262,247,233,220,208,196,185,175,165,156,147,139,131,123,117,0,875,826,779,736,694,655,619,584,551,520,491,463,437,413,390,368,347,328,309,292,276,260,245,232,219,206,195,184,174,164,155,146,138,130,123,116,0,868,820,774,730,689,651,614,580,547,516,487,460,434,410,387,365,345,325,307,290,274,258,244,230,217,205,193,183,172,163,154,145,137,129,122,115,0,862,814,768,725,684,646,610,575,543,513,484,457,431,407,384,363,342,323,305,288,272,256,242,228,216,203,192,181,171,161,152,144,136,128,121,114,0],p=[0,24,49,74,97,120,141,161,180,197,212,224,235,244,250,253,255,253,250,244,235,224,212,197,180,161,141,120,97,74,49,24],d=[0,5,6,7,8,10,11,13,16,19,22,26,32,43,64,128];window.neoart.PTPlayer=a}(),function(){function e(e,t){return Object.create(null,{index:{value:e,writable:!0},bitFlag:{value:t,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},sample:{value:null,writable:!0},trackPtr:{value:0,writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},tick:{value:0,writable:!0},busy:{value:0,writable:!0},flags:{value:0,writable:!0},note:{value:0,writable:!0},period:{value:0,writable:!0},volume:{value:0,writable:!0},portaSpeed:{value:0,writable:!0},vibratoPtr:{value:0,writable:!0},vibratoPos:{value:0,writable:!0},synthPos:{value:0,writable:!0},initialize:{value:function(){this.channel=null,this.sample=null,this.trackPtr=0,this.trackPos=0,this.patternPos=0,this.tick=1,this.busy=1,this.flags=0,this.note=0,this.period=0,this.volume=0,this.portaSpeed=0,this.vibratoPtr=0,this.vibratoPos=0,this.synthPos=0}}})}function t(){var e=n();return Object.defineProperties(e,{relative:{value:0,writable:!0},divider:{value:0,writable:!0},vibrato:{value:0,writable:!0},hiPos:{value:0,writable:!0},loPos:{value:0,writable:!0},wave:{value:[],writable:!0}}),Object.seal(e)}function i(){return Object.create(null,{speed:{value:0,writable:!0},tracks:{value:null,writable:!0}})}function a(a){var r=u(a);return Object.defineProperties(r,{id:{value:"RHPlayer"},songs:{value:[],writable:!0},samples:{value:[],writable:!0},song:{value:null,writable:!0},periods:{value:0,writable:!0},vibrato:{value:0,writable:!0},voices:{value:[],writable:!0},stream:{value:null,writable:!0},complete:{value:0,writable:!0},variant:{value:0,writable:!0},initialize:{value:function(){var e,t,i,a=this.voices[3];for(this.reset(),this.song=this.songs[this.playSong],this.complete=15,e=0;e<this.samples.length;++e)if(i=this.samples[e],i.wave.length)for(t=0;t<i.length;++t)this.mixer.memory[i.pointer+t]=i.wave[t];for(;a;)a.initialize(),a.channel=this.mixer.channels[a.index],a.trackPtr=this.song.tracks[a.index],a.trackPos=4,this.stream.position=a.trackPtr,a.patternPos=this.stream.readUint(),a=a.next}},loader:{value:function(e){var a,r,s,o,l,n,h,p,u,d,v,b,c;for(e.position=44;e.position<1024;)if(32272==(c=e.readUshort())||32288==c)16890==(c=e.readUshort())&&(a=e.position+e.readUshort(),c=e.readUshort(),53756==c?(n=a+e.readUint(),this.mixer.loopLen=64,e.position+=2):(n=a,this.mixer.loopLen=512),h=e.position+e.readUshort(),114==(c=e.readUbyte())&&(p=e.readUbyte()));else if(20937==c){if(e.position+=2,17914==(c=e.readUshort()))for(b=e.position+e.readUshort(),e.position+=2;;)if(19450==(c=e.readUshort())){v=e.position+e.readUshort();break}}else if(49404==c)e.position+=2,16875==(c=e.readUshort())&&(d=e.readUshort());else if(13421==c)e.position+=2,18938==(c=e.readUshort())&&(this.vibrato=e.position+e.readUshort());else if(16960==c&&17914==(c=e.readUshort())){this.periods=e.position+e.readUshort();break}if(h&&n&&p&&d){for(e.position=n,this.samples=[],p++,a=0;a<p;++a)l=t(),l.length=e.readUint(),l.relative=parseInt(3579545/e.readUshort()),l.pointer=this.mixer.store(e,l.length),this.samples[a]=l;for(e.position=h,a=0;a<p;++a)l=this.samples[a],e.position+=4,l.loopPtr=e.readInt(),e.position+=6,l.volume=e.readUshort(),v&&(l.divider=e.readUshort(),l.vibrato=e.readUshort(),l.hiPos=e.readUshort(),l.loPos=e.readUshort(),e.position+=8);if(v){if(e.position=v,a=v-h>>5,s=a+3,this.variant=1,a>=p)for(r=p;r<a;++r)this.samples[r]=t();for(;a<s;++a){for(l=t(),e.position+=4,l.loopPtr=e.readInt(),l.length=e.readUshort(),l.relative=e.readUshort(),e.position+=2,l.volume=e.readUshort(),l.divider=e.readUshort(),l.vibrato=e.readUshort(),l.hiPos=e.readUshort(),l.loPos=e.readUshort(),o=e.position,e.position=b,e.position=e.readInt(),l.pointer=this.mixer.memory.length,this.mixer.memory.length+=l.length,r=0;r<l.length;++r)l.wave[r]=e.readByte();this.samples[a]=l,b+=4,e.position=o}}for(e.position=d,this.songs=[],c=65536;;){for(u=i(),e.position++,u.tracks=new Uint32Array(4),u.speed=e.readUbyte(),a=0;a<4;++a)r=e.readUint(),r<c&&(c=r),u.tracks[a]=r;if(this.songs.push(u),c-e.position<18)break}for(this.lastSong=this.songs.length-1,e.length=n,e.position=352;e.position<512;)45116==(c=e.readUshort())&&(c=e.readUshort(),133==c?this.variant=2:134==c?this.variant=4:135==c&&(this.variant=3));this.stream=e,this.version=1}}},process:{value:function(){for(var e,t,i,a,r=this.voices[3];r;){if(e=r.channel,this.stream.position=r.patternPos,i=r.sample,r.busy||(r.busy=1,0==i.loopPtr?(e.pointer=this.mixer.loopPtr,e.length=this.mixer.loopLen):i.loopPtr>0&&(e.pointer=i.pointer+i.loopPtr,e.length=i.length-i.loopPtr)),0==--r.tick)for(r.flags=0,t=1;t;)if((a=this.stream.readByte())<0)switch(a){case-121:3==this.variant&&(r.volume=this.stream.readUbyte());break;case-122:4==this.variant&&(r.volume=this.stream.readUbyte());break;case-123:this.variant>1&&(this.mixer.complete=1);break;case-124:this.stream.position=r.trackPtr+r.trackPos,a=this.stream.readUint(),r.trackPos+=4,a||(this.stream.position=r.trackPtr,a=this.stream.readUint(),r.trackPos=4,this.loopSong||(this.complete&=~r.bitFlag,this.complete||(this.mixer.complete=1))),this.stream.position=a;break;case-125:4==this.variant&&(r.flags|=4);break;case-126:r.tick=this.song.speed*this.stream.readByte(),r.patternPos=this.stream.position,e.pointer=this.mixer.loopPtr,e.length=this.mixer.loopLen,t=0;break;case-127:r.portaSpeed=this.stream.readByte(),r.flags|=1;break;case-128:a=this.stream.readByte(),a<0&&(a=0),r.sample=i=this.samples[a],r.vibratoPtr=this.vibrato+i.vibrato,r.vibratoPos=r.vibratoPtr}else r.tick=this.song.speed*a,r.note=this.stream.readByte(),r.patternPos=this.stream.position,r.synthPos=i.loPos,r.vibratoPos=r.vibratoPtr,e.pointer=i.pointer,e.length=i.length,e.volume=r.volume?r.volume:i.volume,this.stream.position=this.periods+(r.note<<1),a=this.stream.readUshort()*i.relative,e.period=r.period=a>>10,e.enabled=1,r.busy=t=0;else 1==r.tick&&(4==this.variant&&4&r.flags||(e.enabled=0)),1&r.flags&&(e.period=r.period+=r.portaSpeed),i.divider&&(this.stream.position=r.vibratoPos,a=this.stream.readByte(),-124==a&&(this.stream.position=r.vibratoPtr,a=this.stream.readByte()),r.vibratoPos=this.stream.position,a=parseInt(r.period/i.divider)*a,e.period=r.period+a);i.hiPos&&(a=0,2&r.flags?--r.synthPos<=i.loPos&&(r.flags&=-3,a=60):++r.synthPos>i.hiPos&&(r.flags|=2,a=60),this.mixer.memory[i.pointer+r.synthPos]=a),r=r.next}}}}),r.voices[3]=e(3,8),r.voices[3].next=r.voices[2]=e(2,4),r.voices[2].next=r.voices[1]=e(1,2),r.voices[1].next=r.voices[0]=e(0,1),Object.seal(r)}window.neoart.RHPlayer=a}(),function(){function e(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},step:{value:0,writable:!0},row:{value:0,writable:!0},sample:{value:0,writable:!0},samplePtr:{value:0,writable:!0},sampleLen:{value:0,writable:!0},note:{value:0,writable:!0},noteTimer:{value:0,writable:!0},period:{value:0,writable:!0},volume:{value:0,writable:!0},bendTo:{value:0,writable:!0},bendSpeed:{value:0,writable:!0},arpeggioCtr:{value:0,writable:!0},envelopeCtr:{value:0,writable:!0},pitchCtr:{value:0,writable:!0},pitchFallCtr:{value:0,writable:!0},sustainCtr:{value:0,writable:!0},phaseTimer:{value:0,writable:!0},phaseSpeed:{value:0,writable:!0},wavePos:{value:0,writable:!0},waveList:{value:0,writable:!0},waveTimer:{value:0,writable:!0},waitCtr:{value:0,writable:!0},initialize:{value:function(){this.step=0,this.row=0,this.sample=0,this.samplePtr=-1,this.sampleLen=0,this.note=0,this.noteTimer=0,this.period=39321,this.volume=0,this.bendTo=0,this.bendSpeed=0,this.arpeggioCtr=0,this.envelopeCtr=0,this.pitchCtr=0,this.pitchFallCtr=0,this.sustainCtr=0,this.phaseTimer=0,this.phaseSpeed=0,this.wavePos=0,this.waveList=0,this.waveTimer=0,this.waitCtr=0}}})}function t(){var e=l();return Object.defineProperties(e,{speed:{value:0,writable:!0}}),Object.seal(e)}function i(){var e=n();return Object.defineProperties(e,{waveform:{value:0,writable:!0},arpeggio:{value:null,writable:!0},attackSpeed:{value:0,writable:!0},attackMax:{value:0,writable:!0},decaySpeed:{value:0,writable:!0},decayMin:{value:0,writable:!0},sustain:{value:0,writable:!0},releaseSpeed:{value:0,writable:!0},releaseMin:{value:0,writable:!0},phaseShift:{value:0,writable:!0},phaseSpeed:{value:0,writable:!0},finetune:{value:0,writable:!0},pitchFall:{value:0,writable:!0}}),e.arpeggio=new Uint8Array(16),Object.seal(e)}function a(a){var l=u(a);return Object.defineProperties(l,{id:{value:"S1Player"},tracksPtr:{value:null,writable:!0},tracks:{value:[],writable:!0},patternsPtr:{value:null,writable:!0},patterns:{value:[],writable:!0},samples:{value:[],writable:!0},waveLists:{value:null,writable:!0},speedDef:{value:0,writable:!0},patternDef:{value:0,writable:!0},mix1Speed:{value:0,writable:!0},mix2Speed:{value:0,writable:!0},mix1Dest:{value:0,writable:!0},mix2Dest:{value:0,writable:!0},mix1Source1:{value:0,writable:!0},mix1Source2:{value:0,writable:!0},mix2Source1:{value:0,writable:!0},mix2Source2:{value:0,writable:!0},doFilter:{value:0,writable:!0},doReset:{value:0,writable:!0},voices:{value:[],writable:!0},trackPos:{value:0,writable:!0},trackEnd:{value:0,writable:!0},trackLen:{value:0,writable:!0},patternPos:{value:0,writable:!0},patternEnd:{value:0,writable:!0},patternLen:{value:0,writable:!0},mix1Ctr:{value:0,writable:!0},mix2Ctr:{value:0,writable:!0},mix1Pos:{value:0,writable:!0},mix2Pos:{value:0,writable:!0},audPtr:{value:0,writable:!0},audLen:{value:0,writable:!0},audPer:{value:0,writable:!0},audVol:{value:0,writable:!0},initialize:{value:function(){var e,t,i=this.voices[0];for(this.reset(),this.speed=this.speedDef,this.tick=this.speedDef,this.trackPos=1,this.trackEnd=0,this.patternPos=-1,this.patternEnd=0,this.patternLen=this.patternDef,this.mix1Ctr=this.mix1Pos=0,this.mix2Ctr=this.mix2Pos=0;i;)i.initialize(),e=this.mixer.channels[i.index],i.channel=e,i.step=this.tracksPtr[i.index],t=this.tracks[i.step],i.row=this.patternsPtr[t.pattern],i.sample=this.patterns[i.row].sample,e.length=32,e.period=i.period,e.enabled=1,i=i.next}},loader:{value:function(e){for(var a,l,n,u,v,b,c,m,f,w,g,P,y,k,S;e.bytesAvailable>8;)if(16890==(f=e.readUshort())&&(n=e.readUshort(),53736==(f=e.readUshort())&&65492==(f=e.readUshort()))){S=4076==n?r:5222==n?p:n,b=n+e.position-6;break}if(b&&(e.position=b," SID-MON BY R.v.VLIET  (c) 1988 "==e.readString(32))){for(e.position=b-44,f=e.readUint(),l=1;l<4;++l)this.tracksPtr[l]=(e.readUint()-f)/6>>0;for(e.position=b-8,f=e.readUint(),v=e.readUint(),v<f&&(v=e.length-b),P=v-f>>2,this.patternsPtr=new Uint32Array(P),e.position=b+f+4,l=1;l<P;++l){if(0==(f=e.readUint()/5>>0)){P=l;break}this.patternsPtr[l]=f}for(e.position=b-44,f=e.readUint(),e.position=b-28,v=(e.readUint()-f)/6>>0,this.tracks.length=v,e.position=b+f,l=0;l<v;++l)w=h(),w.pattern=e.readUint(),w.pattern>=P&&(w.pattern=0),e.readByte(),w.transpose=e.readByte(),(w.transpose<-99||w.transpose>99)&&(w.transpose=0),this.tracks[l]=w;for(e.position=b-24,f=e.readUint(),k=e.readUint()-f,l=0;l<32;++l)this.mixer.memory[l]=0;for(this.mixer.store(e,k,b+f),k>>=5,e.position=b-16,f=e.readUint(),v=e.readUint()-f+16,n=k+2<<4,this.waveLists=new Uint8Array(v<n?n:v),e.position=b+f,l=0;l<n;)this.waveLists[l++]=l>>4,this.waveLists[l++]=255,this.waveLists[l++]=255,this.waveLists[l++]=16,l+=12;for(l=16;l<v;++l)this.waveLists[l]=e.readUbyte();if(e.position=b-20,e.position=b+e.readUint(),this.mix1Source1=e.readUint(),this.mix2Source1=e.readUint(),this.mix1Source2=e.readUint(),this.mix2Source2=e.readUint(),this.mix1Dest=e.readUint(),this.mix2Dest=e.readUint(),this.patternDef=e.readUint(),this.trackLen=e.readUint(),this.speedDef=e.readUint(),this.mix1Speed=e.readUint(),this.mix2Speed=e.readUint(),this.mix1Source1>k&&(this.mix1Source1=0),this.mix2Source1>k&&(this.mix2Source1=0),this.mix1Source2>k&&(this.mix1Source2=0),this.mix2Source2>k&&(this.mix2Source2=0),this.mix1Dest>k&&(this.mix1Speed=0),this.mix2Dest>k&&(this.mix2Speed=0),0==this.speedDef&&(this.speedDef=4),e.position=b-28,n=e.readUint(),g=e.readUint()-n>>5,g>63&&(g=63),v=g+1,e.position=b-4,1==(f=e.readUint())){if(e.position=1820,19962!=(f=e.readUshort())&&(e.position=1788,19962!=(f=e.readUshort())))return void(this.version=0);for(e.position+=e.readUshort(),this.samples.length=v+3,l=0;l<3;++l)m=i(),m.waveform=16+l,m.length=d[l],m.pointer=this.mixer.store(e,m.length),m.loop=m.loopPtr=0,m.repeat=4,m.volume=64,this.samples[v+l]=m,e.position+=m.length}else this.samples.length=v,e.position=b+f,a=e.readUint(),y=15+(a>>5),u=e.position,a+=u;for(m=i(),this.samples[0]=m,e.position=b+n,l=1;l<v;++l){for(m=i(),m.waveform=e.readUint(),n=0;n<16;++n)m.arpeggio[n]=e.readUbyte();if(m.attackSpeed=e.readUbyte(),m.attackMax=e.readUbyte(),m.decaySpeed=e.readUbyte(),m.decayMin=e.readUbyte(),m.sustain=e.readUbyte(),e.readByte(),m.releaseSpeed=e.readUbyte(),m.releaseMin=e.readUbyte(),m.phaseShift=e.readUbyte(),m.phaseSpeed=e.readUbyte(),m.finetune=e.readUbyte(),m.pitchFall=e.readByte(),S==p?(m.pitchFall=m.finetune,m.finetune=0):(m.finetune>15&&(m.finetune=0),m.finetune*=67),m.phaseShift>k&&(m.phaseShift=0,m.phaseSpeed=0),m.waveform>15)if(y>15&&m.waveform>y)m.waveform=0;else{if((f=u+(m.waveform-16<<5))>=e.length)continue;n=e.position,e.position=f,m.pointer=e.readUint(),m.loop=e.readUint(),m.length=e.readUint(),m.name=e.readString(20),0==m.loop||99999==m.loop||199999==m.loop||m.loop>=m.length?(m.loop=0,m.repeat=S==r?2:4):(m.repeat=m.length-m.loop,m.loop-=m.pointer),m.length-=m.pointer,m.length<m.loop+m.repeat&&(m.length=m.loop+m.repeat),m.pointer=this.mixer.store(e,m.length,a+m.pointer),m.repeat<6||0==m.loop?m.loopPtr=0:m.loopPtr=m.pointer+m.loop,e.position=n}else m.waveform>k&&(m.waveform=0);this.samples[l]=m}for(e.position=b-12,f=e.readUint(),v=(e.readUint()-f)/5>>0,this.patterns.length=v,e.position=b+f,l=0;l<v;++l)c=t(),c.note=e.readUbyte(),c.sample=e.readUbyte(),c.effect=e.readUbyte(),c.param=e.readUbyte(),c.speed=e.readUbyte(),S==p?(c.note>0&&c.note<255&&(c.note+=469),c.effect>0&&c.effect<255&&(c.effect+=469),c.sample>59&&(c.sample=g+(c.sample-60))):c.sample>g&&(c.sample=0),this.patterns[l]=c;S==s||S==o||S==p?(S==s&&(this.mix1Speed=this.mix2Speed=0),this.doReset=this.doFilter=0):this.doReset=this.doFilter=1,this.version=1}}},process:{
value:function(){for(var e,t,i,a,r,s,o,l,n,h,p=this.mixer.memory,u=this.voices[0];u;){if(e=u.channel,this.audPtr=-1,this.audLen=this.audPer=this.audVol=0,0==this.tick)if(this.patternEnd&&(this.trackEnd?u.step=this.tracksPtr[u.index]:u.step++,n=this.tracks[u.step],u.row=this.patternsPtr[n.pattern],this.doReset&&(u.noteTimer=0)),0==u.noteTimer){if(r=this.patterns[u.row],0==r.sample?r.note&&(u.noteTimer=r.speed,u.waitCtr&&(s=this.samples[u.sample],this.audPtr=s.pointer,this.audLen=s.length,u.samplePtr=s.loopPtr,u.sampleLen=s.repeat,u.waitCtr=1,e.enabled=0)):(s=this.samples[r.sample],u.waitCtr&&(e.enabled=u.waitCtr=0),s.waveform>15?(this.audPtr=s.pointer,this.audLen=s.length,u.samplePtr=s.loopPtr,u.sampleLen=s.repeat,u.waitCtr=1):(u.wavePos=0,u.waveList=s.waveform,a=u.waveList<<4,this.audPtr=this.waveLists[a]<<5,this.audLen=32,u.waveTimer=this.waveLists[++a]),u.noteTimer=r.speed,u.sample=r.sample,u.envelopeCtr=u.pitchCtr=u.pitchFallCtr=0),r.note&&(u.noteTimer=r.speed,255!=r.note))switch(s=this.samples[u.sample],n=this.tracks[u.step],u.note=r.note+n.transpose,u.period=this.audPer=v[1+s.finetune+u.note],u.phaseSpeed=s.phaseSpeed,u.bendSpeed=u.volume=0,u.envelopeCtr=u.pitchCtr=u.pitchFallCtr=0,r.effect){case 0:if(0==r.param)break;s.attackSpeed=r.param,s.attackMax=r.param,u.waveTimer=0;break;case 2:this.speed=r.param,u.waveTimer=0;break;case 3:this.patternLen=r.param,u.waveTimer=0;break;default:u.bendTo=r.effect+n.transpose,u.bendSpeed=r.param}u.row++}else u.noteTimer--;switch(s=this.samples[u.sample],this.audVol=u.volume,u.envelopeCtr){case 8:break;case 0:this.audVol+=s.attackSpeed,this.audVol>s.attackMax&&(this.audVol=s.attackMax,u.envelopeCtr+=2);break;case 2:this.audVol-=s.decaySpeed,(this.audVol<=s.decayMin||this.audVol<-256)&&(this.audVol=s.decayMin,u.envelopeCtr+=2,u.sustainCtr=s.sustain);break;case 4:u.sustainCtr--,0!=u.sustainCtr&&-256!=u.sustainCtr||(u.envelopeCtr+=2);break;case 6:this.audVol-=s.releaseSpeed,(this.audVol<=s.releaseMin||this.audVol<-256)&&(this.audVol=s.releaseMin,u.envelopeCtr=8)}u.volume=this.audVol,u.arpeggioCtr=15&++u.arpeggioCtr,a=s.finetune+s.arpeggio[u.arpeggioCtr]+u.note,u.period=this.audPer=v[a],u.bendSpeed&&(h=v[s.finetune+u.bendTo],a=1+~u.bendSpeed,a<-128&&(a&=255),u.pitchCtr+=a,u.period+=u.pitchCtr,(a<0&&u.period<=h||a>0&&u.period>=h)&&(u.note=u.bendTo,u.period=h,u.bendSpeed=0,u.pitchCtr=0)),s.phaseShift&&(u.phaseSpeed?u.phaseSpeed--:(u.phaseTimer=31&++u.phaseTimer,a=(s.phaseShift<<5)+u.phaseTimer,u.period+=p[a]>>2)),u.pitchFallCtr-=s.pitchFall,u.pitchFallCtr<-256&&(u.pitchFallCtr+=256),u.period+=u.pitchFallCtr,0==u.waitCtr&&(u.waveTimer?u.waveTimer--:u.wavePos<16&&(a=(u.waveList<<4)+u.wavePos,h=this.waveLists[a++],255==h?u.wavePos=254&this.waveLists[a]:(this.audPtr=h<<5,u.waveTimer=this.waveLists[a],u.wavePos+=2))),this.audPtr>-1&&(e.pointer=this.audPtr),0!=this.audPer&&(e.period=u.period),0!=this.audLen&&(e.length=this.audLen),s.volume?e.volume=s.volume:e.volume=this.audVol>>2,e.enabled=1,u=u.next}if(this.trackEnd=this.patternEnd=0,++this.tick>this.speed&&(this.tick=0,++this.patternPos==this.patternLen&&(this.patternPos=0,this.patternEnd=1,++this.trackPos==this.trackLen&&(this.trackPos=this.trackEnd=this.mixer.complete=1))),this.mix1Speed){if(0==this.mix1Ctr)for(this.mix1Ctr=this.mix1Speed,a=this.mix1Pos=31&++this.mix1Pos,t=31+(this.mix1Dest<<5),o=31+(this.mix1Source1<<5),l=this.mix1Source2<<5,i=31;i>-1;--i)p[t--]=p[o--]+p[l+a]>>1,a=31&--a;this.mix1Ctr--}if(this.mix2Speed){if(0==this.mix2Ctr)for(this.mix2Ctr=this.mix2Speed,a=this.mix2Pos=31&++this.mix2Pos,t=31+(this.mix2Dest<<5),o=31+(this.mix2Source1<<5),l=this.mix2Source2<<5,i=31;i>-1;--i)p[t--]=p[o--]+p[l+a]>>1,a=31&--a;this.mix2Ctr--}for(this.doFilter&&(a=this.mix1Pos+32,p[a]=1+~p[a]),u=this.voices[0];u;)e=u.channel,1==u.waitCtr?u.waitCtr++:2==u.waitCtr&&(u.waitCtr++,e.pointer=u.samplePtr,e.length=u.sampleLen),u=u.next}}}),l.voices[0]=e(0),l.voices[0].next=l.voices[1]=e(1),l.voices[1].next=l.voices[2]=e(2),l.voices[2].next=l.voices[3]=e(3),l.tracksPtr=new Uint32Array(4),Object.seal(l)}var r=4090,s=4464,o=4550,p=5188,d=[1166,408,908],v=[0,5760,5424,5120,4832,4560,4304,4064,3840,3616,3424,3232,3048,2880,2712,2560,2416,2280,2152,2032,1920,1808,1712,1616,1524,1440,1356,1280,1208,1140,1076,1016,960,904,856,808,762,720,678,640,604,570,538,508,480,452,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,0,0,0,0,0,0,0,4028,3806,3584,3394,3204,3013,2855,2696,2538,2395,2268,2141,2014,1903,1792,1697,1602,1507,1428,1348,1269,1198,1134,1071,1007,952,896,849,801,754,714,674,635,599,567,536,504,476,448,425,401,377,357,337,310,300,284,268,252,238,224,213,201,189,179,169,159,150,142,134,0,0,0,0,0,0,0,3993,3773,3552,3364,3175,2987,2830,2672,2515,2374,2248,2122,1997,1887,1776,1682,1588,1494,1415,1336,1258,1187,1124,1061,999,944,888,841,794,747,708,668,629,594,562,531,500,472,444,421,397,374,354,334,315,297,281,266,250,236,222,211,199,187,177,167,158,149,141,133,0,0,0,0,0,0,0,3957,3739,3521,3334,3147,2960,2804,2648,2493,2353,2228,2103,1979,1870,1761,1667,1574,1480,1402,1324,1247,1177,1114,1052,990,935,881,834,787,740,701,662,624,589,557,526,495,468,441,417,394,370,351,331,312,295,279,263,248,234,221,209,197,185,176,166,156,148,140,132,0,0,0,0,0,0,0,3921,3705,3489,3304,3119,2933,2779,2625,2470,2331,2208,2084,1961,1853,1745,1652,1560,1467,1390,1313,1235,1166,1104,1042,981,927,873,826,780,734,695,657,618,583,552,521,491,464,437,413,390,367,348,329,309,292,276,261,246,232,219,207,195,184,174,165,155,146,138,131,0,0,0,0,0,0,0,3886,3671,3457,3274,3090,2907,2754,2601,2448,2310,2188,2065,1943,1836,1729,1637,1545,1454,1377,1301,1224,1155,1094,1033,972,918,865,819,773,727,689,651,612,578,547,517,486,459,433,410,387,364,345,326,306,289,274,259,243,230,217,205,194,182,173,163,153,145,137,130,0,0,0,0,0,0,0,3851,3638,3426,3244,3062,2880,2729,2577,2426,2289,2168,2047,1926,1819,1713,1622,1531,1440,1365,1289,1213,1145,1084,1024,963,910,857,811,766,720,683,645,607,573,542,512,482,455,429,406,383,360,342,323,304,287,271,256,241,228,215,203,192,180,171,162,152,144,136,128,6848,6464,6096,5760,5424,5120,4832,4560,4304,4064,3840,3616,3424,3232,3048,2880,2712,2560,2416,2280,2152,2032,1920,1808,1712,1616,1524,1440,1356,1280,1208,1140,1076,1016,960,904,856,808,762,720,678,640,604,570,538,508,480,452,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127];window.neoart.S1Player=a}(),function(){function e(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},step:{value:null,writable:!0},row:{value:null,writable:!0},instr:{value:null,writable:!0},sample:{value:null,writable:!0},enabled:{value:0,writable:!0},pattern:{value:0,writable:!0},instrument:{value:0,writable:!0},note:{value:0,writable:!0},period:{value:0,writable:!0},volume:{value:0,writable:!0},original:{value:0,writable:!0},adsrPos:{value:0,writable:!0},sustainCtr:{value:0,writable:!0},pitchBend:{value:0,writable:!0},pitchBendCtr:{value:0,writable:!0},noteSlideTo:{value:0,writable:!0},noteSlideSpeed:{value:0,writable:!0},waveCtr:{value:0,writable:!0},wavePos:{value:0,writable:!0},arpeggioCtr:{value:0,writable:!0},arpeggioPos:{value:0,writable:!0},vibratoCtr:{value:0,writable:!0},vibratoPos:{value:0,writable:!0},speed:{value:0,writable:!0},initialize:{value:function(){this.step=null,this.row=null,this.instr=null,this.sample=null,this.enabled=0,this.pattern=0,this.instrument=0,this.note=0,this.period=0,this.volume=0,this.original=0,this.adsrPos=0,this.sustainCtr=0,this.pitchBend=0,this.pitchBendCtr=0,this.noteSlideTo=0,this.noteSlideSpeed=0,this.waveCtr=0,this.wavePos=0,this.arpeggioCtr=0,this.arpeggioPos=0,this.vibratoCtr=0,this.vibratoPos=0,this.speed=0}}})}function t(){return Object.create(null,{wave:{value:0,writable:!0},waveLen:{value:0,writable:!0},waveDelay:{value:0,writable:!0},waveSpeed:{value:0,writable:!0},arpeggio:{value:0,writable:!0},arpeggioLen:{value:0,writable:!0},arpeggioDelay:{value:0,writable:!0},arpeggioSpeed:{value:0,writable:!0},vibrato:{value:0,writable:!0},vibratoLen:{value:0,writable:!0},vibratoDelay:{value:0,writable:!0},vibratoSpeed:{value:0,writable:!0},pitchBend:{value:0,writable:!0},pitchBendDelay:{value:0,writable:!0},attackMax:{value:0,writable:!0},attackSpeed:{value:0,writable:!0},decayMin:{value:0,writable:!0},decaySpeed:{value:0,writable:!0},sustain:{value:0,writable:!0},releaseMin:{value:0,writable:!0},releaseSpeed:{value:0,writable:!0}})}function i(){var e=l();return Object.defineProperties(e,{speed:{value:0,writable:!0}}),Object.seal(e)}function a(){var e=n();return Object.defineProperties(e,{negStart:{value:0,writable:!0},negLen:{value:0,writable:!0},negSpeed:{value:0,writable:!0},negDir:{value:0,writable:!0},negOffset:{value:0,writable:!0},negPos:{value:0,writable:!0},negCtr:{value:0,writable:!0},negToggle:{value:0,writable:!0}}),Object.seal(e)}function r(){var e=h();return Object.defineProperties(e,{soundTranspose:{value:0,writable:!0}}),Object.seal(e)}function s(s){var l=u(s);return Object.defineProperties(l,{id:{value:"S2Player"},tracks:{value:[],writable:!0},patterns:{value:[],writable:!0},instruments:{value:[],writable:!0},samples:{value:[],writable:!0},arpeggios:{value:null,writable:!0},vibratos:{value:null,writable:!0},waves:{value:null,writable:!0},length:{value:0,writable:!0},speedDef:{value:0,writable:!0},voices:{value:[],writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},patternLen:{value:0,writable:!0},arpeggioFx:{value:null,writable:!0},arpeggioPos:{value:0,writable:!0},initialize:{value:function(){var e=this.voices[0];for(this.reset(),this.speed=this.speedDef,this.tick=this.speedDef,this.trackPos=0,this.patternPos=0,this.patternLen=64;e;)e.initialize(),e.channel=this.mixer.channels[e.index],e.instr=this.instruments[0],this.arpeggioFx[e.index]=0,e=e.next}},loader:{value:function(e){var s,o,l,n,h,p,u,d,v,b,c=0,m=0,f=0;if(e.position=58,"SIDMON II - THE MIDI VERSION"==e.readString(28)){for(e.position=2,this.length=e.readUbyte(),this.speedDef=e.readUbyte(),this.samples.length=e.readUshort()>>6,e.position=14,l=e.readUint(),this.tracks.length=l,e.position=90;m<l;++m)u=r(),u.pattern=e.readUbyte(),u.pattern>c&&(c=u.pattern),this.tracks[m]=u;for(m=0;m<l;++m)u=this.tracks[m],u.transpose=e.readByte();for(m=0;m<l;++m)u=this.tracks[m],u.soundTranspose=e.readByte();for(h=e.position,e.position=26,l=e.readUint()>>5,this.instruments.length=++l,e.position=h,this.instruments[0]=t(),m=0;++m<l;)s=t(),s.wave=e.readUbyte()<<4,s.waveLen=e.readUbyte(),s.waveSpeed=e.readUbyte(),s.waveDelay=e.readUbyte(),s.arpeggio=e.readUbyte()<<4,s.arpeggioLen=e.readUbyte(),s.arpeggioSpeed=e.readUbyte(),s.arpeggioDelay=e.readUbyte(),s.vibrato=e.readUbyte()<<4,s.vibratoLen=e.readUbyte(),s.vibratoSpeed=e.readUbyte(),s.vibratoDelay=e.readUbyte(),s.pitchBend=e.readByte(),s.pitchBendDelay=e.readUbyte(),e.readByte(),e.readByte(),s.attackMax=e.readUbyte(),s.attackSpeed=e.readUbyte(),s.decayMin=e.readUbyte(),s.decaySpeed=e.readUbyte(),s.sustain=e.readUbyte(),s.releaseMin=e.readUbyte(),s.releaseSpeed=e.readUbyte(),this.instruments[m]=s,e.position+=9;for(h=e.position,e.position=30,l=e.readUint(),this.waves=new Uint8Array(l),e.position=h,m=0;m<l;++m)this.waves[m]=e.readUbyte();for(h=e.position,e.position=34,l=e.readUint(),this.arpeggios=new Int8Array(l),e.position=h,m=0;m<l;++m)this.arpeggios[m]=e.readByte();for(h=e.position,e.position=38,l=e.readUint(),this.vibratos=new Int8Array(l),e.position=h,m=0;m<l;++m)this.vibratos[m]=e.readByte();for(l=this.samples.length,h=0,m=0;m<l;++m)d=a(),e.readUint(),d.length=e.readUshort()<<1,d.loop=e.readUshort()<<1,d.repeat=e.readUshort()<<1,d.negStart=h+(e.readUshort()<<1),d.negLen=e.readUshort()<<1,d.negSpeed=e.readUshort(),d.negDir=e.readUshort(),d.negOffset=e.readShort(),d.negPos=e.readUint(),d.negCtr=e.readUshort(),e.position+=6,d.name=e.readString(32),d.pointer=h,d.loopPtr=h+d.loop,h+=d.length,this.samples[m]=d;for(v=h,l=++c,n=new Uint16Array(++c),m=0;m<l;++m)n[m]=e.readUshort();for(h=e.position,e.position=50,l=e.readUint(),this.patterns=[],e.position=h,o=1,m=0;m<l;++m)p=i(),b=e.readByte(),b?b<0?p.speed=~b:b<112?(p.note=b,b=e.readByte(),m++,b<0?p.speed=~b:b<112?(p.sample=b,b=e.readByte(),m++,b<0?p.speed=~b:(p.effect=b,p.param=e.readUbyte(),m++)):(p.effect=b,p.param=e.readUbyte(),m++)):(p.effect=b,p.param=e.readUbyte(),m++):(p.effect=e.readByte(),p.param=e.readUbyte(),m+=2),this.patterns[f++]=p,h+n[o]==e.position&&(n[o++]=f);for(n[o]=this.patterns.length,0!=(1&e.position)&&e.position++,this.mixer.store(e,v),l=this.tracks.length,m=0;m<l;++m)u=this.tracks[m],u.pattern=n[u.pattern];this.length++,this.version=2}}},process:{value:function(){var e,t,i,a,r,s=this.voices[0];if(this.arpeggioPos=3&++this.arpeggioPos,++this.tick>=this.speed){for(this.tick=0;s;)e=s.channel,s.enabled=s.note=0,this.patternPos||(s.step=this.tracks[this.trackPos+s.index*this.length],s.pattern=s.step.pattern,s.speed=0),--s.speed<0&&(s.row=i=this.patterns[s.pattern++],s.speed=i.speed,i.note&&(s.enabled=1,s.note=i.note+s.step.transpose,e.enabled=0)),s.pitchBend=0,s.note&&(s.waveCtr=s.sustainCtr=0,s.arpeggioCtr=s.arpeggioPos=0,s.vibratoCtr=s.vibratoPos=0,s.pitchBendCtr=s.noteSlideSpeed=0,s.adsrPos=4,s.volume=0,i.sample&&(s.instrument=i.sample,s.instr=this.instruments[s.instrument+s.step.soundTranspose],s.sample=this.samples[this.waves[s.instr.wave]]),s.original=s.note+this.arpeggios[s.instr.arpeggio],e.period=s.period=o[s.original],a=s.sample,e.pointer=a.pointer,e.length=a.length,e.enabled=s.enabled,e.pointer=a.loopPtr,e.length=a.repeat),s=s.next;++this.patternPos==this.patternLen&&(this.patternPos=0,++this.trackPos==this.length&&(this.trackPos=0,this.mixer.complete=1))}for(s=this.voices[0];s;)if(s.sample)if(e=s.channel,a=s.sample,a.negToggle)s=s.next;else{if(a.negToggle=1,a.negCtr)a.negCtr=31&--a.negCtr;else{if(a.negCtr=a.negSpeed,!a.negDir){s=s.next;continue}r=a.negStart+a.negPos,this.mixer.memory[r]=~this.mixer.memory[r],a.negPos+=a.negOffset,r=a.negLen-1,a.negPos<0?2==a.negDir?a.negPos=r:(a.negOffset=-a.negOffset,a.negPos+=a.negOffset):r<a.negPos&&(1==a.negDir?a.negPos=0:(a.negOffset=-a.negOffset,a.negPos+=a.negOffset))}s=s.next}else s=s.next;for(s=this.voices[0];s;)s.sample?(s.sample.negToggle=0,s=s.next):s=s.next;for(s=this.voices[0];s;){switch(e=s.channel,t=s.instr,s.adsrPos){case 0:break;case 4:s.volume+=t.attackSpeed,t.attackMax<=s.volume&&(s.volume=t.attackMax,s.adsrPos--);break;case 3:t.decaySpeed?(s.volume-=t.decaySpeed,t.decayMin>=s.volume&&(s.volume=t.decayMin,s.adsrPos--)):s.adsrPos--;break;case 2:s.sustainCtr==t.sustain?s.adsrPos--:s.sustainCtr++;break;case 1:s.volume-=t.releaseSpeed,t.releaseMin>=s.volume&&(s.volume=t.releaseMin,s.adsrPos--)}if(e.volume=s.volume>>2,t.waveLen&&(s.waveCtr==t.waveDelay?(s.waveCtr=t.waveDelay-t.waveSpeed,s.wavePos==t.waveLen?s.wavePos=0:s.wavePos++,s.sample=a=this.samples[this.waves[t.wave+s.wavePos]],e.pointer=a.pointer,e.length=a.length):s.waveCtr++),t.arpeggioLen&&(s.arpeggioCtr==t.arpeggioDelay?(s.arpeggioCtr=t.arpeggioDelay-t.arpeggioSpeed,s.arpeggioPos==t.arpeggioLen?s.arpeggioPos=0:s.arpeggioPos++,r=s.original+this.arpeggios[t.arpeggio+s.arpeggioPos],s.period=o[r]):s.arpeggioCtr++),i=s.row,this.tick)switch(i.effect){case 0:break;case 112:this.arpeggioFx[0]=i.param>>4,this.arpeggioFx[2]=15&i.param,r=s.original+this.arpeggioFx[this.arpeggioPos],s.period=o[r];break;case 113:s.pitchBend=1+~i.param;break;case 114:s.pitchBend=i.param;break;case 115:if(0!=s.adsrPos)break;0!=s.instrument&&(s.volume=t.attackMax),s.volume+=i.param<<2,s.volume>=256&&(s.volume=-1);break;case 116:if(0!=s.adsrPos)break;0!=s.instrument&&(s.volume=t.attackMax),s.volume-=i.param<<2,s.volume<0&&(s.volume=0)}switch(i.effect){case 0:break;case 117:t.attackMax=i.param,t.attackSpeed=i.param;break;case 118:this.patternLen=i.param;break;case 124:e.volume=i.param,s.volume=i.param<<2,s.volume>=255&&(s.volume=255);break;case 127:r=15&i.param,r&&(this.speed=r)}t.vibratoLen&&(s.vibratoCtr==t.vibratoDelay?(s.vibratoCtr=t.vibratoDelay-t.vibratoSpeed,s.vibratoPos==t.vibratoLen?s.vibratoPos=0:s.vibratoPos++,s.period+=this.vibratos[t.vibrato+s.vibratoPos]):s.vibratoCtr++),t.pitchBend&&(s.pitchBendCtr==t.pitchBendDelay?s.pitchBend+=t.pitchBend:s.pitchBendCtr++),i.param&&i.effect&&i.effect<112&&(s.noteSlideTo=o[i.effect+s.step.transpose],r=i.param,s.noteSlideTo-s.period<0&&(r=-r),s.noteSlideSpeed=r),s.noteSlideTo&&s.noteSlideSpeed&&(s.period+=s.noteSlideSpeed,(s.noteSlideSpeed<0&&s.period<s.noteSlideTo||s.noteSlideSpeed>0&&s.period>s.noteSlideTo)&&(s.noteSlideSpeed=0,s.period=s.noteSlideTo)),s.period+=s.pitchBend,s.period<95?s.period=95:s.period>5760&&(s.period=5760),e.period=s.period,s=s.next}}}}),l.voices[0]=e(0),l.voices[0].next=l.voices[1]=e(1),l.voices[1].next=l.voices[2]=e(2),l.voices[2].next=l.voices[3]=e(3),l.arpeggioFx=new Uint8Array(4),Object.seal(l)}var o=[0,5760,5424,5120,4832,4560,4304,4064,3840,3616,3424,3232,3048,2880,2712,2560,2416,2280,2152,2032,1920,1808,1712,1616,1524,1440,1356,1280,1208,1140,1076,1016,960,904,856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,107,101,95];window.neoart.S2Player=s}(),function(){function e(e){return Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},channel:{value:null,writable:!0},sample:{value:null,writable:!0},enabled:{value:0,writable:!0},period:{value:0,writable:!0},last:{value:0,writable:!0},effect:{value:0,writable:!0},param:{value:0,writable:!0},initialize:{value:function(){this.channel=null,this.sample=null,this.enabled=0,this.period=0,this.last=0,this.effect=0,this.param=0}}})}function t(t){var h=u(t);return Object.defineProperties(h,{id:{value:"STPlayer"},standard:{value:0,writable:!0},track:{value:null,writable:!0},patterns:{value:[],writable:!0},samples:{value:[],writable:!0},length:{value:0,writable:!0},voices:{value:[],writable:!0},trackPos:{value:0,writable:!0},patternPos:{value:0,writable:!0},jumpFlag:{value:0,writable:!0},force:{set:function(e){e<i?e=i:e>s&&(e=s),this.version=e}},ntsc:{set:function(e){this.standard=e,this.frequency(e),this.version<a&&(e=e?20.44952532:20.637767904,e=e*(this.sampleRate/1e3)/120,this.mixer.samplesTick=(240-this.tempo)*e>>0)}},initialize:{value:function(){var e=this.voices[0];for(this.reset(),this.ntsc=this.standard,this.speed=6,this.trackPos=0,this.patternPos=0,this.jumpFlag=0;e;)e.initialize(),e.channel=this.mixer.channels[e.index],e.sample=this.samples[0],e=e.next}},loader:{value:function(e){var t,o,h,p,u,d=0,v=0,b=0;if(!(e.length<1626)){for(this.title=e.readString(20),v+=this.isLegal(this.title),this.version=i,e.position=42,t=1;t<16;++t)u=e.readUshort(),u?(p=n(),e.position-=24,p.name=e.readString(22),p.length=u<<1,e.position+=3,p.volume=e.readUbyte(),p.loop=e.readUshort(),p.repeat=e.readUshort()<<1,e.position+=22,p.pointer=b,b+=p.length,this.samples[t]=p,v+=this.isLegal(p.name),p.length>9999&&(this.version=r)):(this.samples[t]=null,e.position+=28);for(e.position=470,this.length=e.readUbyte(),this.tempo=e.readUbyte(),t=0;t<128;++t)u=e.readUbyte()<<8,u>16384&&v--,this.track[t]=u,u>d&&(d=u);for(e.position=600,d+=256,this.patterns.length=d,t=e.length-b-600>>2,d>t&&(d=t),t=0;t<d;++t)h=l(),h.note=e.readUshort(),u=e.readUbyte(),h.param=e.readUbyte(),h.effect=15&u,h.sample=u>>4,this.patterns[t]=h,h.effect>2&&h.effect<11&&v--,h.note&&(h.note<113||h.note>856)&&v--,h.sample&&(h.sample>15||!this.samples[h.sample])&&(h.sample>15&&v--,h.sample=0),(h.effect>2||!h.effect&&0!=h.param)&&(this.version=a),11!=h.effect&&13!=h.effect||(this.version=s);for(this.mixer.store(e,b),t=1;t<16;++t)if(p=this.samples[t])for(p.loop?(p.loopPtr=p.pointer+p.loop,p.pointer=p.loopPtr,p.length=p.repeat):(p.loopPtr=this.mixer.memory.length,p.repeat=2),b=p.pointer+4,o=p.pointer;o<b;++o)this.mixer.memory[o]=0;p=n(),p.pointer=p.loopPtr=this.mixer.memory.length,p.length=p.repeat=2,this.samples[0]=p,v<1&&(this.version=0)}}},process:{value:function(){var e,t,a,r,o=this.voices[0];if(this.tick)for(;o;)if(o.param){if(e=o.channel,this.version==i)1==o.effect?this.arpeggio(o):2==o.effect&&(r=o.param>>4,r?o.period+=r:o.period-=15&o.param,e.period=o.period);else{switch(o.effect){case 0:this.arpeggio(o);break;case 1:o.last-=15&o.param,o.last<113&&(o.last=113),e.period=o.last;break;case 2:o.last+=15&o.param,o.last>856&&(o.last=856),e.period=o.last}if(2!=(2&this.version)){o=o.next;continue}switch(o.effect){case 12:e.volume=o.param;break;case 13:this.mixer.filter.active=0;break;case 14:this.speed=15&o.param}}o=o.next}else o=o.next;else for(r=this.track[this.trackPos]+this.patternPos;o;)if(e=o.channel,o.enabled=0,t=this.patterns[r+o.index],o.period=t.note,o.effect=t.effect,o.param=t.param,t.sample?(a=o.sample=this.samples[t.sample],2==(2&this.version)&&12==o.effect?e.volume=o.param:e.volume=a.volume):a=o.sample,o.period&&(o.enabled=1,e.enabled=0,e.pointer=a.pointer,e.length=a.length,e.period=o.last=o.period),o.enabled&&(e.enabled=1),e.pointer=a.loopPtr,e.length=a.repeat,this.version<s)o=o.next;else{switch(o.effect){case 11:this.trackPos=o.param-1,this.jumpFlag^=1;break;case 12:e.volume=o.param;break;case 13:this.jumpFlag^=1;break;case 14:this.mixer.filter.active=1^o.param;break;case 15:if(!o.param)break;this.speed=15&o.param,this.tick=0}o=o.next}++this.tick==this.speed&&(this.tick=0,this.patternPos+=4,(256==this.patternPos||this.jumpFlag)&&(this.patternPos=this.jumpFlag=0,++this.trackPos==this.length&&(this.trackPos=0,this.mixer.complete=1)))}},arpeggio:{value:function(e){var t=e.channel,i=0,a=this.tick%3;if(!a)return void(t.period=e.last);for(a=1==a?e.param>>4:15&e.param;e.last!=o[i];)i++;t.period=o[i+a]}},isLegal:{value:function(e){var t,i=0,a=e.length;if(!a)return 0;for(;i<a;++i)if((t=e.charCodeAt(i))&&(t<32||t>127))return 0;return 1}}}),h.voices[0]=e(0),h.voices[0].next=h.voices[1]=e(1),h.voices[1].next=h.voices[2]=e(2),h.voices[2].next=h.voices[3]=e(3),h.track=new Uint16Array(128),Object.seal(h)}var i=1,a=2,r=3,s=4,o=[856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,226,214,202,190,180,170,160,151,143,135,127,120,113,0,0,0];window.neoart.STPlayer=t}(),function(){function e(e){var t=Object.create(null,{index:{value:e,writable:!0},next:{value:null,writable:!0},flags:{value:0,writable:!0},delay:{value:0,writable:!0},channel:{value:null,writable:!0},patternLoop:{value:0,writable:!0},patternLoopRow:{value:0,writable:!0},playing:{value:null,writable:!0},note:{value:0,writable:!0},keyoff:{value:0,writable:!0},period:{value:0,writable:!0},finetune:{value:0,writable:!0},arpDelta:{value:0,writable:!0},vibDelta:{value:0,writable:!0},instrument:{value:null,writable:!0},autoVibratoPos:{value:0,writable:!0},autoSweep:{value:0,writable:!0},autoSweepPos:{value:0,writable:!0},sample:{value:null,writable:!0},sampleOffset:{value:0,writable:!0},volume:{value:0,writable:!0},volEnabled:{value:0,writable:!0},volEnvelope:{value:null,writable:!0},volDelta:{value:0,writable:!0},volSlide:{value:0,writable:!0},volSlideMaster:{value:0,writable:!0},fineSlideU:{value:0,writable:!0},fineSlideD:{value:0,writable:!0},fadeEnabled:{value:0,writable:!0},fadeDelta:{value:0,writable:!0},fadeVolume:{value:0,writable:!0},panning:{value:0,writable:!0},panEnabled:{value:0,writable:!0},panEnvelope:{value:null,writable:!0},panSlide:{value:0,writable:!0},portaU:{value:0,writable:!0},portaD:{value:0,writable:!0},finePortaU:{value:0,writable:!0},finePortaD:{value:0,writable:!0},xtraPortaU:{value:0,writable:!0},xtraPortaD:{value:0,writable:!0},portaPeriod:{value:0,writable:!0},portaSpeed:{value:0,writable:!0},glissando:{value:0,writable:!0},glissPeriod:{value:0,writable:!0},vibratoPos:{value:0,writable:!0},vibratoSpeed:{value:0,writable:!0},vibratoDepth:{value:0,writable:!0},vibratoReset:{value:0,writable:!0},tremoloPos:{value:0,writable:!0},tremoloSpeed:{value:0,writable:!0},tremoloDepth:{value:0,writable:!0},waveControl:{value:0,writable:!0},tremorPos:{value:0,writable:!0},tremorOn:{value:0,writable:!0},tremorOff:{value:0,writable:!0},tremorVolume:{value:0,writable:!0},retrigx:{value:0,writable:!0},retrigy:{value:0,writable:!0},reset:{value:function(){this.volume=this.sample.volume,this.panning=this.sample.panning,this.finetune=this.sample.finetune>>3<<2,this.keyoff=0,this.volDelta=0,this.fadeEnabled=0,this.fadeDelta=0,this.fadeVolume=65536,this.autoVibratoPos=0,this.autoSweep=1,this.autoSweepPos=0,this.vibDelta=0,this.vibratoReset=0,(15&this.waveControl)<4&&(this.vibratoPos=0),this.waveControl>>4<4&&(this.tremoloPos=0)}},autoVibrato:{value:function(){var e;switch(this.autoVibratoPos=this.autoVibratoPos+this.playing.vibratoSpeed&255,this.playing.vibratoType){case 0:e=S[this.autoVibratoPos];break;case 1:e=this.autoVibratoPos<128?-64:64;break;case 2:e=(64+(this.autoVibratoPos>>1)&127)-64;break;case 3:e=(64-(this.autoVibratoPos>>1)&127)-64}return e*=this.playing.vibratoDepth,this.autoSweep&&(this.playing.vibratoSweep?this.autoSweepPos>this.playing.vibratoSweep?(2&this.autoSweepPos&&(e*=this.autoSweepPos/this.playing.vibratoSweep),this.autoSweep=0):e*=++this.autoSweepPos/this.playing.vibratoSweep:this.autoSweep=0),this.flags|=h,e>>6}},tonePortamento:{value:function(){this.glissPeriod||(this.glissPeriod=this.period),this.period<this.portaPeriod?(this.glissPeriod+=this.portaSpeed<<2,this.glissando?this.period=Math.round(this.glissPeriod/64)<<6:this.period=this.glissPeriod,this.period>=this.portaPeriod&&(this.period=this.portaPeriod,this.glissPeriod=this.portaPeriod=0)):this.period>this.portaPeriod&&(this.glissPeriod-=this.portaSpeed<<2,this.glissando?this.period=Math.round(this.glissPeriod/64)<<6:this.period=this.glissPeriod,this.period<=this.portaPeriod&&(this.period=this.portaPeriod,this.glissPeriod=this.portaPeriod=0)),this.flags|=h}},tremolo:{value:function(){var e=255,t=31&this.tremoloPos;switch(this.waveControl>>4&3){case 0:e=x[t];break;case 1:e=t<<3}this.volDelta=e*this.tremoloDepth>>6,this.tremoloPos>31&&(this.volDelta=-this.volDelta),this.tremoloPos=this.tremoloPos+this.tremoloSpeed&63,this.flags|=p}},tremor:{value:function(){this.tremorPos==this.tremorOn?(this.tremorVolume=this.volume,this.volume=0,this.flags|=p):(this.tremorPos=0,this.volume=this.tremorVolume,this.flags|=p),this.tremorPos++}},vibrato:{value:function(){var e=255,t=31&this.vibratoPos;switch(3&this.waveControl){case 0:e=x[t];break;case 1:e=t<<3,this.vibratoPos>31&&(e=255-e)}this.vibDelta=e*this.vibratoDepth>>7,this.vibratoPos>31&&(this.vibDelta=-this.vibDelta),this.vibratoPos=this.vibratoPos+this.vibratoSpeed&63,this.flags|=h}}});return t.volEnvelope=i(),t.panEnvelope=i(),Object.seal(t)}function t(){return Object.create(null,{points:{value:[],writable:!0},total:{value:0,writable:!0},sustain:{value:0,writable:!0},loopStart:{value:0,writable:!0},loopEnd:{value:0,writable:!0},flags:{value:0,writable:!0}})}function i(){return Object.create(null,{value:{value:0,writable:!0},position:{value:0,writable:!0},frame:{value:0,writable:!0},delta:{value:0,writable:!0},fraction:{value:0,writable:!0},stopped:{value:0,writable:!0},reset:{value:function(){this.value=0,this.position=0,this.frame=0,this.delta=0,this.fraction=0,this.stopped=0}}})}function a(){var e=Object.create(null,{name:{value:"",writable:!0},samples:{value:[],writable:!0},noteSamples:{value:null,writable:!0},fadeout:{value:0,writable:!0},volData:{value:null,writable:!0},volEnabled:{value:0,writable:!0},panData:{value:null,writable:!0},panEnabled:{value:0,writable:!0},vibratoType:{value:0,writable:!0},vibratoSweep:{value:0,writable:!0},vibratoSpeed:{value:0,writable:!0},vibratoDepth:{value:0,writable:!0}});return e.noteSamples=new Uint8Array(96),e.volData=t(),e.panData=t(),Object.seal(e)}function r(e,t){var i=Object.create(null,{rows:{value:[],writable:!0},length:{value:0,writable:!0},size:{value:0,writable:!0}});return i.rows.length=i.size=e*t,i.length=e,Object.seal(i)}function s(e,t){var i=Object.create(null,{frame:{value:0,writable:!0},value:{value:0,writable:!0}});return i.frame=e||0,i.value=t||0,Object.seal(i)}function o(){return Object.create(null,{note:{value:0,writable:!0},instrument:{value:0,writable:!0},volume:{value:0,writable:!0},effect:{value:0,writable:!0},param:{value:0,writable:!0}})}function l(){var e=v();return Object.defineProperties(e,{finetune:{value:0,writable:!0},panning:{value:0,writable:!0},relative:{value:0,writable:!0}}),Object.seal(e)}function n(i){var n=c(i);return Object.defineProperties(n,{id:{value:"F2Player"},patterns:{value:[],writable:!0},instruments:{value:[],writable:!0},voices:{value:[],writable:!0},linear:{value:0,writable:!0},complete:{value:0,writable:!0},order:{value:0,writable:!0},position:{value:0,writable:!0},nextOrder:{value:0,writable:!0},nextPosition:{value:0,writable:!0},pattern:{value:null,writable:!0},patternDelay:{value:0,writable:!0},patternOffset:{value:0,writable:!0},timer:{value:0,writable:!0},initialize:{value:function(){var t,i=0;for(this.reset(),this.timer=this.speed,this.order=0,this.position=0,this.nextOrder=-1,this.nextPosition=-1,this.patternDelay=0,this.patternOffset=0,this.complete=0,this.master=64,this.voices.length=this.channels;i<this.channels;++i)t=e(i),t.channel=this.mixer.channels[i],t.playing=this.instruments[0],t.sample=t.playing.samples[0],this.voices[i]=t,i&&(this.voices[i-1].next=t)}},loader:{value:function(e){var i,n,h,p,u,d,v,b,c,m,w,g,P,y,S=22;if(!(e.length<360)){if(e.position=17,this.title=e.readString(20),e.position++,"FastTracker v2.00   "==(h=e.readString(20))||"FastTracker v 2.00  "==h)this.version=1;else if("Sk@le Tracker"==h)S=2,this.version=2;else if("MadTracker 2.0"==h)this.version=3;else if("MilkyTracker        "==h)this.version=4;else if("DigiBooster Pro 2.18"==h)this.version=5;else{if(-1==h.indexOf("OpenMPT"))return;this.version=6}for(e.readUshort(),i=e.readUint(),this.length=e.readUshort(),this.restart=e.readUshort(),this.channels=e.readUshort(),y=g=e.readUshort(),this.instruments=[],this.instruments.length=e.readUshort()+1,this.linear=e.readUshort(),this.speed=e.readUshort(),this.tempo=e.readUshort(),this.track=new Uint8Array(this.length),n=0;n<this.length;++n)v=e.readUbyte(),v>=y&&(g=v+1),this.track[n]=v;if(this.patterns=[],this.patterns.length=g,g!=y){for(c=r(64,this.channels),v=c.size,n=0;n<v;++n)c.rows[n]=o();this.patterns[--g]=c}for(e.position=m=i+60,b=y,n=0;n<b;++n){if(i=e.readUint(),e.position++,c=r(e.readUshort(),this.channels),g=c.size,y=e.readUshort(),e.position=m+i,d=e.position+y,y)for(v=0;v<g;++v)w=o(),y=e.readUbyte(),128&y?(1&y&&(w.note=e.readUbyte()),2&y&&(w.instrument=e.readUbyte()),4&y&&(w.volume=e.readUbyte()),8&y&&(w.effect=e.readUbyte()),16&y&&(w.param=e.readUbyte())):(w.note=y,w.instrument=e.readUbyte(),w.volume=e.readUbyte(),w.effect=e.readUbyte(),w.param=e.readUbyte()),w.note!=k&&w.note>96&&(w.note=0),c.rows[v]=w;else for(v=0;v<g;++v)c.rows[v]=o();this.patterns[n]=c,m=e.position,m!=d&&(m=e.position=d)}for(d=e.position,b=this.instruments.length,n=1;n<b&&(p=e.readUint(),!(e.position+p>=e.length));++n){if(u=a(),u.name=e.readString(22),e.position++,y=e.readUshort(),y>16&&(y=16),i=e.readUint(),2==S&&64!=i&&(i=64),y){for(u.samples=[],u.samples.length=y,v=0;v<96;++v)u.noteSamples[v]=e.readUbyte();for(v=0;v<12;++v)u.volData.points[v]=s(e.readUshort(),e.readUshort());for(v=0;v<12;++v)u.panData.points[v]=s(e.readUshort(),e.readUshort());for(u.volData.total=e.readUbyte(),u.panData.total=e.readUbyte(),u.volData.sustain=e.readUbyte(),u.volData.loopStart=e.readUbyte(),u.volData.loopEnd=e.readUbyte(),u.panData.sustain=e.readUbyte(),u.panData.loopStart=e.readUbyte(),u.panData.loopEnd=e.readUbyte(),u.volData.flags=e.readUbyte(),u.panData.flags=e.readUbyte(),u.volData.flags&f&&(u.volEnabled=1),u.panData.flags&f&&(u.panEnabled=1),u.vibratoType=e.readUbyte(),u.vibratoSweep=e.readUbyte(),u.vibratoDepth=e.readUbyte(),u.vibratoSpeed=e.readUbyte(),u.fadeout=e.readUshort()<<1,e.position+=S,m=e.position,this.instruments[n]=u,v=0;v<y;++v)P=l(),P.length=e.readUint(),P.loopStart=e.readUint(),P.loopLen=e.readUint(),P.volume=e.readUbyte(),
P.finetune=e.readByte(),P.loopMode=e.readUbyte(),P.panning=e.readUbyte(),P.relative=e.readByte(),e.position++,P.name=e.readString(22),u.samples[v]=P,e.position=m+=i;for(v=0;v<y;++v)P=u.samples[v],P.length&&(m=e.position+P.length,16&P.loopMode&&(P.bits=16,P.loopMode^=16,P.length>>=1,P.loopStart>>=1,P.loopLen>>=1),P.loopLen||(P.loopMode=0),P.store(e),P.loopMode&&(P.length=P.loopStart+P.loopLen),e.position=m)}else e.position=d+p;if((d=e.position)>=e.length)break}for(u=a(),u.volData=t(),u.panData=t(),u.samples=[],n=0;n<12;++n)u.volData.points[n]=s(),u.panData.points[n]=s();for(P=l(),P.length=220,P.data=new Float32Array(220),n=0;n<220;++n)P.data[n]=0;u.samples[0]=P,this.instruments[0]=u}}},process:{value:function(){var e,t,i,a,r,s,o,l,n,v,c,f,w,S=this.voices[0];if(this.tick)for(;S;){if(v=this.pattern.rows[this.position+S.index],S.delay){if((15&v.param)!=this.tick){S=S.next;continue}S.flags=S.delay,S.delay=0}if(v.volume)switch(o=v.volume>>4,l=15&v.volume,o){case 6:S.volume-=l,S.volume<0&&(S.volume=0),S.flags|=p;break;case 7:S.volume+=l,S.volume>64&&(S.volume=64),S.flags|=p;break;case 11:S.vibrato();break;case 13:S.panning-=l,S.panning<0&&(S.panning=0),S.flags|=u;break;case 14:S.panning+=l,S.panning>255&&(S.panning=255),S.flags|=u;break;case 15:S.portaPeriod&&S.tonePortamento()}switch(o=v.param>>4,l=15&v.param,v.effect){case 0:if(!v.param)break;w=(this.tick-this.timer)%3,w<0&&(w+=3),2==this.tick&&18==this.timer&&(w=0),w?1==w?this.linear?S.arpDelta=-(l<<6):(w=this.amiga(S.note+l,S.finetune),S.arpDelta=w-S.period):this.linear?S.arpDelta=-(o<<6):(w=this.amiga(S.note+o,S.finetune),S.arpDelta=w-S.period):S.arpDelta=0,S.flags|=h;break;case 1:S.period-=S.portaU,S.period<0&&(S.period=0),S.flags|=h;break;case 2:S.period+=S.portaD,S.period>9212&&(S.period=9212),S.flags|=h;break;case 3:S.portaPeriod&&S.tonePortamento();break;case 4:o&&(S.vibratoSpeed=o),l&&(S.vibratoDepth=l<<2),S.vibrato();break;case 5:f=1,S.portaPeriod&&S.tonePortamento();break;case 6:f=1,S.vibrato();break;case 7:S.tremolo();break;case 10:f=1;break;case 14:switch(o){case 9:this.tick%l==0&&(S.volEnvelope.reset(),S.panEnvelope.reset(),S.flags|=p|u|d);break;case 12:this.tick==l&&(S.volume=0,S.flags|=p)}break;case 17:o=S.volSlideMaster>>4,l=15&S.volSlideMaster,o?(this.master+=o,this.master>64&&(this.master=64),S.flags|=p):l&&(this.master-=l,this.master<0&&(this.master=0),S.flags|=p);break;case 20:this.tick==v.param&&(S.fadeEnabled=1,S.keyoff=1);break;case 24:o=S.panSlide>>4,l=15&S.panSlide,o?(S.panning+=o,S.panning>255&&(S.panning=255),S.flags|=u):l&&(S.panning-=l,S.panning<0&&(S.panning=0),S.flags|=u);break;case 27:if(e=this.tick,v.volume||e++,e%S.retrigy)break;(!v.volume||v.volume>80)&&S.retrigx&&this.retrig(S),S.flags|=d;break;case 29:S.tremor()}f&&(o=S.volSlide>>4,l=15&S.volSlide,f=0,o?(S.volume+=o,S.flags|=p):l&&(S.volume-=l,S.flags|=p)),S=S.next}else for(this.nextOrder>=0&&(this.order=this.nextOrder),this.nextPosition>=0&&(this.position=this.nextPosition),this.nextOrder=this.nextPosition=-1,this.pattern=this.patterns[this.track[this.order]];S;){if(v=this.pattern.rows[this.position+S.index],e=v.volume>>4,n=3==v.effect||5==v.effect||15==e,o=v.param>>4,S.keyoff=0,S.arpDelta&&(S.arpDelta=0,S.flags|=h),v.instrument?(S.instrument=v.instrument<this.instruments.length?this.instruments[v.instrument]:null,S.volEnvelope.reset(),S.panEnvelope.reset(),S.flags|=p|u|m):(v.note==k||20==v.effect&&!v.param)&&(S.fadeEnabled=1,S.keyoff=1),v.note&&v.note!=k?S.instrument?(i=S.instrument,w=v.note-1,c=i.samples[i.noteSamples[w]],(w+=c.relative)>=P&&w<=y&&(n||(S.note=w,S.sample=c,v.instrument?(S.volEnabled=i.volEnabled,S.panEnabled=i.panEnabled,S.flags|=b):S.flags|=h|d),v.instrument?(S.reset(),S.fadeDelta=i.fadeout):S.finetune=c.finetune>>3<<2,14==v.effect&&5==o&&(S.finetune=(15&v.param)-8<<3),w=this.linear?(120-w<<6)-S.finetune:this.amiga(w,S.finetune),n?S.portaPeriod=w:(S.period=w,S.glissPeriod=0))):(S.volume=0,S.flags=p|m):S.vibratoReset&&4!=v.effect&&6!=v.effect&&(S.vibDelta=0,S.vibratoReset=0,S.flags|=h),v.volume)if(v.volume>=16&&v.volume<=80)S.volume=v.volume-16,S.flags|=p|m;else switch(l=15&v.volume,e){case 6:S.volume-=l,S.volume<0&&(S.volume=0),S.flags|=p;break;case 7:S.volume+=l,S.volume>64&&(S.volume=64),S.flags|=p;break;case 10:l&&(S.vibratoSpeed=l);break;case 11:l&&(S.vibratoDepth=l<<2);break;case 12:S.panning=l<<4,S.flags|=u;break;case 15:l&&(S.portaSpeed=l<<4)}if(v.effect)switch(l=15&v.param,v.effect){case 1:v.param&&(S.portaU=v.param<<2);break;case 2:v.param&&(S.portaD=v.param<<2);break;case 3:v.param&&15!=e&&(S.portaSpeed=v.param);break;case 4:S.vibratoReset=1;break;case 5:v.param&&(S.volSlide=v.param);break;case 6:v.param&&(S.volSlide=v.param),S.vibratoReset=1;break;case 7:o&&(S.tremoloSpeed=o),l&&(S.tremoloDepth=l);break;case 8:S.panning=v.param,S.flags|=u;break;case 9:v.param&&(S.sampleOffset=v.param<<8),S.sampleOffset>=S.sample.length&&(S.volume=0,S.sampleOffset=0,S.flags&=~(h|d),S.flags|=p|m);break;case 10:v.param&&(S.volSlide=v.param);break;case 11:this.nextOrder=v.param,this.nextOrder>=this.length?this.complete=1:this.nextPosition=0,r=1,this.patternOffset=0;break;case 12:S.volume=v.param,S.flags|=p|m;break;case 13:this.nextPosition=(10*o+l)*this.channels,this.patternOffset=0,r||(this.nextOrder=this.order+1,this.nextOrder>=this.length&&(this.complete=1,this.nextPosition=-1));break;case 14:switch(o){case 1:l&&(S.finePortaU=l<<2),S.period-=S.finePortaU,S.flags|=h;break;case 2:l&&(S.finePortaD=l<<2),S.period+=S.finePortaD,S.flags|=h;break;case 3:S.glissando=l;break;case 4:S.waveControl=240&S.waveControl|l;break;case 6:l?(S.patternLoop?S.patternLoop--:S.patternLoop=l,S.patternLoop&&(this.nextPosition=S.patternLoopRow)):S.patternLoopRow=this.patternOffset=this.position;break;case 7:S.waveControl=15&S.waveControl|l<<4;break;case 10:l&&(S.fineSlideU=l),S.volume+=S.fineSlideU,S.flags|=p;break;case 11:l&&(S.fineSlideD=l),S.volume-=S.fineSlideD,S.flags|=p;break;case 13:S.delay=S.flags,S.flags=0;break;case 14:this.patternDelay=l*this.timer}break;case 15:if(!v.param)break;v.param<32?this.timer=v.param:this.mixer.samplesTick=2.5*this.sampleRate/v.param>>0;break;case 16:this.master=v.param,this.master>64&&(this.master=64),S.flags|=p;break;case 17:v.param&&(S.volSlideMaster=v.param);break;case 21:if(!S.instrument||!S.instrument.volEnabled)break;for(i=S.instrument,w=v.param,o=i.volData.total,a=0;a<o&&!(w<i.volData.points[a].frame);a++);S.volEnvelope.position=--a,o--,i.volData.flags&g&&a==i.volData.loopEnd&&(a=S.volEnvelope.position=i.volData.loopStart,w=i.volData.points[a].frame,S.volEnvelope.frame=w),a>=o?(S.volEnvelope.value=i.volData.points[o].value,S.volEnvelope.stopped=1):(S.volEnvelope.stopped=0,S.volEnvelope.frame=w,w>i.volData.points[a].frame&&S.volEnvelope.position++,t=i.volData.points[a],s=i.volData.points[++a],w=s.frame-t.frame,S.volEnvelope.delta=(w?(s.value-t.value<<8)/w>>0:0)||0,S.volEnvelope.fraction=t.value<<8);break;case 24:v.param&&(S.panSlide=v.param);break;case 27:if(o&&(S.retrigx=o),l&&(S.retrigy=l),!v.volume&&S.retrigy){if((e=this.tick+1)%S.retrigy)break;v.volume>80&&S.retrigx&&this.retrig(S)}break;case 29:v.param&&(S.tremorOn=++o,S.tremorOff=++l+o);break;case 33:1==o?(l&&(S.xtraPortaU=l),S.period-=S.xtraPortaU,S.flags|=h):2==o&&(l&&(S.xtraPortaD=l),S.period+=S.xtraPortaD,S.flags|=h)}S=S.next}++this.tick>=this.timer+this.patternDelay&&(this.patternDelay=this.tick=0,this.nextPosition<0&&(this.nextPosition=this.position+this.channels,(this.nextPosition>=this.pattern.size||this.complete)&&(this.nextOrder=this.order+1,this.nextPosition=this.patternOffset,this.nextOrder>=this.length&&(this.nextOrder=this.restart,this.mixer.complete=1))))}},fast:{value:function(){for(var e,t,i,a,r,s,o=this.voices[0];o;)e=o.channel,i=o.flags,o.flags=0,i&d&&(e.index=o.sampleOffset,e.pointer=-1,e.dir=0,e.fraction=0,e.sample=o.sample,e.length=o.sample.length,e.enabled=e.sample.data?1:0,o.playing=o.instrument,o.sampleOffset=0),a=o.playing,t=a.vibratoSpeed?o.autoVibrato():0,s=o.volume+o.volDelta,a.volEnabled?(o.volEnabled&&!o.volEnvelope.stopped&&this.envelope(o,o.volEnvelope,a.volData),s=s*o.volEnvelope.value>>6,i|=p,o.fadeEnabled&&(o.fadeVolume-=o.fadeDelta,o.fadeVolume<0?(s=0,o.fadeVolume=0,o.fadeEnabled=0,o.volEnvelope.value=0,o.volEnvelope.stopped=1,o.panEnvelope.stopped=1):s=s*o.fadeVolume>>16)):o.keyoff&&(s=0,i|=p),r=o.panning,a.panEnabled&&(o.panEnabled&&!o.panEnvelope.stopped&&this.envelope(o,o.panEnvelope,a.panData),r=o.panEnvelope.value<<2,i|=u,r<0?r=0:r>255&&(r=255)),i&p&&(s<0?s=0:s>64&&(s=64),e.volume=D[s*this.master>>6],e.lvol=e.volume*e.lpan,e.rvol=e.volume*e.rpan),i&u&&(e.panning=r,e.lpan=U[256-r],e.rpan=U[r],e.lvol=e.volume*e.lpan,e.rvol=e.volume*e.rpan),i&h&&(t+=o.period+o.arpDelta+o.vibDelta,this.linear?e.speed=(548077568*Math.pow(2,(4608-t)/768)/this.sampleRate>>0)/65536:e.speed=(14317456/t*65536/this.sampleRate>>0)/65536,e.delta=e.speed>>0,e.speed-=e.delta),o=o.next}},accurate:{value:function(){for(var e,t,i,a,r,s,o,l,n,v,b=this.voices[0];b;)e=b.channel,i=b.flags,b.flags=0,i&d&&(e.sample&&(i|=m,e.mixCounter=220,e.oldSample=null,e.oldPointer=-1,e.enabled&&(e.oldDir=e.dir,e.oldFraction=e.fraction,e.oldSpeed=e.speed,e.oldSample=e.sample,e.oldPointer=e.pointer,e.oldLength=e.length,e.lmixRampD=e.lvol,e.lmixDeltaD=e.lvol/220,e.rmixRampD=e.rvol,e.rmixDeltaD=e.rvol/220)),e.dir=1,e.fraction=0,e.sample=b.sample,e.pointer=b.sampleOffset,e.length=b.sample.length,e.enabled=e.sample.data?1:0,b.playing=b.instrument,b.sampleOffset=0),a=b.playing,t=a.vibratoSpeed?b.autoVibrato():0,v=b.volume+b.volDelta,a.volEnabled?(b.volEnabled&&!b.volEnvelope.stopped&&this.envelope(b,b.volEnvelope,a.volData),v=v*b.volEnvelope.value>>6,i|=p,b.fadeEnabled&&(b.fadeVolume-=b.fadeDelta,b.fadeVolume<0?(v=0,b.fadeVolume=0,b.fadeEnabled=0,b.volEnvelope.value=0,b.volEnvelope.stopped=1,b.panEnvelope.stopped=1):v=v*b.fadeVolume>>16)):b.keyoff&&(v=0,i|=p),o=b.panning,a.panEnabled&&(b.panEnabled&&!b.panEnvelope.stopped&&this.envelope(b,b.panEnvelope,a.panData),o=b.panEnvelope.value<<2,i|=u,o<0?o=0:o>255&&(o=255)),e.enabled?(i&p&&(v<0?v=0:v>64&&(v=64),v=D[v*this.master>>6],s=v*U[256-o],n=v*U[o],v==e.volume||e.mixCounter?(e.lvol=s,e.rvol=n):(e.volCounter=i&m?220:this.mixer.samplesTick,e.lvolDelta=(s-e.lvol)/e.volCounter,e.rvolDelta=(n-e.rvol)/e.volCounter),e.volume=v),i&u&&(r=U[256-o],l=U[o],o==e.panning||e.mixCounter||e.volCounter?(e.lpan=r,e.rpan=l):(e.panCounter=this.mixer.samplesTick,e.lpanDelta=(r-e.lpan)/e.panCounter,e.rpanDelta=(l-e.rpan)/e.panCounter),e.panning=o),i&h&&(t+=b.period+b.arpDelta+b.vibDelta,this.linear?e.speed=(548077568*Math.pow(2,(4608-t)/768)/this.sampleRate>>0)/65536:e.speed=(14317456/t*65536/this.sampleRate>>0)/65536),e.mixCounter&&(e.lmixRampU=0,e.lmixDeltaU=e.lvol/220,e.rmixRampU=0,e.rmixDeltaU=e.rvol/220),b=b.next):(e.volCounter=0,e.panCounter=0,b=b.next)}},envelope:{value:function(e,t,i){var a,r=t.position,s=i.points[r];if(t.frame==s.frame){if(i.flags&g&&r==i.loopEnd&&(r=t.position=i.loopStart,s=i.points[r],t.frame=s.frame),r==i.total-1)return t.value=s.value,void(t.stopped=1);if(i.flags&w&&r==i.sustain&&!e.fadeEnabled)return void(t.value=s.value);t.position++,a=i.points[t.position],t.delta=(a.value-s.value<<8)/(a.frame-s.frame)>>0||0,t.fraction=s.value<<8}else t.fraction+=t.delta;t.value=t.fraction>>8,t.frame++}},amiga:{value:function(e,t){var i=0,a=C[++e];return t<0?i=(C[--e]-a)/64:t>0&&(i=(a-C[++e])/64),a-i*t>>0}},retrig:{value:function(e){switch(e.retrigx){case 1:e.volume--;break;case 2:e.volume++;break;case 3:e.volume-=4;break;case 4:e.volume-=8;break;case 5:e.volume-=16;break;case 6:e.volume=(e.volume<<1)/3;break;case 7:e.volume>>=1;break;case 8:e.volume=e.sample.volume;break;case 9:e.volume++;break;case 10:e.volume+=2;break;case 11:e.volume+=4;break;case 12:e.volume+=8;break;case 13:e.volume+=16;break;case 14:e.volume=3*e.volume>>1;break;case 15:e.volume<<=1}e.volume<0?e.volume=0:e.volume>64&&(e.volume=64),e.flags|=p}}}),Object.seal(n)}var h=1,p=2,u=4,d=8,b=15,m=32,f=1,w=2,g=4,P=0,y=118,k=97,S=[0,-2,-3,-5,-6,-8,-9,-11,-12,-14,-16,-17,-19,-20,-22,-23,-24,-26,-27,-29,-30,-32,-33,-34,-36,-37,-38,-39,-41,-42,-43,-44,-45,-46,-47,-48,-49,-50,-51,-52,-53,-54,-55,-56,-56,-57,-58,-59,-59,-60,-60,-61,-61,-62,-62,-62,-63,-63,-63,-64,-64,-64,-64,-64,-64,-64,-64,-64,-64,-64,-63,-63,-63,-62,-62,-62,-61,-61,-60,-60,-59,-59,-58,-57,-56,-56,-55,-54,-53,-52,-51,-50,-49,-48,-47,-46,-45,-44,-43,-42,-41,-39,-38,-37,-36,-34,-33,-32,-30,-29,-27,-26,-24,-23,-22,-20,-19,-17,-16,-14,-12,-11,-9,-8,-6,-5,-3,-2,0,2,3,5,6,8,9,11,12,14,16,17,19,20,22,23,24,26,27,29,30,32,33,34,36,37,38,39,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,56,57,58,59,59,60,60,61,61,62,62,62,63,63,63,64,64,64,64,64,64,64,64,64,64,64,63,63,63,62,62,62,61,61,60,60,59,59,58,57,56,56,55,54,53,52,51,50,49,48,47,46,45,44,43,42,41,39,38,37,36,34,33,32,30,29,27,26,24,23,22,20,19,17,16,14,12,11,9,8,6,5,3,2],x=[0,24,49,74,97,120,141,161,180,197,212,224,235,244,250,253,255,253,250,244,235,224,212,197,180,161,141,120,97,74,49,24],U=[0,.04417,.062489,.076523,.088371,.098821,.108239,.116927,.124977,.132572,.139741,.146576,.153077,.159335,.16535,.171152,.176772,.18221,.187496,.19263,.197643,.202503,.207273,.211951,.216477,.220943,.225348,.229631,.233854,.237985,.242056,.246066,.249985,.253873,.25767,.261437,.265144,.268819,.272404,.275989,.279482,.282976,.286409,.289781,.293153,.296464,.299714,.302965,.306185,.309344,.312473,.315602,.318671,.321708,.324746,.327754,.3307,.333647,.336563,.339449,.342305,.345161,.347986,.350781,.353545,.356279,.359013,.361717,.364421,.367094,.369737,.37238,.374992,.377574,.380157,.382708,.38526,.387782,.390303,.392794,.395285,.397746,.400176,.402606,.405037,.407437,.409836,.412206,.414576,.416915,.419254,.421563,.423841,.42618,.428458,.430737,.432985,.435263,.437481,.439729,.441916,.444134,.446321,.448508,.450665,.452852,.455009,.457136,.459262,.461389,.463485,.465611,.467708,.469773,.471839,.473935,.47597,.478036,.480072,.482077,.484112,.486117,.488122,.490127,.492101,.494106,.496051,.498025,.5,.501944,.503888,.505802,.507746,.50966,.511574,.513488,.515371,.517255,.519138,.521022,.522905,.524758,.526611,.528465,.530318,.53214,.533993,.535816,.537639,.539462,.541254,.543046,.544839,.546631,.548423,.550216,.551978,.553739,.555501,.557263,.558995,.560757,.562489,.56422,.565952,.567683,.569384,.571116,.572817,.574518,.57622,.57789,.579592,.581262,.582964,.584634,.586305,.587946,.589617,.591257,.592928,.594568,.596209,.597849,.599459,.6011,.60271,.60435,.60596,.60757,.60915,.61076,.61237,.61395,.61556,.617139,.618719,.620268,.621848,.623428,.624977,.626557,.628106,.629655,.631205,.632754,.634303,.635822,.637372,.63889,.64044,.641959,.643478,.644966,.646485,.648004,.649523,.651012,.6525,.653989,.655477,.656966,.658454,.659943,.661431,.66289,.664378,.665836,.667294,.668783,.670241,.671699,.673127,.674585,.676043,.677471,.678929,.680357,.681785,.683213,.684641,.686068,.687496,.688894,.690321,.691749,.693147,.694574,.695972,.697369,.698767,.700164,.701561,.702928,.704326,.705723,.70711],D=[0,.005863,.013701,.021569,.029406,.037244,.045082,.052919,.060757,.068625,.076463,.0843,.092138,.099976,.107844,.115681,.123519,.131357,.139194,.147032,.1549,.162738,.170575,.178413,.186251,.194119,.201956,.209794,.217632,.225469,.233307,.241175,.249013,.25685,.264688,.272526,.280394,.288231,.296069,.303907,.311744,.319582,.32745,.335288,.343125,.350963,.3588,.366669,.374506,.382344,.390182,.398019,.405857,.413725,.421563,.4294,.437238,.445076,.452944,.460781,.468619,.476457,.484294,.492132,.5],C=[29024,27392,25856,24384,23040,21696,20480,19328,18240,17216,16256,15360,14512,13696,12928,12192,11520,10848,10240,9664,9120,8608,8128,7680,7256,6848,6464,6096,5760,5424,5120,4832,4560,4304,4064,3840,3628,3424,3232,3048,2880,2712,2560,2416,2280,2152,2032,1920,1814,1712,1616,1524,1440,1356,1280,1208,1140,1076,1016,960,907,856,808,762,720,678,640,604,570,538,508,480,453,428,404,381,360,339,320,302,285,269,254,240,227,214,202,190,180,169,160,151,142,134,127,120,113,107,101,95,90,85,80,75,71,67,63,60,57,53,50,48,45,42,40,38,36,34,32,30,28];window.neoart.F2Player=n}()}();